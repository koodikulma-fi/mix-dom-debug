var e=require('data-signals'),t=require('mix-dom'),o=require('dom-types'),i=require('mix-dom/camelCase'),s=require('data-memo');function consoleLog(e,...t){console.log(...t),e&&e.console&&e.console.log(...t)}const wrapTip=(...e)=>t.MixDOM.def('div',{class:o.classNames('style-ui-panel flex-col layout-gap-l'),style:'min-width: 100px;'},...e);function flattenTreeWith(e,t,o){o||(o='children');const i=[];let s,n=e.map((e=>[e,null,0])),l=0;for(;s=n[l++];){const[e,r,a]=s,d=t(e,r,a);if(i.push(d),e[o]){const t=a+1;n=e[o].map((e=>[e,d,t])).concat(n.slice(l)),l=0}}return i}const n='0.3.6',MixHoverSignal=(e,o)=>{o.hoverTimeout=500;let i=!1;return o.hoverRef=new t.Ref,o.hoverRef.listenTo('domDidMount',(e=>{e.addEventListener('mouseenter',(()=>{!o.hoverDisabled&&o.setTimer('onMouseEnter',(()=>o.sendSignal('onHover',i=!0)),o.hoverTimeout)})),e.addEventListener('mouseleave',(()=>{'one-time'===o.hoverDisabled&&(o.hoverDisabled=!1),o.clearTimers('onMouseEnter'),i&&o.sendSignal('onHover',i=!1)}))})),null};var l;!function(e){e[e.Left=1]='Left',e[e.Top=2]='Top',e[e.Right=4]='Right',e[e.Bottom=8]='Bottom',e[e.Horizontal=5]='Horizontal',e[e.Vertical=10]='Vertical',e[e.None=0]='None',e[e.All=15]='All'}(l||(l={}));const cleanMargin=e=>{const t={top:0,left:0,right:0,bottom:0};if('number'==typeof e)t.top=t.left=t.bottom=t.right=e;else if(e&&e.constructor===Array)t.left=t.right=e[0]||0,t.top=t.bottom=e[1]||0;else if(e){const o=e;t.left=o.left||0,t.right=o.right||0,t.top=o.top||0,t.bottom=o.bottom||0}return t};class FitBoxAlgoritms{static fitToSize(e,t,o=l.None,i='push',s='push'){const n=Object.assign({},e);if((o&l.Horizontal)!==l.Horizontal){let e=n.left,s=n.width;'anchored'===i?[e,s]=FitBoxAlgoritms.axisFitAnchored(n.left,n.width,t.left,t.width,!(o&l.Left),!(o&l.Right)):'push'===i&&([e,s]=FitBoxAlgoritms.axisFitPush(n.left,n.width,t.left,t.width)),n.left=e,n.width=s}if((o&l.Vertical)!==l.Vertical){let e=n.top,i=n.height;'anchored'===s?[e,i]=FitBoxAlgoritms.axisFitAnchored(n.top,n.height,t.top,t.height,!(o&l.Top),!(o&l.Bottom)):'push'===s&&([e,i]=FitBoxAlgoritms.axisFitPush(n.top,n.height,t.top,t.height)),n.top=e,n.height=i}return n}static axisFitPush(e,t,o,i){t>i&&(t=i);const s=e+t,n=o+i;return s>n&&(e-=s-n),e<o&&(e=o),[e,t]}static axisFitAnchored(e,t,o,i,s=!0,n=!0){const l=o+i;let r=e,a=e+t,d=0;if(n&&a>l){d=l-a,a=l}if(s&&r+d<o){d=o-(r+d),r=o}return d>0&&n&&a+d>l&&(a=l,d=0),[r,a-r]}}const r=t.MixDOM.component((e=>{let i=null;const s=new t.Ref;e.state={left:0,top:0,width:0,height:0},e.listenTo('didMount',(()=>{i=new ResizeObserver(onResize);const e=s.getElement();if(e){const t=e.parentElement;i.observe(e),t&&i.observe(t)}})),e.listenTo('willUnmount',(()=>{i&&i.disconnect(),i=null}));const onResize=()=>{const t=s.getElement(),o={top:e.props.offset&&e.props.offset.top||0,left:e.props.offset&&e.props.offset.left||0,width:t?t.offsetWidth:0,height:t?t.offsetHeight:0},i=e.props.align&&e.props.align.horizontal||'left',n=e.props.align&&e.props.align.vertical||'top';'right'===i?o.left-=o.width:'center'===i&&(o.left-=.5*o.width),'bottom'===n?o.top-=o.height:'center'===n&&(o.top-=.5*o.height),resizeBy(o)},resizeBy=t=>{let o={left:0,top:0,width:0,height:0};if(e.props.getContainerRect)o=e.props.getContainerRect();else{const e=s.getElement();if(e){const t=e.parentElement;t&&(o.width=t.offsetWidth,o.height=t.offsetHeight)}}const i=cleanMargin(e.props.margin);o.left=i.left,o.width-=i.left+i.right,o.top=i.top,o.height-=i.top+i.bottom;let n=0;const r=e.props.align?e.props.align.horizontal:'left',a=e.props.align?e.props.align.vertical:'top';e.props.lockHorizontal&&(n|='left'===r?l.Left:'right'===r?l.Right:l.Horizontal),e.props.lockVertical&&(n|='top'===a?l.Top:'bottom'===a?l.Bottom:l.Vertical);const d=e.props.lockHorizontal?'anchored':'push',c=e.props.lockVertical?'anchored':'push',p=FitBoxAlgoritms.fitToSize(t,o,n,d,c);e.props.lockHorizontal?p.width='left'===r?o.left+o.width-t.left:'right'===r?t.left+t.width-o.left:p.width:p.width=o.width,e.props.lockVertical?p.height='top'===a?o.top+o.height-t.top:'bottom'===a?t.top+t.height-o.top:p.height:p.height=o.height,!e.props.onMaxSize||p.width===e.state.width&&p.height===e.state.height||e.props.onMaxSize(p.width,p.height),e.isMounted()?e.setState(p,!0,!1,null,null):e.setState(p)};return onResize(),(e,i)=>{const n=Object.assign(Object.assign({},e.style?'string'==typeof e.style?o.parseDOMStyle(e.style):e.style:void 0),{position:'absolute',left:i.left+'px',top:i.top+'px',maxWidth:i.width+'px',maxHeight:i.height+'px'});return t.MixDOM.def('div',{className:o.classNames('m-size-fitter',e.className),_ref:s,style:n},t.MixDOM.Content)}})),a=t.MixDOM.component((e=>{e.state={refreshId:{}};const i={top:0,left:0},n={horizontal:e.props.hAlign||'center',vertical:e.props.vAlign||'center'},l=s.createMemo(((e,t)=>()=>e&&e()||{top:0,left:0,width:window.innerWidth,height:window.innerHeight})),a=s.createTrigger((({getContainerRect:e,getElement:t,elementMargin:o,hAlign:s,vAlign:r,refreshId:a})=>{const d=l(e,a)(),c=t&&('function'==typeof t?t():t)||null;if(c&&document.body.contains(c)){const e=c.getBoundingClientRect(),t=cleanMargin(null==o?0:o);n.horizontal=s||'center',n.vertical=r||(e.top+.5*e.height>.5*d.height?'bottom':'top'),i.left=e.left+('right'===n.horizontal?-t.right+e.width:'center'===n.horizontal?.5*e.width:t.left),i.top=e.top+('top'===n.vertical?t.bottom+e.height:'center'===n.vertical?.5*e.height:-t.top)}else i.left=d.left+.5*d.width,i.top=d.top+.5*d.height,n.horizontal='center',n.vertical='center'})),d=new ResizeObserver((()=>{e.setState({refreshId:{}})}));e.listenTo('willUnmount',(()=>d.disconnect));const domDidMount=e=>{d.observe(e)};return(e,s)=>(a({getContainerRect:e.getContainerRect,getElement:e.getElement,elementMargin:e.elementMargin,hAlign:e.hAlign,vAlign:e.vAlign,refreshId:s.refreshId}),t.MixDOM.def('div',{class:o.classNames('ui-popup-contents layout-fit-size',e.className),style:e.style,_signals:{domDidMount}},t.MixDOM.def(r,{offset:i,getContainerRect:l(e.getContainerRect),align:n,margin:e.margin},t.MixDOM.def('div',{class:o.classNames('popup-content',e.contentClassName),style:e.contentStyle},t.MixDOM.Content))))})),UIPopupContainer=e=>{const o=t.MixDOM.def(a,{getElement:e.sourceElement,contentClassName:e.contentClassName,contentStyle:e.contentStyle,hAlign:e.horizontalAlign,vAlign:e.verticalAlign,margin:e.containerMargin,elementMargin:e.elementMargin,style:e.style},t.MixDOM.Content);return!e.container||e.container instanceof Node?t.MixDOM.def(t.MixDOM.Portal,{container:e.container||document.body},o):t.MixDOM.def(e.container,null,o)},UIVirtualRow=e=>t.MixDOM.def('div',{className:'ui-virtual-row',style:{position:'absolute',top:e.rowHeight*e.iRow+'px',height:e.rowHeight,width:'100%'}},t.MixDOM.Content),d=t.MixDOM.component((i=>{i.state={height:0,iStart:-1,iEnd:-1};const n=new t.Ref;let l;i.scrollToIndex=(t,o,s,r)=>{const a=n.getElement();if(!a)return;r&&(l=o=>{const finishOff=()=>r(i.getElementAt(t));o?i.listenTo('didUpdate',finishOff,null,e.SignalListenerFlags.OneShot):finishOff()});const d=a.scrollTop,c=t*i.props.rowHeight;(!s||c<d||c+i.props.rowHeight>d+a.clientHeight)&&a.scrollTo({top:c,behavior:o||'auto'}),d===a.scrollTop&&l&&(l(!1),l=void 0)},i.getRootElement=()=>n.getElement(),i.getListElement=()=>{var e;return(null===(e=n.getElement())||void 0===e?void 0:e.querySelector('.list-content'))||null},i.getElementAt=e=>{var t;return(null===(t=n.getElement())||void 0===t?void 0:t.querySelectorAll('.list-content .ui-virtual-row')[e-i.getRenderedState().iStart])||null},i.getFirstVisibleItem=e=>{const t=n.getElement(),o=t&&t.querySelectorAll('.list-content .ui-virtual-row');if(!o)return null;const i=t.scrollTop;return e?o[0]||null:[...o].find((e=>e.offsetTop>=i))||null};const r=s.createDataTrigger((()=>{let e=null;const mountResizer=t=>{e=new ResizeObserver(onRefresh),e.observe(t),i.setState({height:t.offsetHeight}),onRefresh()};n.listenTo('domDidMount',mountResizer);const unmountResizer=()=>{n.unlistenTo('domDidMount',mountResizer),n.unlistenTo('domWillUnmount',unmountResizer),e&&e.disconnect(),e=null};return n.listenTo('domWillUnmount',unmountResizer),unmountResizer})),onRefresh=()=>{const e=n.getElement(),t=(null==e?void 0:e.scrollTop)||0,o=void 0!==i.props.rowTolerance?i.props.rowTolerance:2,r=(null==e?void 0:e.offsetHeight)||0,a=i.props.nRows-1,d={iStart:Math.min(Math.max(0,Math.floor(t/i.props.rowHeight-o)),a),iEnd:Math.min(Math.floor((t+r)/i.props.rowHeight+o),a),height:(null==e?void 0:e.offsetHeight)||0},c=!s.areEqual(d,i.state,1);l&&(l(c),l=void 0),c&&i.setState(d)},a=s.createDataTrigger(onRefresh,[i.props.rowHeight,i.props.nRows,i.props.rowTolerance,i.props.refreshId]),d=onRefresh;return(e,i)=>{r(!1!==e.handleResizing),a([e.rowHeight,e.nRows,e.rowTolerance,e.refreshId]);const l=e.nRows,c=s.numberRange(i.iStart,i.iEnd+1).map((o=>{let i=e.renderRow(o,l,e.rowHeight);return i&&!1!==e.autoWrap?t.MixDOM.def(UIVirtualRow,{iRow:o,nRows:l,rowHeight:e.rowHeight,_key:e.getRowKey?e.getRowKey(o,l):o},i):i}));return t.MixDOM.def('div',{_ref:n,className:o.classNames('ui-virtual-list layout-scrollable style-scrollable',e.className),style:Object.assign({display:'flex',flexDirection:'column'},e.style||{}),onScroll:d},t.MixDOM.def('div',{className:o.classNames('list-content',e.contentClassName),style:Object.assign({position:'relative',paddingBottom:l*e.rowHeight+'px'},e.contentStyle||{})},c))}}));function UIList(e,i){const n=s.createMemo(((...e)=>({}))),l=s.createMemo(((e,t,...o)=>{let i=0;return t?e.filter(((e,o)=>!!t(e,o,i)&&++i)):e.slice()}));let r=l(i.props.items,i.props.filter,i.props.refreshId);const renderRow=(e,o,s)=>{const n=i.props,l=r[e];return l?t.MixDOM.def(n.Item,Object.assign({_key:n.keyProp?l[n.keyProp]:l,item:l},n.commonProps)):null},getRowKey=e=>i.props.keyProp&&i.props.items[e]?i.props.items[e][i.props.keyProp]:e;return(e,i)=>{var s;return r=l(e.items,e.filter,e.refreshId),t.MixDOM.def('div',{class:o.classNames('ui-tree-list flex-col layout-fit-size',e.className),role:'tree'},t.MixDOM.def(d,{_ref:e.refVirtualList,nRows:r.length,getRowKey,rowHeight:null!==(s=e.rowHeight)&&void 0!==s?s:30,renderRow,refreshId:n(r,e.commonProps,e.refreshId),className:e.listClassName}))}}var __rest$5=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(o[i[s]]=e[i[s]])}return o};const MixPositionedPopup=(e,i)=>(i.state=Object.assign(Object.assign({},i.state),{popupOpened:!1,popupSourceElement:null}),i.showPopup=(e,t)=>{void 0!==e&&i.setInState('popupSourceElement',e);const o=i.state.popupFadeIn;t||!o?i.setInState('popupOpened',!0):!0!==i.state.popupOpened&&(i.setTimer('popupFade',(()=>{'start'===i.state.popupOpened&&(i.setTimer('popupFade',(()=>'in'===i.state.popupOpened&&i.setInState('popupOpened',!0)),o),i.setInState('popupOpened','in'))}),25),i.setInState('popupOpened','start'))},i.hidePopup=e=>{i.state.popupOpened&&(e||!i.state.popupFadeOut?i.setState({popupOpened:!1,popupSourceElement:null}):(i.setInState('popupOpened','out'),i.setTimer('popupFade',(()=>'out'===i.state.popupOpened&&i.setState({popupOpened:!1,popupSourceElement:null})),i.state.popupFadeOut)))},i.WithTooltip=t.MixDOM.wired((()=>({popupOpened:i.state.popupOpened,horizontalAlign:i.state.horizontalAlign,verticalAlign:i.state.verticalAlign,containerMargin:i.state.containerMargin,elementMargin:i.state.elementMargin,popupFadeIn:i.state.popupFadeIn,popupFadeOut:i.state.popupFadeOut,popupSourceEl:i.state.popupSourceElement,refreshId:i.refreshPopupId})),(e=>{if(!e.popupOpened)return null;const s=i.renderPopup?i.renderPopup():null;if(null==s)return null;const{popupOpened:n,refreshId:l}=e,r=__rest$5(e,['popupOpened','refreshId']),a='start'===n||'in'===n?e.popupFadeIn:e.popupFadeOut;return t.MixDOM.def(UIPopupContainer,Object.assign({container:i.popupContainer,sourceElement:e.popupSourceEl,contentClassName:o.classNames('style-shadow-overlay','out'===n||'start'===n?'style-opacity-0':'style-opacity-1'),contentStyle:a?`transition: opacity ${a}ms ${'out'===n?'ease-in':'ease-in-out'}`:void 0},r),s)}),'WithTooltip'),i.addWired(i.WithTooltip),null),MixOnEscape=(e,t)=>{const onKeyDown=e=>{'Escape'===e.key&&(e.preventDefault(),e.stopPropagation(),t.sendSignal('onEscape'))};return t.useEscape=e=>(e?window.addEventListener:window.removeEventListener)('keydown',onKeyDown),null};var __rest$4=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(o[i[s]]=e[i[s]])}return o};const c=t.MixDOM.remote(),p=t.MixDOM.mixFuncsWith(MixHoverSignal,MixOnEscape,MixPositionedPopup,((e,i)=>{i.state=Object.assign(Object.assign({},i.state),{elementMargin:5,containerMargin:10,popupFadeIn:100,popupFadeOut:300}),i.popupContainer=c,i.setHovered=e=>{const t=i.hoverRef.getElement();e?i.showPopup(i.props.getPositionSource?i.props.getPositionSource(t):t):i.hidePopup(),i.useEscape(i.props.escToCloseTip&&e||!1)},i.listenTo('onHover',(e=>{e&&'one-time'===i.hoverDisabled?i.hoverDisabled=!1:i.setHovered(e)})),i.listenTo('onEscape',(()=>i.hidePopup()));const onClick=e=>{i.props.onClick&&i.props.onClick(e),!1!==i.props.clickToCloseTip&&(i.state.popupOpened?i.hidePopup():i.hoverDisabled='one-time')};return i.renderPopup=()=>'function'==typeof i.props.renderTip?i.props.renderTip(i):i.props.renderTip,i.listenTo('preUpdate',(e=>{e&&e.disableHover!==i.props.disableHover&&(i.hoverDisabled=i.props.disableHover)})),e=>{const{class:s,className:n,tag:l,renderTip:r,getPositionSource:a,escToCloseTip:d,clickToCloseTip:c,onClick:p,refreshId:u,rootRef:f}=e,M=__rest$4(e,['class','className','tag','renderTip','getPositionSource','escToCloseTip','clickToCloseTip','onClick','refreshId','rootRef']);return i.refreshPopupId=r,t.MixDOM.def(l,Object.assign({_ref:f?[f,i.hoverRef]:i.hoverRef,class:o.classNames(s,n),onClick},M),t.MixDOM.Content,t.MixDOM.def(i.WithTooltip))}}),null),u=['heading','code','props','state','contexts','rendered-by','wired','remote','children','renders'],f={'':null,expanded:t.MixDOM.def('svg',{viewBox:'0 0 10 10'},t.MixDOM.def('path',{d:'M 2.5,4 L 5,6 L 7.5,4',fill:'none',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'})),collapsed:t.MixDOM.def('svg',{viewBox:'0 0 10 10'},t.MixDOM.def('path',{d:'M 4,2.5 L 6,5 L 4,7.5',fill:'none',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'})),back:t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M658.8,527.9c14.4,0,26.2-11.8,26.2-26.1V292.3c0-14.4-11.8-26.2-26.2-26.2H397V135.2c0-10.6-6.4-20.1-16.2-24.2 c-9.7-4-21-1.8-28.5,5.7L90.5,378.5c-10.1,10.2-10.1,26.9,0,37l261.8,261.8c4.9,5.1,11.6,7.7,18.5,7.7c3.3,0,6.7-0.7,10-2 c9.8-4.1,16.2-13.6,16.2-24.2V527.9H658.8L658.8,527.9z',fill:'currentColor'})),forwards:t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M109.1,527.9h261.8v130.9c0,10.6,6.4,20.1,16.2,24.2c3.3,1.3,6.7,2,10,2c6.9,0,13.6-2.6,18.5-7.7l261.8-261.8 c10.1-10.1,10.1-26.8,0-37L415.6,116.7c-7.5-7.5-18.8-9.7-28.5-5.7c-9.8,4.1-16.2,13.6-16.2,24.2v130.9H109.1 c-14.4,0-26.2,11.8-26.2,26.2v209.5C82.9,516.1,94.7,527.9,109.1,527.9L109.1,527.9z',fill:'currentColor'})),console:t.MixDOM.def('svg',{viewBox:'0 0 10 10'},t.MixDOM.def('path',{d:'M 2,3 L 4,5 L 2,7',fill:'none',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'}),t.MixDOM.def('line',{x1:'6',x2:'8.5',y1:'8',y2:'8',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'})),theme:t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M386.4,50.2c-184.5,0-334,149.5-334,334s149.5,334,334,334c59.1,0,84.8-81,36.6-114.1c-29.8-20.5,18.2-83.2,70.4-83.2 c79.9,0,227,12.7,227-136.7C720.4,199.8,570.9,50.2,386.4,50.2z M148.4,401.8c-22.6,0-40.9-18.3-40.9-40.9s18.3-40.9,40.9-40.9 c22.6,0,40.9,18.3,40.9,40.9S171,401.8,148.4,401.8z M217.6,272.9c-26.2,0-47.5-21.2-47.5-47.5c0-26.2,21.2-47.5,47.5-47.5 c26.2,0,47.5,21.2,47.5,47.5C265.1,251.7,243.8,272.9,217.6,272.9z M358.6,209c-29.9,0-54.1-24.2-54.1-54.1 c0-29.9,24.2-54.1,54.1-54.1c29.9,0,54.1,24.2,54.1,54.1C412.6,184.8,388.4,209,358.6,209z M521.1,262.2c-32.1,0-58.1-26-58.1-58.1 s26-58.1,58.1-58.1c32.1,0,58.1,26,58.1,58.1S553.2,262.2,521.1,262.2z M613.1,427.1c-34.6,0-62.6-28-62.6-62.6s28-62.6,62.6-62.6 c34.6,0,62.6,28,62.6,62.6S647.7,427.1,613.1,427.1z',fill:'currentColor'})),close:t.MixDOM.def('svg',{viewBox:'0 0 16 16'},t.MixDOM.def('path',{d:'M10.1,8L13,5.1c0.6-0.6,0.6-1.5,0-2.1c-0.6-0.6-1.5-0.6-2.1,0L8,5.9L5.1,3C4.5,2.4,3.6,2.4,3,3C2.4,3.6,2.4,4.5,3,5.1L5.9,8 L3,10.9c-0.6,0.6-0.6,1.5,0,2.1c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4L8,10.1l2.9,2.9c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4 c0.6-0.6,0.6-1.5,0-2.1L10.1,8z',fill:'currentColor'})),info:t.MixDOM.def('svg',{viewBox:'0 0 16 16'},t.MixDOM.def('path',{d:'M8,15.2c-1,0-1.7-0.8-1.7-1.7v-6H4.9c0-1,1.1-1.7,3.1-1.7c1,0,1.7,0.8,1.7,1.7v6H11C11.1,14.5,9.7,15.2,8,15.2z',fill:'currentColor'}),t.MixDOM.def('circle',{cx:'8',cy:'2.6',r:'1.7',fill:'currentColor'})),'show-all':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M384 134.4c-177.6 0-331.2 139.2-331.2 249.6s158.4 249.6 331.2 249.6c182.4 0 331.2-153.6 331.2-249.6s-148.8-249.6-331.2-249.6zM384 576c-158.4 0-273.6-124.8-273.6-192s115.2-192 273.6-192c153.6 0 273.6 134.4 273.6 192s-120 192-273.6 192z M384 244.8c-67.2 0-124.8 62.4-124.8 139.2s57.6 139.2 124.8 139.2 124.8-62.4 124.8-139.2-57.6-139.2-124.8-139.2z',fill:'currentColor'})),'show-matched':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M744 158.4c-14.4-24-43.2-28.8-67.2-14.4l-91.2 57.6c-52.8-38.4-124.8-67.2-201.6-67.2-177.6 0-331.2 139.2-331.2 249.6 0 38.4 19.2 81.6 52.8 120l-62.4 38.4c-24 14.4-28.8 43.2-14.4 67.2 9.6 14.4 24 24 38.4 24 9.6 0 19.2 0 24-9.6l86.4-52.8c57.6 38.4 129.6 62.4 201.6 62.4 182.4 0 331.2-153.6 331.2-249.6 0-33.6-19.2-76.8-52.8-115.2l67.2-43.2c28.8-14.4 33.6-48 19.2-67.2zM110.4 384c0-67.2 115.2-192 273.6-192 57.6 0 105.6 19.2 148.8 43.2l-374.4 235.2c-28.8-28.8-48-62.4-48-86.4zM657.6 384c0 57.6-120 192-273.6 192-57.6 0-105.6-14.4-148.8-38.4l72-43.2c38.4 33.6 86.4 43.2 134.4 19.2 48-28.8 72-86.4 67.2-144l100.8-67.2c28.8 28.8 48 62.4 48 81.6z',fill:'currentColor'})),'scroll-to':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M368.2,704.9c9,9,23.5,9,32.4-0.1l182.8-185.4c14.3-14.4,4.1-38.9-16.3-38.9h-83.4V266.6c0-13.7-11.2-24.9-24.9-24.9H309.6 c-13.7,0-24.9,11.2-24.9,24.9v213.8H199c-20.4,0-30.6,24.6-16.2,39L368.2,704.9z M304.7,202h159.1c10.9,0,19.9-9,19.9-19.9c0-10.9-9-19.9-19.9-19.9H304.7c-10.9,0-19.9,9-19.9,19.9 C284.8,193,293.7,202,304.7,202z M304.7,122.4h159.1c10.9,0,19.9-9,19.9-19.9s-9-19.9-19.9-19.9H304.7c-10.9,0-19.9,9-19.9,19.9S293.7,122.4,304.7,122.4z',fill:'currentColor'})),'select-all':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M128,96c-17.7,0-32,14.3-32,32v512c0,17.7,14.3,32,32,32h512c17.7,0,32-14.3,32-32V128c0-17.7-14.3-32-32-32H128z M608,608 H160V160h448V608z M327.4,500.5c6.1,7.3,15.1,11.5,24.6,11.5c0.3,0,0.5,0,0.8,0c9.8-0.2,18.9-5,24.8-12.8l144-192 c10.6-14.1,7.7-34.2-6.4-44.8c-14.1-10.6-34.2-7.7-44.8,6.4L350.7,428.4l-54.1-64.9c-11.3-13.6-31.5-15.4-45.1-4.1 c-13.6,11.3-15.4,31.5-4.1,45.1L327.4,500.5z',fill:'currentColor'})),'select-none':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M640,96H128c-17.7,0-32,14.3-32,32v512c0,17.7,14.3,32,32,32h512c17.7,0,32-14.3,32-32V128C672,110.3,657.7,96,640,96z  M556,288L376,528c-7.4,9.8-18.8,15.8-31,16c-0.4,0-0.6,0-1,0c-11.9,0-23.1-5.3-30.8-14.4l-100-120c-14.1-17-11.9-42.3,5.1-56.4 c17-14.1,42.3-11.9,56.4,5.1l67.6,81.1L492,240c13.3-17.6,38.4-21.3,56-8C565.7,245.2,569.3,270.4,556,288z',fill:'currentColor'})),'no-selection':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M543.7,352C438,352,352,438,352,543.7s86,191.7,191.7,191.7s191.7-86,191.7-191.7S649.5,352,543.7,352z M543.7,416 c23.6,0,45.8,6.5,64.8,17.7L433.7,608.5c-11.2-19-17.7-41.2-17.7-64.8C416,473.3,473.3,416,543.7,416z M543.7,671.5 c-23.6,0-45.8-6.5-64.8-17.7l174.8-174.8c11.2,19,17.7,41.2,17.7,64.8C671.5,614.2,614.2,671.5,543.7,671.5z',fill:'currentColor'}),t.MixDOM.def('path',{d:'M54,32c-12.2,0-22,9.8-22,22v308c0,12.2,9.8,22,22,22h308c12.2,0,22-9.8,22-22V54c0-12.2-9.8-22-22-22H54z M326.7,147.2 L202.5,312.9c-5.1,6.8-12.9,10.8-21.4,11c-0.2,0-0.5,0-0.7,0c-8.2,0-16-3.6-21.2-9.9l-69-82.8c-9.8-11.7-8.2-29.1,3.5-38.9 c11.7-9.8,29.1-8.2,38.9,3.5l46.7,56l103.3-137.7c9.1-12.2,26.4-14.7,38.6-5.5C333.4,117.7,335.8,135,326.7,147.2z',fill:'currentColor'})),'no-filter':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M543.7,352C438,352,352,438,352,543.7s86,191.7,191.7,191.7s191.7-86,191.7-191.7S649.5,352,543.7,352z M543.7,416 c23.6,0,45.8,6.5,64.8,17.7L433.7,608.5c-11.2-19-17.7-41.2-17.7-64.8C416,473.3,473.3,416,543.7,416z M543.7,671.5 c-23.6,0-45.8-6.5-64.8-17.7l174.8-174.8c11.2,19,17.7,41.2,17.7,64.8C671.5,614.2,614.2,671.5,543.7,671.5z',fill:'currentColor'}),t.MixDOM.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'})),'click-select':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M734.1,603.7L508.8,326.4c-4.6-5.7-12.3-7.9-19.3-5.4c-6.9,2.5-11.5,9-11.5,16.3v312c0,6,3.1,11.6,8.2,14.7 c2.8,1.7,5.9,2.6,9.1,2.6c2.6,0,5.3-0.6,7.8-1.8l51.5-25.7l28.3,85c2.4,7.1,9,11.9,16.4,11.9h69.3c5.6,0,10.8-2.7,14.1-7.2 c3.3-4.5,4.1-10.3,2.4-15.6L658,632h62.6c6.7,0,12.8-3.8,15.7-9.9C739.2,616.1,738.3,608.9,734.1,603.7z',fill:'currentColor'}),t.MixDOM.def('path',{d:'M394.7,32H53.3C41.5,32,32,41.5,32,53.3v341.3c0,11.8,9.5,21.3,21.3,21.3h341.3c11.8,0,21.3-9.5,21.3-21.3V53.3 C416,41.5,406.5,32,394.7,32z M338.7,160l-120,160c-4.9,6.5-12.5,10.5-20.7,10.7c-0.3,0-0.4,0-0.7,0c-7.9,0-15.4-3.5-20.5-9.6 l-66.7-80c-9.4-11.3-7.9-28.2,3.4-37.6c11.3-9.4,28.2-7.9,37.6,3.4l45.1,54.1L296,128c8.9-11.7,25.6-14.2,37.3-5.3 C345.1,131.5,347.5,148.3,338.7,160z',fill:'currentColor'})),'click-select-tip':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M734.1,603.7L508.8,326.4c-4.6-5.7-12.3-7.9-19.3-5.4c-6.9,2.5-11.5,9-11.5,16.3v312c0,6,3.1,11.6,8.2,14.7 c2.8,1.7,5.9,2.6,9.1,2.6c2.6,0,5.3-0.6,7.8-1.8l51.5-25.7l28.3,85c2.4,7.1,9,11.9,16.4,11.9h69.3c5.6,0,10.8-2.7,14.1-7.2 c3.3-4.5,4.1-10.3,2.4-15.6L658,632h62.6c6.7,0,12.8-3.8,15.7-9.9C739.2,616.1,738.3,608.9,734.1,603.7z',fill:'currentColor'}),t.MixDOM.def('path',{d:'M334.2,32H49.8C39.9,32,32,39.9,32,49.8v284.4c0,9.8,7.9,17.8,17.8,17.8h284.4c9.8,0,17.8-7.9,17.8-17.8V49.8 C352,39.9,344.1,32,334.2,32z M287.6,138.7L187.6,272c-4.1,5.4-10.4,8.8-17.2,8.9c-0.2,0-0.3,0-0.6,0c-6.6,0-12.8-2.9-17.1-8 l-55.6-66.7c-7.8-9.4-6.6-23.5,2.8-31.3c9.4-7.8,23.5-6.6,31.3,2.8l37.6,45.1L252,112c7.4-9.8,21.3-11.8,31.1-4.4 C292.9,114.9,294.9,128.9,287.6,138.7z',fill:'currentColor'}),t.MixDOM.def('path',{d:'M193.8,752c-26.3,0-45-22.5-45-45V566h-37.6c0-26.3,30-45,82.5-45c26.3,0,45,22.5,45,45v141h33.8 C276.2,733.2,238.8,752,193.8,752z',fill:'currentColor'}),t.MixDOM.def('circle',{cx:'193.8',cy:'439',r:'45',fill:'currentColor'})),'click-tip':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M178.5,560c-37.8,0-64.7-32.3-64.7-64.7V263.4h-54c0-37.8,43.1-64.7,118.6-64.7c37.8,0,64.7,32.3,64.7,64.7v231.9h48.6 C297.1,533,243.2,560,178.5,560z',fill:'currentColor'}),t.MixDOM.def('circle',{cx:'178.5',cy:'80.7',r:'64.7',fill:'currentColor'}),t.MixDOM.def('path',{d:'M734.1,603.7L508.8,326.4c-4.6-5.7-12.3-7.9-19.3-5.4c-6.9,2.5-11.5,9-11.5,16.3v312c0,6,3.1,11.6,8.2,14.7 c2.8,1.7,5.9,2.6,9.1,2.6c2.6,0,5.3-0.6,7.8-1.8l51.5-25.7l28.3,85c2.4,7.1,9,11.9,16.4,11.9h69.3c5.6,0,10.8-2.7,14.1-7.2 c3.3-4.5,4.1-10.3,2.4-15.6L658,632h62.6c6.7,0,12.8-3.8,15.7-9.9C739.2,616.1,738.3,608.9,734.1,603.7z',fill:'currentColor'})),filter:t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M448 384v252.16c1.28 9.6-1.92 19.84-9.28 26.56-12.48 12.48-32.64 12.48-45.12 0l-64.32-64.32c-7.36-7.36-10.56-17.28-9.28-26.56v-187.84h-0.96l-184.32-236.16c-10.88-13.76-8.32-33.92 5.44-44.8 6.080-4.48 12.8-7.040 19.84-7.040h448c7.040 0 13.76 2.56 19.84 7.040 13.76 10.88 16.32 31.040 5.44 44.8l-184.32 236.16h-0.96z',fill:'currentColor'})),'filter-expanded':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M 672,512 L 544,672 L 416,512',fill:'none',stroke:'currentColor','stroke-width':'96','stroke-linejoin':'round','stroke-linecap':'round'}),t.MixDOM.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'})),'filter-collapsed':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M 544,384 L 704,512 L 544,640',fill:'none',stroke:'currentColor','stroke-width':'96','stroke-linejoin':'round','stroke-linecap':'round'}),t.MixDOM.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'})),'filter-parents':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'}),t.MixDOM.def('path',{d:'M656,576c-35.9,0-66.3,23.7-76.4,56.3c-1.2-0.2-2.4-0.3-3.6-0.3H472v-99.3c36.9-10.5,64-44.5,64-84.7c0-48.5-39.5-88-88-88 s-88,39.5-88,88c0,40.2,27.1,74.2,64,84.7V656c0,13.3,10.7,24,24,24h128c1.2,0,2.4-0.1,3.6-0.3c10.1,32.6,40.5,56.3,76.4,56.3 c44.2,0,80-35.8,80-80S700.2,576,656,576z M408,448c0-22.1,17.9-40,40-40s40,17.9,40,40s-17.9,40-40,40S408,470.1,408,448z',fill:'currentColor'})),'filter-children':t.MixDOM.def('svg',{viewBox:'0 0 768 768'},t.MixDOM.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'}),t.MixDOM.def('path',{d:'M656,560c-44.7,0-82.3,30.6-93,72h-91V524.3c32.5-10.2,56-40.5,56-76.3c0-44.2-35.8-80-80-80s-80,35.8-80,80 c0,35.8,23.5,66.1,56,76.3V656c0,13.3,10.7,24,24,24h115c10.7,41.4,48.3,72,93,72c52.9,0,96-43.1,96-96S708.9,560,656,560z M656,699.6c-24.1,0-43.6-19.6-43.6-43.6s19.6-43.6,43.6-43.6s43.6,19.6,43.6,43.6S680.1,699.6,656,699.6z',fill:'currentColor'})),'item-selected':t.MixDOM.def('svg',{viewBox:'0 0 10 10'},t.MixDOM.def('circle',{r:2,cx:5,cy:5,fill:'currentColor'})),'item-deselected':t.MixDOM.def('svg',{viewBox:'0 0 10 10'},t.MixDOM.def('circle',{r:1.6,cx:5,cy:5,strokeWidth:.8,stroke:'currentColor',fill:'none'}))};var __rest$3=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(o[i[s]]=e[i[s]])}return o};function UIAppIcon(e){const{iconName:i,iconSize:s,className:n}=e,l=__rest$3(e,['iconName','iconSize','className']);return t.MixDOM.def('span',Object.assign({},l,{className:o.classNames('ui-icon style-ui-icon flex-no-shrink',s&&'size-'+s,n)}),f[i])}var __rest$2=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(o[i[s]]=e[i[s]])}return o};const UIAppButton=(e,i)=>{const onClick=e=>{i.props.onPress&&i.props.onPress(e),i.props.onClick&&i.props.onClick(e)},onKeyDown=e=>{!i.props.onPress||' '!==e.key&&'Enter'!==e.key||i.props.disabled||(e.preventDefault(),i.props.onPress(e)),i.props.onKeyDown&&i.props.onKeyDown(e)};return e=>{const{look:i,size:s,invisible:n,iconName:l,iconClassName:r,className:a,disabled:d,onPress:c,onClick:u,onKeyDown:f,toggled:M}=e,h=__rest$2(e,['look','size','invisible','iconName','iconClassName','className','disabled','onPress','onClick','onKeyDown','toggled']);return t.MixDOM.def(p,Object.assign({},h,{tag:'button',disabled:!!n||d,onKeyDown,onClick,className:o.classNames('ui-app-button style-ui-button style-ui-focusable','focusable-look-'+(i||'edge'),void 0!==M?M?'button-on':'button-off':void 0,s&&'size-'+s,n&&'layout-no-pointer style-opacity-0',a)}),void 0!==l?t.MixDOM.def(UIAppIcon,{iconName:l,className:r,iconSize:'narrow'!==s&&'no'!==s?s:void 0}):null,t.MixDOM.Content)}};var __rest$1=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(o[i[s]]=e[i[s]])}return o};const UIAppInput=(e,i)=>{const s=new t.MixDOM.Ref,onInput=e=>{if(i.props.onInput&&i.props.onInput(e),i.props.onValue){const e=s.getElement();e&&i.props.onValue(e.value)}},onKeyDown=e=>{if(i.props.onKeyDown&&i.props.onKeyDown(e),'Escape'===e.key&&i.props.escToClearInput){const e=s.getElement();e&&e.value&&(e.value='',i.props.onValue&&i.props.onValue(''))}};return e=>{const{look:i,escToClearInput:n,className:l,onKeyDown:r,rootRef:a,onInput:d}=e,c=__rest$1(e,['look','escToClearInput','className','onKeyDown','rootRef','onInput']);return t.MixDOM.def(p,Object.assign({},c,{rootRef:s,onKeyDown,onInput,tag:'input',className:o.classNames('ui-app-input style-ui-input style-ui-focusable','focusable-look-'+(i||'edge'),l)}))}};function stringifyObject(e,t,o=1){if(!e||'object'!=typeof e)return'string'==typeof e?'"'+e+'"':''+e;if(Array.isArray(e))return'['+(o?e.map((e=>stringifyObject(e,!1,o-1))):e.toString())+']';let i='';if(!o)return''+e;o--;for(const s in e)i+=(t?'\n    ':' ')+s+': '+(o?stringifyObject(e[s],!1,o):'string'==typeof e[s]?'"'+e[s]+'"':''+e[s])+',';return i&&(i=i.slice(0,i.length-1)),'{'+i+(t&&i?'\n':' ')+'}'}const Prettify=e=>{const i=o.classNames('style-ui-code prettyprint',e.className);return window.PR?t.MixDOM.defHTML(window.PR.prettyPrintOne(e.code),e.tag||'code',{className:i,style:e.style}):t.MixDOM.def(e.tag||'code',{class:i,style:e.style},e.code)},PrettifyDelay=(e,i)=>{i.state={};const n=s.createTrigger((()=>{i.state.isReady&&i.setState({isReady:!1}),i.setTimer('reset',(()=>i.setState({isReady:!0})),i.props.delay||100)}),void 0,'shallow');return(e,i)=>{n([e.resetId,e.origCode]);const s=o.classNames('style-ui-code prettyprint',e.className),l=(e.prePrettifier?e.prePrettifier(e.origCode):e.origCode).trim();return i.isReady&&window.PR?t.MixDOM.defHTML(window.PR.prettyPrintOne(l),e.tag||'code',{className:s,style:e.style}):t.MixDOM.defHTML(l,e.tag||'code',{className:s,style:e.style})}};function escapeHTML(e){return window.PR?e.replace(/\&(?!(\w+;))/g,'&amp;').replace(/</g,'&lt;'):e}function beautify(e){return window.exports&&window.exports.js_beautify?window.exports.js_beautify(e):e}function getMiniScrollableProps(e){return{className:'layout-scrollable style-scrollable'+(e?' '+e:''),style:'max-width: 100%; max-height: 250px'}}const renderComponentLinkTip=()=>wrapTip(t.MixDOM.def('div',null,'Scroll and focus to the target.',t.MixDOM.def('br',null),' - If is matching and item is out of view, also selects it.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Ctrl'),'/',t.MixDOM.def('b',null,'Alt'),' to open details popup instead.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Shift'),' to log into console instead.')),renderUIAppTipSectionTip=()=>wrapTip(t.MixDOM.def('div',null,'Toggle the section visibility.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Ctrl'),'/',t.MixDOM.def('b',null,'Alt'),' to only show this section or all.')),renderConsoleTip=()=>wrapTip(t.MixDOM.def('div',null,'Click to log in console.')),UIAppTipSection=(e,i,s)=>{i.state={hiddenSections:[]},s.listenToData('settings.hiddenTipSections',(e=>{i.setState({hiddenSections:e})}),[i.state.hiddenSections]);const onSectionClick=e=>{let t=i.state.hiddenSections.slice();const o=i.props.type;if(e.ctrlKey||e.altKey||e.metaKey)t=t.length+1!==u.length||t.includes(o)?u.filter((e=>e!==o)):[];else{const e=t.indexOf(o);-1!==e?t.splice(e,1):t.push(o)}s.setInData('settings.hiddenTipSections',t)},onPressLink=e=>{i.props.onItemLink&&void 0!==i.props.idToScroll&&i.props.onItemLink(i.props.idToScroll,e.shiftKey?'log':e.ctrlKey||e.altKey||e.metaKey?'details':'focus')},onLog=()=>{consoleLog(i.props.debugInfo,'MixDOMDebug: Log info',Object.assign({},i.props.debugTarget))};return(e,i)=>{const s=!i.hiddenSections.includes(e.type),n=void 0===e.useOverflow?void 0!==e.extraTitle||void 0!==e.afterTitle:e.useOverflow;return t.MixDOM.def('aside',null,t.MixDOM.def('h3',{class:o.classNames('style-ui-heading',e.debugInfo&&'flex-row')},t.MixDOM.def(UIAppButton,{look:'transparent',className:o.classNames(n&&'style-text-ellipsis',!s&&'style-dimmed'),renderTip:renderUIAppTipSectionTip,onPress:onSectionClick},t.MixDOM.def(Title,{title:e.title,extraTitle:e.extraTitle,afterTitle:e.afterTitle,idToScroll:e.idToScroll,onPress:onPressLink})),e.debugInfo?t.MixDOM.def('span',{class:'flex-grow'}):null,e.debugInfo?t.MixDOM.def(UIAppButton,{look:'transparent',iconName:'console',onPress:onLog,renderTip:renderConsoleTip}):null),s?t.MixDOM.def(t.MixDOM.WithContent,null,t.MixDOM.def('div',Object.assign({},!1!==e.useDefaultLimits?getMiniScrollableProps('style-ui-mini-panel'):{className:'style-ui-mini-panel'}),t.MixDOM.Content)):null)}},UIAppTipHeading=(e,i,s)=>{const onPressLink=e=>{i.props.onItemLink&&void 0!==i.props.idToScroll&&i.props.onItemLink(i.props.idToScroll,e.shiftKey?'log':e.ctrlKey||e.altKey||e.metaKey?'details':'focus')},onPressClose=e=>{i.props.onItemLink&&i.props.onItemLink(null,'details-break')},onHistoryPrev=e=>{i.props.onHistory&&i.props.onHistory(i.props.iHistory?Math.max(i.props.iHistory-1,0):0)},onHistoryNext=e=>{var t;i.props.onHistory&&i.props.onHistory(null!=i.props.iHistory?Math.min(i.props.iHistory+1,(null===(t=i.props.history)||void 0===t?void 0:t.length)||0):0)};return e=>{const i=void 0===e.useOverflow?void 0!==e.extraTitle||void 0!==e.afterTitle:e.useOverflow;return t.MixDOM.def('aside',null,t.MixDOM.def('h2',{class:'style-ui-heading flex-row flex-align-items-baseline layout-gap-m'},e.history&&e.history[1]?e.history[2]?t.MixDOM.def(t.MixDOM.Fragment,null,t.MixDOM.def(UIAppButton,{iconName:'back',look:'transparent',size:'large',className:'flex-align-self-center history-button',onPress:onHistoryPrev,disabled:0===e.iHistory}),t.MixDOM.def(UIAppButton,{iconName:'forwards',look:'transparent',size:'large',className:'flex-align-self-center history-button',onPress:onHistoryNext,disabled:e.iHistory===e.history.length-1})):t.MixDOM.def(UIAppButton,{iconName:1===e.iHistory?'back':'forwards',look:'transparent',size:'large',className:'flex-align-self-center history-button',onPress:1===e.iHistory?onHistoryPrev:onHistoryNext}):null,t.MixDOM.def('span',{class:'flex-grow'}),t.MixDOM.def('span',{class:o.classNames('flex-row flex-align-items-baseline layout-gap-l',i&&'style-text-ellipsis')},t.MixDOM.def(Title,{title:e.title,extraTitle:e.extraTitle,afterTitle:e.afterTitle,idToScroll:e.idToScroll,onPress:onPressLink})),t.MixDOM.def('span',{class:'flex-grow'}),t.MixDOM.def(UIAppButton,{iconName:'close',look:'transparent',size:'large',className:'flex-align-self-center',onPress:onPressClose})),t.MixDOM.def(t.MixDOM.WithContent,null,t.MixDOM.def('div',Object.assign({},!1!==e.useDefaultLimits?getMiniScrollableProps('style-ui-mini-panel'):{className:'style-ui-mini-panel'}),t.MixDOM.Content)))}};function Title(e){return e.idToScroll?t.MixDOM.def(t.MixDOM.Fragment,null,void 0!==e.extraTitle?t.MixDOM.def(t.MixDOM.Fragment,null,e.title,': '):null,t.MixDOM.def(UIAppButton,{look:'edge',size:'no',className:'style-text-ellipsis',onPress:e.onPress,renderTip:renderComponentLinkTip},void 0!==e.extraTitle?e.extraTitle:e.title),e.afterTitle):t.MixDOM.def(t.MixDOM.Fragment,null,e.title,e.extraTitle,e.afterTitle)}function readComponentOneLine(e,o,i){if('boundary'===e.type)return t.MixDOM.def(t.MixDOM.Fragment,null,t.MixDOM.def(ComponentLink,{name:e.def.tag.name||'Anonymous',onPress:o||void 0}),t.MixDOM.def(Prettify,{code:e.def.tag.toString(),className:'style-text-ellipsis'}));let s,n;e.def.getRemote?(s='Remote pass',n=e.def.getRemote().boundary):(s='Content pass',n=e.boundary&&e.boundary.sourceBoundary);const l=n&&n._outerDef.tag.name||'Anonymous';return t.MixDOM.def(t.MixDOM.Fragment,null,i?null:t.MixDOM.def('span',{_key:'pass',class:'style-color-dim'},o?t.MixDOM.def(ComponentLink,{name:s,onPress:o}):s),t.MixDOM.def('span',{_key:'from',class:'style-color-dim'},' from '),t.MixDOM.def('b',null,l))}function getGroundingNode(e){let t=e;for(;t=t.parent;)switch(t.type){case'pass':case'boundary':return t}return null}function ComponentLink(e){return e.onPress?t.MixDOM.def(UIAppButton,{look:'edge',size:'narrow',className:e.className,onPress:e.onPress,renderTip:renderComponentLinkTip},t.MixDOM.def('b',null,e.name)):t.MixDOM.def('b',null,e.name)}function RenderComponentPartList(e){var o;const i='contexts'===e.part,s=i?(null===(o=e.component.contextAPI)||void 0===o?void 0:o.getContexts())||{}:e.component[e.part]||{},n=Object.keys(s);return void 0===n[0]?null:t.MixDOM.def('ul',{class:'style-ui-list'},n.map((e=>t.MixDOM.def('li',{_key:e,class:'flex-row flex-align-items-baseline layout-gap-l'},t.MixDOM.def(RenderPropertyName,{bold:!0},e,': '),t.MixDOM.def(Prettify,{code:i?'Context':beautify(stringifyObject(s[e],!1,2)),tag:'pre',className:'style-text-ellipsis'})))))}function RenderPropertyName(e){return t.MixDOM.def('span',{class:o.classNames('style-color-dim layout-inline-block flex-no-shrink',e.italic&&'style-text-italic',e.bold&&'style-text-bold'),style:'min-width: 100px;'},t.MixDOM.Content)}function RenderComponentWiredChildren(e){if(!e.wired.size)return null;let o=-1;return t.MixDOM.def('ul',{class:'style-ui-list'},[...e.wired].map((i=>i.api&&i.api.components.size?[...i.api.components].map((i=>t.MixDOM.def('li',{_key:++o,class:'flex-row flex-align-items-baseline layout-gap-l'},t.MixDOM.def(RenderComponentChild,{treeNode:i.boundary.treeNode,onItemLink:e.onItemLink,index:o,childText:'Wired'})))):null)))}function RenderComponentRemoteChildren(e){const o=e.remote,i=e.remotePasses||o.getHost().findTreeNodes(['pass'],0,!1,(e=>e.def.getRemote&&e.def.getRemote()===o));return i[0]?t.MixDOM.def('ul',{class:'style-ui-list'},[...i].map(((o,i)=>t.MixDOM.def('li',{_key:o,class:'flex-row flex-align-items-baseline layout-gap-l'},t.MixDOM.def(RenderComponentChild,{treeNode:o,onItemLink:e.onItemLink,index:i,childText:'Pass'}))))):null}function RenderComponentChildren(e){const o=e.treeNode.boundary;return o&&o.innerBoundaries[0]?t.MixDOM.def('ul',{class:'style-ui-list'},o.innerBoundaries.map(((o,i)=>t.MixDOM.def('li',{_key:i,class:'flex-row flex-align-items-baseline layout-gap-l'},t.MixDOM.def(RenderComponentChild,{treeNode:o.treeNode,onItemLink:e.onItemLink,index:i}))))):null}const RenderComponentChild=(e,o)=>{const onPress=e=>o.props.onItemLink&&o.props.onItemLink(o.props.treeNode,e.shiftKey?'log':e.ctrlKey||e.altKey||e.metaKey?'details':'focus');return e=>t.MixDOM.def(t.MixDOM.Fragment,null,t.MixDOM.def(RenderPropertyName,{italic:!0},e.childText||'Child',' ',void 0===e.index?'':'#'+(e.index+1),': '),readComponentOneLine(e.treeNode,onPress))},RenderedByComponents=(e,o)=>{var i,n,l;o.setConstantProps({treeNode:!0});const r=o.props.treeNode,a=(null===(i=r.sourceBoundary)||void 0===i?void 0:i.treeNode)||null,d='pass'===r.type?r:null,c=d?d.def.getRemote?d.def.getRemote().boundary.treeNode:(null===(l=null===(n=d.def.contentPass)||void 0===n?void 0:n.sourceBoundary)||void 0===l?void 0:l.treeNode)||null:null;let p=[];const u=new Map,f=s.createTrigger((()=>{let e=getGroundingNode(r);for(;e&&e!==a&&(p.push(e),!e.def.getRemote||e.def.getRemote().boundary.treeNode!==a);)e=getGroundingNode(e);p.reverse();const t=new Set(u.keys());for(const e of[...[a,c].filter((e=>e)),...p])e&&(u.set(e,u.get(e)||(t=>{o.props.onItemLink&&o.props.onItemLink(e,t.shiftKey?'log':t.ctrlKey||t.altKey||t.metaKey?'details':'focus')})),t.delete(e));for(const e of t)u.delete(e)})),M={class:'flex-row flex-align-items-baseline layout-gap-l'};return e=>(f(e.iUpdate),a||p[0]?t.MixDOM.def(UIAppTipSection,{type:'rendered-by',title:'Rendered by component'},t.MixDOM.def('ul',{class:'style-ui-list'},c?t.MixDOM.def('li',Object.assign({},M),t.MixDOM.def(RenderPropertyName,{italic:!0},'Pass from: '),readComponentOneLine(c,u.get(c))):null,a?t.MixDOM.def('li',Object.assign({},M),t.MixDOM.def(RenderPropertyName,{italic:!0},'Source: '),readComponentOneLine(a,u.get(a))):null,p.map((e=>t.MixDOM.def('li',Object.assign({},M,{_key:e.boundary.bId}),t.MixDOM.def(RenderPropertyName,{italic:!0},'Through: '),readComponentOneLine(e,u.get(e))))))):null)},UITreeNodeType=(e,i)=>{const renderConceptTip=()=>wrapTip(t.MixDOM.def('div',null,'Filter by view by treeNode type: ',t.MixDOM.def('b',null,i.props.item.treeNode.type||'empty'),'.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Ctrl'),'/',t.MixDOM.def('b',null,'Alt'),' to only filter this type.'));let s=null;const onRowClick=e=>{if('click'!==e.type||!s||e.clientX===s[0]&&e.clientY===s[1]){const t=i.props.rowMode||'tip';'tip'===t?i.props.onToggleTip&&i.props.onToggleTip(e):(i.props.onSelectItem&&i.props.onSelectItem(e),'select-tip'===t&&i.props.onTipPresence&&i.props.onTipPresence(i.props.item.treeNode,'hoverable',!1))}s=null},onRowMouseDown=e=>{s=[e.clientX,e.clientY]},onRowMouseEnter=e=>{'select-tip'===i.props.rowMode&&i.props.onTipPresence&&i.props.onTipPresence(i.props.item.treeNode,'hoverable',!0)},onRowMouseLeave=e=>{'select-tip'===i.props.rowMode&&i.props.onTipPresence&&i.props.onTipPresence(i.props.item.treeNode,'hoverable',!1)};return(e,i)=>{const s=e.item,n=s.treeNode;let l=n.type,r=null;switch(n.type){case'dom':r=t.MixDOM.def(Prettify,{code:escapeHTML(s.description),className:'style-text-ellipsis'});break;case'pass':case'boundary':r=readComponentOneLine(n);break;case'portal':r=t.MixDOM.def(t.MixDOM.Fragment,null,t.MixDOM.def('span',{class:'style-color-dim'},'Portal to '),t.MixDOM.def(Prettify,{code:escapeHTML(s.description),className:'style-text-ellipsis'}));break;case'root':r=t.MixDOM.def(t.MixDOM.Fragment,null,t.MixDOM.def('span',{class:'style-color-dim'},'Root container '),t.MixDOM.def(Prettify,{code:escapeHTML(s.description),className:'style-text-ellipsis'}));break;case'host':r=t.MixDOM.def(t.MixDOM.Fragment,null,t.MixDOM.def('span',{class:'style-color-dim'},'Nested host'));break;case'':r=t.MixDOM.def(t.MixDOM.Fragment,null,t.MixDOM.def('span',{class:'style-color-dim'},'Empty'))}return t.MixDOM.def('div',{class:o.classNames('flex-row flex-align-items-center flex-grow layout-overflow-hidden layout-gap-m layout-fit-height',e.className)},t.MixDOM.def('span',{class:o.classNames('description layout-fit-height flex-row flex-align-items-center flex-grow layout-overflow-hidden',e.displayClassName),onMouseEnter:onRowMouseEnter,onMouseLeave:onRowMouseLeave,onMouseDown:onRowMouseDown,onClick:onRowClick},t.MixDOM.def('div',{class:'layout-gap-m flex-row flex-align-items-baseline flex-grow layout-overflow-hidden'},r)),t.MixDOM.def(UIAppButton,{look:'filled',className:o.classNames('type style-ui-concept style-fill-app-type-'+l,e.conceptClassName),onPress:e.onSelectConcept,renderTip:renderConceptTip},l||'empty'))}};function UIAppTreeItem(e,i){i.state={};const onToggle=e=>{i.props.toggleCollapsed&&i.props.toggleCollapsed(i.props.item,e.shiftKey?'level':e.ctrlKey||e.metaKey?'siblings':e.altKey?'chain':'self')},onSelect=e=>{i.props.toggleSelected&&i.props.toggleSelected(i.props.item,e.shiftKey?'level':e.ctrlKey||e.metaKey?'siblings':e.altKey?'reset':'self')},onSelectConcept=e=>{i.props.toggleConcept&&i.props.toggleConcept(i.props.item.treeNode.type,e.ctrlKey||e.altKey||e.metaKey)},onToggleTip=e=>{i.props.onToggleTip&&i.props.onToggleTip(i.props.item.treeNode)},onViewInConsole=e=>{const t=i.props.item;switch(t.treeNode.type){case'boundary':consoleLog(i.props.debugInfo,'MixDOMDebug: Log component',t.treeNode.boundary.component);break;case'root':case'dom':case'boundary':consoleLog(i.props.debugInfo,'MixDOMDebug: Log DOM element',t.treeNode.domNode);break;case'host':consoleLog(i.props.debugInfo,'MixDOMDebug: Log nested host',t.treeNode.def.host);break;default:consoleLog(i.props.debugInfo,'MixDOMDebug: Log treeNode',t.treeNode)}};i.listenTo('didMount',(()=>{i.props.animate&&i.setTimer(null,(()=>i.setState({animFinished:!0})),25)}));const renderToggleTip=()=>wrapTip(t.MixDOM.def('div',null,'Click to collapse/uncollapse the item.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Shift'),' to toggle all items in the same level.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Ctrl'),' to toggle all siblings.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Alt'),' to toggle between expanding all or only this item and its parents and children.')),renderSelectTip=()=>wrapTip(t.MixDOM.def('div',null,'Click to select/deselect this item.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Shift'),' to toggle all items in the same level.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Ctrl'),' to toggle all siblings.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Alt'),' to reset selection to this item.')),renderConsoleTip=()=>wrapTip(t.MixDOM.def('div',null,'Click to log the item in console.')),renderTipTip=()=>wrapTip(t.MixDOM.def('div',null,'Click to open the details popup.'));return(e,i)=>{const s=6*e.item.level,n=`style-stroke-app-type-${e.item.treeNode.type||'empty'}`;return t.MixDOM.def('div',{role:'treeitem',class:o.classNames('ui-app-tree-item layout-fit-height layout-margin-m-x flex-row flex-align-items-center layout-gap-m style-hoverable',e.dimmed&&'style-disabled',e.animate&&(i.animFinished?'style-opacity-1':'style-opacity-0')),style:{marginLeft:s+'px'}},t.MixDOM.def('div',{class:o.classNames('level-indicator',e.selected?'style-dimmed':'style-disabled',e.selected&&n),style:`position: absolute; left: 0; height: 100%; width: ${s}px; background: linear-gradient(-160deg, currentColor, ${e.selected?'35%':'15%'}, transparent, 100%, transparent);`}),t.MixDOM.def(UIAppButton,{onPress:onSelect,iconName:e.selected?'item-selected':'item-deselected',className:'flex-align-self-center',iconClassName:o.classNames(!e.selected&&'style-dimmed',n),look:'transparent',renderTip:renderSelectTip}),t.MixDOM.def(UIAppButton,{onPress:onToggle,invisible:null===e.collapsed,disabled:null===e.collapsed||void 0,iconName:null===e.collapsed?'':e.collapsed?'collapsed':'expanded',look:'transparent',renderTip:renderToggleTip}),t.MixDOM.def(UITreeNodeType,{item:e.item,iUpdate:e.iUpdate,displayClassName:e.dimmed?'style-greyed':void 0,conceptClassName:e.dimmed?'style-greyed':void 0,rowMode:e.rowMode,onSelectItem:onSelect,onSelectConcept,onTipPresence:e.onTipPresence,onToggleTip}),t.MixDOM.def(UIAppButton,{onPress:onToggleTip,iconName:'info',look:'transparent',renderTip:renderTipTip}),t.MixDOM.def(UIAppButton,{onPress:onViewInConsole,iconName:'console',look:'transparent',renderTip:renderConsoleTip}))}}const UIAppTipDisplay=(e,i)=>{i.state={history:[i.props.item],iHistory:0,isAlive:!1};const bringAlive=()=>!i.hasTimer('alive')&&i.setTimer('alive',(()=>i.setState({isAlive:!0})),25),onKeyDown=e=>{'Escape'===e.key&&i.props.escToCloseTip&&i.props.onItemLink&&i.props.onItemLink(null,'details-break')};i.listenTo('didMount',(()=>{bringAlive(),document.addEventListener('keydown',onKeyDown)})),i.listenTo('willUnmount',(()=>document.removeEventListener('keydown',onKeyDown))),i.listenTo('preUpdate',((e,t)=>{if(e&&(e.item!==i.props.item||e.reselectRefreshId!==i.props.reselectRefreshId)){if(i.props.item===i.state.history[i.state.iHistory])return;if(i.props.item===i.state.history[i.state.iHistory+1])i.setState({iHistory:i.state.iHistory+1,isAlive:!1});else if(i.props.item){const e=i.state.history.slice(0,i.state.iHistory+1).concat([i.props.item]);i.setState({history:e,iHistory:e.length-1,isAlive:!1})}!i.state.isAlive&&bringAlive()}})),i.onHistory=e=>{const t=e>i.state.iHistory;i.setState({iHistory:Math.min(Math.max(0,e),i.state.history.length-1),isAlive:!1}),i.props.onHistoryItem&&i.props.onHistoryItem(i.state.history[i.state.iHistory]),bringAlive(),i.setTimer(null,(()=>{var e,o;const s=[...(null===(e=i.queryElement('div.style-ui-panel'))||void 0===e?void 0:e.querySelectorAll('button.history-button:not([disabled])'))||[]];null===(o=s[t?1:0]||s[0])||void 0===o||o.focus()}),5)};const getHeadingProps=()=>({idToScroll:i.state.history[i.state.iHistory].treeNode,onItemLink:i.props.onItemLink,history:i.state.history,iHistory:i.state.iHistory,onHistory:i.onHistory}),s={className:'layout-border-box',style:'max-width: 800px; max-height: 50vh;'},onTipEnter=()=>'select-tip'===i.props.rowMode&&i.state.isAlive&&i.props.onTipPresence&&i.props.onTipPresence(i.state.history[i.state.iHistory].treeNode,'popup',!0),onTipLeave=()=>'select-tip'===i.props.rowMode&&i.state.isAlive&&i.props.onTipPresence&&i.props.onTipPresence(i.state.history[i.state.iHistory].treeNode,'popup',!1);return(e,n)=>{var l,r;const a=i.state.history[i.state.iHistory],d=a.treeNode;let c=!0,p=null,u=null,f=null,M=t.MixDOM.readDOMString(d,!1,0,null);switch(d.type){case'dom':{const e=d.def.tag;let o='';e?o=a.description:M&&(M='"'+M+'"'),p=t.MixDOM.def(UIAppTipHeading,Object.assign({title:e?(d.domNode&&void 0!==d.domNode.ownerSVGElement?'SVG':'HTML')+' element':'Text node',extraTitle:t.MixDOM.def(Prettify,{code:o?escapeHTML(o):a.description,className:'layout-padding-l layout-inline-block'})},getHeadingProps()));break}case'boundary':{const o=d.def.tag,i=d.boundary.component,s='Remote'===i.constructor.MIX_DOM_CLASS?i.getHost().findTreeNodes(['pass'],0,!1,(e=>e.def.getRemote&&e.def.getRemote()===i)):null;p=t.MixDOM.def(UIAppTipHeading,Object.assign({_key:'heading',title:'Remote'===o.MIX_DOM_CLASS?'Remote component':i.contextAPI?t.MixDOM.def(t.MixDOM.Fragment,null,'Component ',t.MixDOM.def('span',{class:'style-text-small'},'(with ContextAPI)')):'Component',extraTitle:t.MixDOM.def('b',{class:'style-color-emphasis layout-padding-l-x layout-padding-m-y layout-inline-block'},a.name||'Anonymous')},getHeadingProps())),u=t.MixDOM.def(t.MixDOM.Fragment,null,t.MixDOM.def(UIAppTipSection,{_key:'code',type:'code',title:'JS code',useDefaultLimits:!1},t.MixDOM.def(PrettifyDelay,Object.assign({origCode:o.toString(),prePrettifier:beautify,tag:'pre'},getMiniScrollableProps()))),i.props&&void 0!==Object.keys(i.props)[0]?t.MixDOM.def(UIAppTipSection,{_key:'props',type:'props',title:'Props',debugInfo:e.debugInfo,debugTarget:i.props},t.MixDOM.def(RenderComponentPartList,{component:i,part:'props'})):null,i.state&&void 0!==Object.keys(i.state)[0]?t.MixDOM.def(UIAppTipSection,{_key:'state',type:'state',title:'State',debugInfo:e.debugInfo,debugTarget:i.state},t.MixDOM.def(RenderComponentPartList,{component:i,part:'state'})):null,i.contextAPI&&void 0!==Object.keys(i.contextAPI.getContexts())[0]?t.MixDOM.def(UIAppTipSection,{_key:'contexts',type:'contexts',title:'Contexts',debugInfo:e.debugInfo,debugTarget:null===(l=i.contextAPI)||void 0===l?void 0:l.getContexts()},t.MixDOM.def(RenderComponentPartList,{component:i,part:'contexts'})):null),f=t.MixDOM.def(t.MixDOM.Fragment,null,i.wired&&i.wired.size?t.MixDOM.def(UIAppTipSection,{_key:'wired',type:'wired',title:'Wired components'},t.MixDOM.def(RenderComponentWiredChildren,{wired:i.wired,onItemLink:e.onItemLink})):null,s&&s[0]?t.MixDOM.def(UIAppTipSection,{_key:'remote',type:'remote',title:'Remote passes'},t.MixDOM.def(RenderComponentRemoteChildren,{remote:i,remotePasses:s,onItemLink:e.onItemLink})):null,d.boundary.innerBoundaries[0]?t.MixDOM.def(UIAppTipSection,{_key:'children',type:'children',title:'Inner components'},t.MixDOM.def(RenderComponentChildren,{treeNode:d,onItemLink:e.onItemLink})):null);break}case'root':c=!1,p=t.MixDOM.def(UIAppTipHeading,Object.assign({title:'Root container',extraTitle:a.description?t.MixDOM.def(Prettify,{code:escapeHTML(a.description),className:'layout-padding-l layout-border-box'}):null},getHeadingProps()),t.MixDOM.def('ul',{class:'style-ui-list'},t.MixDOM.def('li',null,'Contains the debugged host.')));break;case'host':{p=t.MixDOM.def(UIAppTipHeading,Object.assign({title:'Nested host'},getHeadingProps()),t.MixDOM.def('ul',{class:'style-ui-list'},t.MixDOM.def('li',null,'Contains another host instance.')));const e=d.def.host;M=e&&e.groundedTree.children[0]?t.MixDOM.readDOMString(e.groundedTree.children[0],!1,0,null):'';break}case'pass':p=t.MixDOM.def(UIAppTipHeading,Object.assign({title:t.MixDOM.def('span',{class:'layout-padding-l-x layout-padding-m-y layout-inline-block'},d.def.getRemote?'Remote pass':'Content pass'),afterTitle:readComponentOneLine(d,null,!0)},getHeadingProps())),f=t.MixDOM.def(t.MixDOM.Fragment,null,(null===(r=d.boundary)||void 0===r?void 0:r.innerBoundaries[0])?t.MixDOM.def(UIAppTipSection,{_key:'children',type:'children',title:'Inner components'},t.MixDOM.def(RenderComponentChildren,{treeNode:d,onItemLink:e.onItemLink})):null);break;case'portal':p=t.MixDOM.def(UIAppTipHeading,Object.assign({title:'Portal container',afterTitle:t.MixDOM.def(Prettify,{code:escapeHTML(a.description),className:'layout-padding-l layout-border-box'})},getHeadingProps()));break;case'':p=t.MixDOM.def(UIAppTipHeading,Object.assign({title:t.MixDOM.def('span',{class:'layout-padding-l layout-border-box'},'Empty')},getHeadingProps()),t.MixDOM.def('ul',{class:'style-ui-list'},t.MixDOM.def('li',null,'Empty treeNodes should not typically end up in the grounded tree.')))}return t.MixDOM.def('div',{class:o.classNames('style-ui-panel flex-col',s.className,n.isAlive?'layout-auto-pointer':'layout-no-pointer'),style:s.style,onMouseEnter:onTipEnter,onMouseLeave:onTipLeave},p,t.MixDOM.def('div',{class:'layout-scrollable style-scrollable flex-col layout-gap-m layout-padding-m'},u,c?t.MixDOM.def(RenderedByComponents,{treeNode:d,iUpdate:e.iUpdate,onItemLink:e.onItemLink}):null,f,'root'!==d.type&&M?t.MixDOM.def(UIAppTipSection,{type:'renders',title:'Renders in DOM',useDefaultLimits:!1},t.MixDOM.def(PrettifyDelay,Object.assign({origCode:M.replace(/\t/g,'    '),prePrettifier:escapeHTML,tag:'pre'},getMiniScrollableProps()))):null))}},M=t.mixFuncsWith(MixPositionedPopup,((e,o)=>{o.state=Object.assign(Object.assign({},o.state),{item:o.props.item,elementMargin:15,containerMargin:10,popupFadeIn:100,popupFadeOut:270});const onHistoryItem=e=>{o.setState({popupSourceElement:o.props.getSourceElement?o.props.getSourceElement(e.id):null})};return o.popupContainer=c,o.renderPopup=()=>o.state.item?t.MixDOM.def(UIAppTipDisplay,{item:o.state.item,iUpdate:o.props.iUpdate,onItemLink:o.props.onItemLink,debugInfo:o.props.debugInfo,reselectRefreshId:o.props.reselectRefreshId,onHistoryItem,onTipPresence:o.props.onTipPresence,escToCloseTip:!0,rowMode:o.props.rowMode}):null,o.listenTo('preUpdate',((e,t,i)=>{const s=o.props;if(e&&(e.item!==s.item||e.iUpdate!==s.iUpdate||e.onItemLink!==s.onItemLink||e.debugInfo!==s.debugInfo||e.reselectRefreshId!==s.reselectRefreshId||e.onTipPresence!==s.onTipPresence||e.rowMode!==s.rowMode||t&&t.popupSourceElement!==o.state.popupSourceElement)&&(o.refreshPopupId={}),e&&e.item!==s.item)if(s.item){const e=s.getSourceElement?s.getSourceElement():null;o.setState({item:s.item,popupSourceElement:e}),o.showPopup()}else o.state.popupOpened&&'out'!==o.state.popupOpened&&o.hidePopup();t&&t.popupOpened&&!o.state.popupOpened&&o.setState({item:null,popupSourceElement:null})})),()=>t.MixDOM.def(o.WithTooltip,null)}),null),h={boundary:'[boundary]',dom:'[dom]',root:'[root] root container',host:'[host] nested host',pass:'[pass] content pass from','pass-remote':'[pass] remote pass from',portal:'[portal] portal to','':'[empty]'};function matchesFilter(e,t){return t&&t.some((t=>t.every((t=>{var o;return e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||(h[(null===(o=e.treeNode.def)||void 0===o?void 0:o.getRemote)?'pass-remote':e.treeNode.type]||'').includes(t)}))))}function isItemWithinCollapsed(e,t){let o=e.parent;for(;o;){if(t.includes(o.id))return!0;o=o.parent}return!1}function findItemsIdsBy(e,t,o,i){var s,n;const l=o.indexOf(e.id),r=-1===l;switch(t){case'level':{const t=e.level,s=i.filter((e=>e.level===t)).map((e=>e.id));return r?[...o,...s.filter((e=>!o.includes(e)))]:o.filter((e=>!s.includes(e)))}case'siblings':{const t=(null===(n=null===(s=e.parent)||void 0===s?void 0:s.children)||void 0===n?void 0:n.map((e=>e.id)))||[e.id];return r?[...o,...t.filter((e=>!o.includes(e)))]:o.filter((e=>!t.includes(e)))}case'chain':case'parents':{const s=[e.id];let n=e.parent;for(;n;)s.push(n.id),n=n.parent;if('chain'===t){let t,o=e.children||[],i=0;for(;t=o[i++];)s.push(t.id),t.children&&(o=t.children.concat(o.slice(i)),i=0)}const l=i.filter((e=>!s.includes(e.id))).map((e=>e.id));return o.length!==l.length||o.some((e=>s.includes(e)))?l:[]}case'reset':return r||1!==o.length?[e.id]:[];default:return o=o.slice(),r?o.push(e.id):o.splice(l,1),o}}const m=function DebugHost(i,n,l){var r;n.iMatchCycle=-1,n.state={host:null,debugSettings:null,debugLive:null,selected:[],collapsed:[],tipItem:null,filterSplits:null,showCollapsed:!1,showParents:!1,showChildren:!1,ignoreSelection:!1,ignoreFilter:!1,rowMode:'select-tip',hideUnmatched:!1,reselectRefreshId:{}},l.listenToData('debug.host','debug.settings','debug.live','settings',((e,t,o,i)=>{const s=i||Object.assign({filter:''},n.state),l=s.filter.replace(/\,/g,' ').trim()?s.filter.split(',').map((e=>e.trim().split(' ').map((e=>e.trim().toLowerCase())).filter((e=>e)))).filter((e=>void 0!==e[0])):null;n.setState({host:e,debugSettings:t,debugLive:o,filterSplits:l&&void 0!==l[0]&&l||null,showCollapsed:s.showCollapsed,showParents:s.showParents,showChildren:s.showChildren,hideUnmatched:s.hideUnmatched,ignoreFilter:s.ignoreFilter,ignoreSelection:s.ignoreSelection,rowMode:s.rowMode})}),[n.state.host,n.state.debugSettings,n.state.debugLive]);const a=new t.MixDOM.Ref,d=s.createMemo(((e,t,o)=>({debugInfo:e,animate:!0,iUpdate:t,rowMode:o,toggleCollapsed,toggleSelected,toggleConcept,onToggleTip,onTipPresence})));s.createMemo(((...e)=>({})));const c=s.createMemo(((e,i)=>{if(!e)return[];const s=flattenTreeWith([e.groundedTree],((e,i,s)=>{let n='',l='';switch(e.type){case'boundary':l=e.def.tag?e.def.tag.name:'',n=e.def.tag?e.def.tag.toString():'';break;case'dom':{l=e.def.tag||'';const i=e.def.tag,s='string'==typeof e.def.domContent?'"'+e.def.domContent+'"':void 0,r=!!(i&&e.children[0]&&t.hasContentInDefs(e.def.childDefs));n=o.readDOMString(i,e.def.props,r?null:s),r&&(n=n.replace('/>','>'));break}case'root':{const t=e.domNode;if(l=t?t.tagName.toLowerCase():'',t){const e=l;n=o.readDOMString(e,null,!1,t).replace('/>','>')}break}case'host':l='Host';break;case'portal':{l='Portal';const t=(e.def.props||{}).container;n=o.readDOMString(t?t.tagName.toLowerCase():'body',e.def.props,!1,t||function getDocBodyBy(e){var t;let o=e;for(;o;){if(o.domNode)return(null===(t=o.domNode.ownerDocument)||void 0===t?void 0:t.body)||null;o=o.parent}return null}(e)),n=n.replace('/>','>');break}}const r={id:e,treeNode:e,parent:i,level:s,name:l,description:n};return i&&(i.children?i.children.push(r):i.children=[r]),r})),l=s.map((e=>e.id)),r=n.state.collapsed.filter((e=>l.includes(e)));r.length!==n.state.collapsed.length&&setCollapsed(r);const a=n.state.selected.filter((e=>l.includes(e)));return a.length!==n.state.selected.length&&setSelected(a),s}));let p=c(n.state.host,(null===(r=n.state.debugLive)||void 0===r?void 0:r.iUpdate)||0);const areNoneCollapsed=(e=n.state.collapsed)=>void 0===e[0],setCollapsed=e=>{const t=areNoneCollapsed();areNoneCollapsed(e)!==t&&l.setInData('settings.noneCollapsed',!t),n.setInState('collapsed',e)},toggleCollapsed=(e,t)=>{setCollapsed(findItemsIdsBy(e,t||'self',n.state.collapsed,p.filter((e=>e.children&&void 0!==e.children[0]))))},toggleConcept=(e,t)=>{let o=l.getInData('settings.filter','');const i='['+e+']';let s=o?o.split(','):[];const n=s.map((e=>e.trim().toLowerCase())),r=n.findIndex((e=>e===i));if(t){const e=['boundary','dom','host','pass','portal','root',''].map((e=>'['+e+']')),t=n.filter((t=>!e.includes(t)||t===i));t.length===s.length?-1!==r?s.splice(r,1):s.push(void 0===s[0]?i:' '+i):(s=t,-1===r&&s.push(void 0===s[0]?i:' '+i))}else-1!==r?s.splice(r,1):s.push(void 0===s[0]?i:' '+i);l.setInData('settings.filter',s.join(','))};l.listenTo('settings.toggleCollapseAll',(()=>{setCollapsed(areNoneCollapsed()?p.filter((e=>e.children&&void 0!==e.children[0])).map((e=>e.id)):[])}));let u=!0;const whetherShouldSelect=(e=n.state.selected,t=!1)=>g?g.some((t=>!e.includes(t.id)))||t&&(x&&x.some((t=>!e.includes(t.id)))||y&&y.some((t=>!e.includes(t.id))))||!1:void 0===e[0],setSelected=e=>{const t=n.state.selected[n.iMatchCycle],o=void 0!==t?e.indexOf(t):-1;-1!==o?n.iMatchCycle+=o-n.iMatchCycle:n.iMatchCycle>=0&&n.iMatchCycle--;const i=n.state.filterSplits,s=i&&g?g.some((t=>!e.includes(t.id)&&matchesFilter(t,i))):void 0===e[0];s!==u&&l.setInData('settings.shouldSelect',u=s),n.setInState('selected',e)},toggleSelected=(e,t)=>{setSelected(findItemsIdsBy(e,t||'self',n.state.selected,p))};l.listenTo('settings.toggleSelectMatched',(e=>{let t=[];if(!g||!n.state.hideUnmatched&&e)void 0===n.state.selected[0]&&(t=p.map((e=>e.id)));else{const o=g.map((e=>e.id)).concat(e?(x&&x.map((e=>e.id))||[]).concat(y&&y.map((e=>e.id))||[]):[]);t=(e?void 0===n.state.selected.filter((e=>o.includes(e)))[0]:whetherShouldSelect())?o:n.state.selected.filter((e=>!o.includes(e)))}setSelected(t)})),l.listenTo('settings.scrollToMatched',((e,t)=>{const o=g?t||n.state.showCollapsed?g:g.filter((e=>!isItemWithinCollapsed(e,n.state.collapsed))):[];if(!o[0])return;n.iMatchCycle=e?n.iMatchCycle-1<0?o.length-1:n.iMatchCycle-1:n.iMatchCycle+1>=o.length?0:n.iMatchCycle+1;const i=o[n.iMatchCycle];scrollToItem(i)}));const onItemLink=(t,o)=>{const i=t?p.find((e=>e.id===t)):null;switch(o||'focus'){case'focus':if(!i)break;filterer(i)?scrollToItem(i):g&&n.state.hideUnmatched?n.state.ignoreSelection||n.state.selected.includes(i.treeNode)||(n.listenTo('didUpdate',(()=>{i&&scrollToItem(i)}),null,e.SignalListenerFlags.OneShot),setSelected([...n.state.selected,i.treeNode])):scrollToItem(i);break;case'details':setTipBy(i?i.id:null);break;case'details-break':{const e=i||n.state.tipItem,t=!!(1&O);setTipBy(i?i.id:null),setSkipHover(!t),e&&refocusToGrid(e.treeNode);break}case'log':i&&consoleLog(n.state.debugSettings,'MixDOMDebug: Log item',i.treeNode)}},scrollToItem=async t=>{const o=a.getComponent(),i=n.state.collapsed;if(!o)return;let s=null,l=t.parent;for(;l;){const e=(s||i).indexOf(l.id);-1!==e&&(s||(s=i.slice()),s.splice(e,1)),l=l.parent}if(s){let t=new Promise((t=>(o||n).listenTo('didUpdate',(()=>(o||n).setTimer(null,t,20)),null,e.SignalListenerFlags.OneShot)));n.setInState('collapsed',s),await t}const r=p.filter(filterer).indexOf(t);-1!==r&&o.scrollToIndex(r,'instant',!0,(e=>{var t;return e&&(null===(t=e.querySelector('button'))||void 0===t?void 0:t.focus())}))},f=s.createMemo(((e,t,o)=>o||t?e.filter((e=>t&&t.includes(e.id)||o&&matchesFilter(e,o))):null)),h=s.createMemo((e=>{const t=[];for(const o of e){let i=o.parent;for(;i;)t.includes(i)||e.includes(i)||t.push(i),i=i.parent}return t})),m=s.createMemo(((e,t)=>{const o=[];for(const i of e){if(t.includes(i))continue;let e=i.parent;for(;e;){if(t.includes(e)){o.push(i);break}e=e.parent}}return o})),filterer=e=>!(!(n.state.hideUnmatched&&n.state.showCollapsed&&(!n.state.ignoreFilter&&n.state.filterSplits||!n.state.ignoreSelection&&void 0!==n.state.selected[0]))&&isItemWithinCollapsed(e,n.state.collapsed))&&(!g||!n.state.hideUnmatched||(!!g.includes(e)||(!(!x||!x.includes(e))||!(!y||!y.includes(e)))));let g=f(p,n.state.ignoreSelection||void 0===n.state.selected[0]?null:n.state.selected,n.state.ignoreFilter?null:n.state.filterSplits),x=g&&n.state.showParents?h(g):null,y=g&&n.state.showChildren?m(p,g):null,O=0,D=!1;const setSkipHover=(e=!0)=>(!e||(D=!0))&&n.setTimer('skip-hover',(()=>{}),300),refocusToGrid=(e,t)=>{var o,i;const s=a.getComponent();if(!s||!t&&(null===(o=s.getRootElement())||void 0===o?void 0:o.contains(document.activeElement)))return;let n=e&&getRowElement(e);n||(n=s.getFirstVisibleItem()),n&&(null===(i=n.querySelector('button'))||void 0===i||i.focus())},setTipBy=(e,t=!0)=>{e||(O&=-3),n.clearTimers('tip-hover','skip-hover'),n.setState({tipItem:e&&p.find((t=>t.id===e))||null,reselectRefreshId:t?{}:n.state.reselectRefreshId})};l.listenTo('settings.setTipDisplay',setTipBy);const onToggleTip=e=>{var t;setTipBy((null===(t=n.state.tipItem)||void 0===t?void 0:t.treeNode)===e?null:e)},onTipPresence=(e,t,o)=>{if('select-tip'!==n.state.rowMode)return;const i='popup'===t?2:1;if(O=o?O|i:O&~i,o)'hoverable'===t?(!D&&!n.hasTimer('skip-hover')&&!(2&O)&&n.setTimer('tip-hover',(()=>setTipBy(e)),600),D=!1):setTipBy(e,!1);else{const e=n.state.tipItem;!O&&e?(setTipBy(null),'popup'===t&&(setSkipHover(),refocusToGrid(e.treeNode))):n.clearTimers('tip-hover')}},getTipSourceElement=e=>e||n.state.tipItem?getRowElement(e||n.state.tipItem.treeNode):null,getRowElement=e=>{var t;return(null===(t=a.getComponent())||void 0===t?void 0:t.getElementAt(p.filter(filterer).findIndex((t=>t.id===e))))||null},b=t.MixDOM.wired((()=>{var e;return d(n.state.debugSettings,null===(e=n.state.debugLive)||void 0===e?void 0:e.iUpdate,n.state.rowMode)}),((e,t,o)=>{const i=e.item,s=i.children&&void 0!==i.children[0],l=n.state.selected.includes(i.id);return Object.assign(Object.assign(Object.assign({},e),t),{collapsed:s?n.state.collapsed.includes(i.id):null,selected:l,dimmed:g?!g.includes(i):!n.state.ignoreSelection&&void 0!==n.state.selected[0]&&!l})}),UIAppTreeItem,'WiredTreeItem');return n.addWired(b),n.listenTo('beforeUpdate',(()=>{var e;let t=g;p=c(n.state.host,(null===(e=n.state.debugLive)||void 0===e?void 0:e.iUpdate)||0),g=f(p,n.state.ignoreSelection||void 0===n.state.selected[0]?null:n.state.selected,n.state.ignoreFilter?null:n.state.filterSplits),x=g&&n.state.showParents?h(g):null,y=g&&n.state.showChildren?m(p,g):null,t!==g&&u!==whetherShouldSelect()&&l.setInData('settings.shouldSelect',u=!u)})),(e,i)=>{var s;return t.MixDOM.def('div',{class:o.classNames('ui-app-host-tree layout-fit-size',e.className),style:e.style},t.MixDOM.def('div',{class:'flex-row flex-align-items-center layout-fit-size'},t.MixDOM.def(UIList,{items:p,Item:b,keyProp:'id',filter:filterer,rowHeight:30,refreshId:{},listClassName:e.listClassName,refVirtualList:a})),t.MixDOM.def(M,{item:i.tipItem,iUpdate:null===(s=i.debugLive)||void 0===s?void 0:s.iUpdate,onItemLink,getSourceElement:getTipSourceElement,debugInfo:i.debugSettings,reselectRefreshId:i.reselectRefreshId,onTipPresence,rowMode:i.rowMode}))}};var __rest=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(o[i[s]]=e[i[s]])}return o};const g=function DebugHost(e,i,s){i.state={theme:'dark',filter:'',showCollapsed:!1,showParents:!1,showChildren:!1,hideUnmatched:!1,ignoreFilter:!1,ignoreSelection:!1,rowMode:'select-tip',shouldSelect:!0,noneCollapsed:!0},s.listenToData('settings',(e=>{const t=e||i.state,o=__rest(t,['hiddenTipSections']);i.setState(Object.assign({},o))}));const setFilter=e=>{s.setInData('settings.filter',e)},toggleFilterAuto=()=>s.setInData('settings.showCollapsed',!i.state.showCollapsed),toggleFilterParents=()=>s.setInData('settings.showParents',!i.state.showParents),toggleFilterChildren=()=>s.setInData('settings.showChildren',!i.state.showChildren),toggleHideUnmatched=()=>s.setInData('settings.hideUnmatched',!i.state.hideUnmatched),toggleIgnoreFilter=()=>s.setInData('settings.ignoreFilter',!i.state.ignoreFilter),toggleIgnoreSelection=()=>s.setInData('settings.ignoreSelection',!i.state.ignoreSelection),toggleRowMode=e=>s.setInData('settings.rowMode','tip'===i.state.rowMode?'select-tip':'select-tip'===i.state.rowMode?'select':'tip'),toggleCollapseAll=()=>s.sendSignal('settings.toggleCollapseAll'),toggleSelectMatched=e=>s.sendSignal('settings.toggleSelectMatched',e.shiftKey),toggleTheme=()=>s.sendSignal('settings.toggleTheme'),scrollToMatched=e=>s.sendSignal('settings.scrollToMatched',e.ctrlKey||e.altKey||e.metaKey,e.shiftKey),logHost=()=>consoleLog(s.getInData('debug.settings'),'MixDOMDebug: Log host',s.getInData('debug.host')),renderCollapseTip=()=>wrapTip(t.MixDOM.def('div',null,'Click to collapse/uncollapse all.')),renderSelectTip=()=>wrapTip(t.MixDOM.def('div',null,'Click to select/deselect matched (or all).',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Shift'),' to always select/deselect all (= including dimly visible).')),renderScrollToMatchedTip=()=>wrapTip(t.MixDOM.def('div',null,'Scroll and focus to the next match.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Ctrl'),'/',t.MixDOM.def('b',null,'Alt'),' to go backwards.',t.MixDOM.def('br',null),' - Click with ',t.MixDOM.def('b',null,'Shift'),' to include matched but collapsed by parents (= uncollapses parents).')),renderHideUnmatchedTip=()=>wrapTip(t.MixDOM.def('div',null,'Whether to always show all items, or only matched by filter and/or selection.')),renderIgnoreFilterTip=()=>wrapTip(t.MixDOM.def('div',null,'Disable the effect of the filter temporarily.')),renderIgnoreSelectionTip=()=>wrapTip(t.MixDOM.def('div',null,'Disable the effect of the selection temporarily.')),renderRowModeTip=()=>wrapTip(t.MixDOM.def('div',null,'Change the row mode:',t.MixDOM.def('br',null),' 1. Clicking toggles selection and hovering toggles tip display.',t.MixDOM.def('br',null),' 2. Clicking the row only toggles selection.',t.MixDOM.def('br',null),' 3. Clicking the row toggles the tip display.')),renderFilterAutoTip=()=>wrapTip(t.MixDOM.def('div',null,'Whether auto-expands collapsed parents when filtering.')),renderFilterParentsTip=()=>wrapTip(t.MixDOM.def('div',null,'Whether shows parents with matching children.')),renderFilterChildrenTip=()=>wrapTip(t.MixDOM.def('div',null,'Whether shows children of matching parents.')),renderThemesTip=()=>wrapTip(t.MixDOM.def('div',null,'Toggle color theme.')),renderInputTip=()=>wrapTip(t.MixDOM.def('div',null,'Filter items by keywords.',t.MixDOM.def('br',null),' - Separate by comma (',t.MixDOM.def('b',null,','),') and join by space (',t.MixDOM.def('b',null,' '),').',t.MixDOM.def('br',null),' - Use brackets for tags: [root], [boundary], [dom], [portal], [pass], [host]')),renderConsoleTip=()=>wrapTip(t.MixDOM.def('div',null,'Click to log the debugged ',t.MixDOM.def('b',null,'Host'),' instance in console.'));return(e,s)=>{const l=!!i.state.filter&&i.state.filter.replace(/\,/g,'').trim();return t.MixDOM.def('div',{class:'ui-app-top-bar layout-fit-width flex-row flex-align-items-center layout-gap-m layout-padding-m layout-border-box'},t.MixDOM.def(UIAppButton,{_key:'select',look:'transparent',escToCloseTip:!0,iconName:s.shouldSelect?'select-all':'select-none',onPress:toggleSelectMatched,renderTip:renderSelectTip}),t.MixDOM.def(UIAppButton,{_key:'collapse',look:'transparent',escToCloseTip:!0,iconName:s.noneCollapsed?'expanded':'collapsed',onPress:toggleCollapseAll,renderTip:renderCollapseTip}),t.MixDOM.def(UIAppButton,{_key:'scrollTo',look:'transparent',escToCloseTip:!0,iconName:'scroll-to',disabled:s.shouldSelect&&!l||void 0,onPress:scrollToMatched,renderTip:renderScrollToMatchedTip}),t.MixDOM.def(UIAppInput,{_key:'filter',look:'edge',type:'text',disabled:s.ignoreFilter,escToCloseTip:!0,escToClearInput:!0,value:s.filter,onValue:setFilter,className:o.classNames('flex-grow layout-fit-height style-text-bold',l&&'active'),placeholder:'filter items',renderTip:renderInputTip}),s.hideUnmatched?t.MixDOM.def(t.MixDOM.Fragment,null,t.MixDOM.def(UIAppButton,{_key:'showCollapsed',look:s.hideUnmatched?'transparent':'filled',escToCloseTip:!0,iconName:s.hideUnmatched?'filter-expanded':'filter-collapsed',disabled:!s.hideUnmatched||void 0,toggled:s.hideUnmatched&&s.showCollapsed,onPress:toggleFilterAuto,renderTip:renderFilterAutoTip}),t.MixDOM.def(UIAppButton,{_key:'showParents',look:s.hideUnmatched?'transparent':'filled',escToCloseTip:!0,iconName:'filter-parents',disabled:!s.hideUnmatched||void 0,toggled:s.hideUnmatched&&s.showParents,onPress:toggleFilterParents,renderTip:renderFilterParentsTip}),t.MixDOM.def(UIAppButton,{_key:'showChildren',look:s.hideUnmatched?'transparent':'filled',escToCloseTip:!0,iconName:'filter-children',disabled:!s.hideUnmatched||void 0,toggled:s.hideUnmatched&&s.showChildren,onPress:toggleFilterChildren,renderTip:renderFilterChildrenTip})):null,t.MixDOM.def(UIAppButton,{_key:'eye',look:'edge',escToCloseTip:!0,iconName:s.hideUnmatched?'show-matched':'show-all',onPress:toggleHideUnmatched,renderTip:renderHideUnmatchedTip}),t.MixDOM.def(UIAppButton,{_key:'ignoreFilter',look:'transparent',escToCloseTip:!0,iconName:'no-filter',toggled:s.ignoreFilter,onPress:toggleIgnoreFilter,renderTip:renderIgnoreFilterTip}),t.MixDOM.def(UIAppButton,{_key:'ignoreSelection',look:'transparent',escToCloseTip:!0,iconName:'no-selection',toggled:s.ignoreSelection,onPress:toggleIgnoreSelection,renderTip:renderIgnoreSelectionTip}),t.MixDOM.def(UIAppButton,{_key:'ignoreTip',look:'transparent',escToCloseTip:!0,iconName:'select'===s.rowMode?'click-select':'select-tip'===s.rowMode?'click-select-tip':'click-tip',onPress:toggleRowMode,renderTip:renderRowModeTip}),t.MixDOM.def('span',{_key:'mix-dom-debug'},t.MixDOM.def('b',null,'mix-dom-debug'),' ',t.MixDOM.def('span',{class:'style-text-small'},'(v',n,')')),t.MixDOM.def(UIAppButton,{_key:'theme',look:'transparent',escToCloseTip:!0,iconName:'theme',onPress:toggleTheme,renderTip:renderThemesTip}),t.MixDOM.def(UIAppButton,{_key:'console',look:'transparent',escToCloseTip:!0,iconName:'console',onPress:logHost,renderTip:renderConsoleTip}))}},x=function UIApp(e,t,s){return t.state={theme:'dark'},s.listenToData('settings.theme',(e=>t.setInState('theme',e)),[t.state.theme]),(e,t)=>i.MixDOM.def('div',{class:o.classNames('ui-app style-back-main style-front-main layout-fit-size flex-col','color-theme-'+t.theme,'layout-theme-default','transition-theme-default')},i.MixDOM.def(g,{refreshId:e.refreshId}),i.MixDOM.def('div',{class:'flex-row layout-fit-width flex-grow layout-overflow-hidden'},i.MixDOM.def(m,{refreshId:e.refreshId,listClassName:'layout-padding-m layout-border-box'})),i.MixDOM.def(c.WithContent,null,i.MixDOM.def('div',{class:'popup-tip-container layout-abs-fill layout-z-high layout-overflow-hidden layout-no-pointer'},c.Content)))};class MixDOMDebug{constructor(o){this.onUpdate=(e,t)=>{e||null===this.updateTimer&&(this.updateTimer=window.setTimeout((()=>{if(this.updateTimer=null,!this.ownHost.getContainerElement())return void(t&&this.clearHostListeners(t));const e=this.contexts.debug.data.live,o=e?e.iUpdate+1:1;this.contexts.debug.setInData('live.iUpdate',o)}),1))},this.updateTimer=null,this.refreshId={},this.contexts={debug:new e.Context(Object.assign(Object.assign({},this.getSettingsAndLive()),{host:null,focusedId:null})),settings:new e.Context({theme:'dark',filter:'',showCollapsed:!1,showParents:!1,showChildren:!1,hideUnmatched:!1,ignoreSelection:!1,ignoreFilter:!1,rowMode:'select-tip',shouldSelect:!0,noneCollapsed:!0,hiddenTipSections:[]})},this.contexts.settings.listenTo('toggleTheme',(()=>this.contexts.settings.setData({theme:'dark'===this.contexts.settings.data.theme?'light':'dark'}))),this.ownHost=new t.Host(t.newDef(x,{refreshId:this.refreshId}),o||null,{onlyRunInContainer:!0,updateTimeout:200,renderTimeout:30},this.contexts),this.initialize()}setHost(e,t){const{settings:o,live:i}=this.getSettingsAndLive(t),s=this.contexts.debug.data.host;s&&s===e||(s&&this.clearHostListeners(s),e.services.renderCycle.listenTo('onFinish',this.onUpdate,[e])),window.setTimeout((()=>this.contexts.debug.setData({host:e,settings:o,live:i})),0),consoleLog(o,'MixDOMDebug: '+(s?' Host re-added':' Host added'),e)}clearHost(){const e=this.contexts.debug.data.host;e&&(this.clearHostListeners(e),this.contexts.debug.setData(Object.assign({host:null,focusedId:null},this.getSettingsAndLive())))}refresh(e){var o;e&&(this.refreshId={}),null===(o=this.contexts.debug.data.host)||void 0===o||o.updateRoot(t.newDef(x,{refreshId:this.refreshId}))}getSettingsAndLive(e,t=0){const o={console:window.console},i={iUpdate:t};return{settings:e?Object.assign(Object.assign({},o),e):o,live:i}}initialize(){}clearHostListeners(e){e.services.renderCycle.unlistenTo('onFinish',this.onUpdate),consoleLog(this.contexts.debug.data.settings,'MixDOMDebug: Host removed',e)}}MixDOMDebug.mixDOMDebug=null,MixDOMDebug.stopDebug=()=>{if(MixDOMDebug.mixDOMDebug){const e=MixDOMDebug.mixDOMDebug.contexts.debug.data.host;e&&MixDOMDebug.mixDOMDebug.clearHostListeners(e),MixDOMDebug.mixDOMDebug=null}},MixDOMDebug.startDebug=(e,t)=>{const o=window,i=n;let s='http://localhost/www/projects/MixDOM/mix-dom-debug/dist/';s&&!s.endsWith('/')&&(s+='/');const l=s+'css/';o.document.documentElement.setAttribute('lang','en'),o.document.head.innerHTML=`<title>MixDOMDebug | Debugger for MixDOM library</title><meta name='description' content="MixDOMDebug provides a debugging view for MixDOM library hosts and contexts" /><meta name='keywords' content='mix-dom-debug, mixdomdebug, mixdomjs, mix-dom-js, mix, dom, debug, service' /><meta http-equiv='content-type' content='text/html' charset='utf-8' /><meta name='viewport' content='width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no' /><meta name="google-site-verification" content="vuXdGK5mafeCIvjzenv2uDtR4S-nxq8crCSAW_Vgyg0" /><link href='https://fonts.googleapis.com/css?family=Abel' rel='stylesheet' /><link href="${l}prettify.css?v=${i}" rel='stylesheet' type="text/css" /><link href="${l}app.css?v=${i}" rel="stylesheet" type="text/css" /><link href="${l}common.css?v=${i}" rel='stylesheet' type="text/css" />`,o.document.body.style.cssText='background: #222; margin: 0; padding: 0; width: 100%; height: 100%; font-family: \'Abel\', Arial, sans-serif; font-size: 16px;';const r=o.document.createElement('div');r.classList.add('ui'),r.id='app-root';const a=o.document.createElement('div');a.classList.add('ui'),a.id='app-hide',a.style.cssText='position: absolute; inset: 0; z-index: 1; background: #222; opacity: 1; transition: opacity 150ms ease-in-out; pointer-events: none;',o.document.body.appendChild(r),o.document.body.appendChild(a);let d=0;const ready=()=>{if(--d)return;const i=o.document.querySelector('#app-hide');i&&(o.document.body.style.removeProperty('background'),i.style.setProperty('opacity','0'),window.setTimeout((()=>{i.remove()}),150),e&&MixDOMDebug.mixDOMDebug&&MixDOMDebug.mixDOMDebug.setHost(e,t))};['https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/prettify.js','https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.15.1/beautify.min.js'].map((e=>{d++;const t=o.document.createElement('script');return t.setAttribute('type','text/javascript'),t.setAttribute('src',e),t.onload=ready,t})).forEach((e=>o.document.body.appendChild(e)));const c=o.document.querySelector('#app-root');return MixDOMDebug.mixDOMDebug=new MixDOMDebug(c),MixDOMDebug.mixDOMDebug};var y=Object.freeze({__proto__:null,MixDOMDebug,allTipSectionNames:u,appVersion:n,appIcons:f,consoleLog,wrapTip,computeSnappedValue:function computeSnappedValue(e,t){return e&&e?Math.round(t/e)/(1/e):t},flattenTree:function flattenTree(e,t){t||(t='children');const o=[];let i,s=e,n=0;for(;i=s[n++];)o.push(i),i[t]&&(s=i[t].concat(s.slice(n)),n=0);return o},flattenTreeWith,get FitLocks(){return l},cleanMargin,FitBoxAlgoritms,UIFitBox:r,UIPopupContents:a,UIPopupContainer,UIVirtualRow,UIVirtualList:d,UIList,MixOnEscape,MixHoverSignal,MixPositionedPopup,UIAppIcon,UIAppButton,UIAppInput,UIAppTipRemote:c,UIAppTip:p,UIAppTreeItem,UITreeNodeType,UIAppHostTree:m,UIAppTopBar:g,UIApp:x});module.exports=y;
