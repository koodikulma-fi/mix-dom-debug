import{SignalListenerFlags as e,Context as t}from'data-signals';import{MixDOM as o,Ref as n,mixFuncsWith as s,Host as l,newDef as i}from'mix-dom';import{MixDOM as r}from'mix-dom/camelCase';import{parseDOMStyle as d,classNames as a,readDOMString as c}from'dom-types';import{createMemo as p,createTrigger as u,createDataTrigger as f,numberRange as g,areEqual as h}from'data-memo';const m='1.0.0',y={'':null,expanded:o.def('svg',{viewBox:'0 0 10 10'},o.def('path',{d:'M 2.5,4 L 5,6 L 7.5,4',fill:'none',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'})),collapsed:o.def('svg',{viewBox:'0 0 10 10'},o.def('path',{d:'M 4,2.5 L 6,5 L 4,7.5',fill:'none',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'})),back:o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M658.8,527.9c14.4,0,26.2-11.8,26.2-26.1V292.3c0-14.4-11.8-26.2-26.2-26.2H397V135.2c0-10.6-6.4-20.1-16.2-24.2 c-9.7-4-21-1.8-28.5,5.7L90.5,378.5c-10.1,10.2-10.1,26.9,0,37l261.8,261.8c4.9,5.1,11.6,7.7,18.5,7.7c3.3,0,6.7-0.7,10-2 c9.8-4.1,16.2-13.6,16.2-24.2V527.9H658.8L658.8,527.9z',fill:'currentColor'})),forwards:o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M109.1,527.9h261.8v130.9c0,10.6,6.4,20.1,16.2,24.2c3.3,1.3,6.7,2,10,2c6.9,0,13.6-2.6,18.5-7.7l261.8-261.8 c10.1-10.1,10.1-26.8,0-37L415.6,116.7c-7.5-7.5-18.8-9.7-28.5-5.7c-9.8,4.1-16.2,13.6-16.2,24.2v130.9H109.1 c-14.4,0-26.2,11.8-26.2,26.2v209.5C82.9,516.1,94.7,527.9,109.1,527.9L109.1,527.9z',fill:'currentColor'})),console:o.def('svg',{viewBox:'0 0 10 10'},o.def('path',{d:'M 2,3 L 4,5 L 2,7',fill:'none',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'}),o.def('line',{x1:'6',x2:'8.5',y1:'8',y2:'8',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'})),theme:o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M386.4,50.2c-184.5,0-334,149.5-334,334s149.5,334,334,334c59.1,0,84.8-81,36.6-114.1c-29.8-20.5,18.2-83.2,70.4-83.2 c79.9,0,227,12.7,227-136.7C720.4,199.8,570.9,50.2,386.4,50.2z M148.4,401.8c-22.6,0-40.9-18.3-40.9-40.9s18.3-40.9,40.9-40.9 c22.6,0,40.9,18.3,40.9,40.9S171,401.8,148.4,401.8z M217.6,272.9c-26.2,0-47.5-21.2-47.5-47.5c0-26.2,21.2-47.5,47.5-47.5 c26.2,0,47.5,21.2,47.5,47.5C265.1,251.7,243.8,272.9,217.6,272.9z M358.6,209c-29.9,0-54.1-24.2-54.1-54.1 c0-29.9,24.2-54.1,54.1-54.1c29.9,0,54.1,24.2,54.1,54.1C412.6,184.8,388.4,209,358.6,209z M521.1,262.2c-32.1,0-58.1-26-58.1-58.1 s26-58.1,58.1-58.1c32.1,0,58.1,26,58.1,58.1S553.2,262.2,521.1,262.2z M613.1,427.1c-34.6,0-62.6-28-62.6-62.6s28-62.6,62.6-62.6 c34.6,0,62.6,28,62.6,62.6S647.7,427.1,613.1,427.1z',fill:'currentColor'})),close:o.def('svg',{viewBox:'0 0 16 16'},o.def('path',{d:'M10.1,8L13,5.1c0.6-0.6,0.6-1.5,0-2.1c-0.6-0.6-1.5-0.6-2.1,0L8,5.9L5.1,3C4.5,2.4,3.6,2.4,3,3C2.4,3.6,2.4,4.5,3,5.1L5.9,8 L3,10.9c-0.6,0.6-0.6,1.5,0,2.1c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4L8,10.1l2.9,2.9c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4 c0.6-0.6,0.6-1.5,0-2.1L10.1,8z',fill:'currentColor'})),info:o.def('svg',{viewBox:'0 0 16 16'},o.def('path',{d:'M8,15.2c-1,0-1.7-0.8-1.7-1.7v-6H4.9c0-1,1.1-1.7,3.1-1.7c1,0,1.7,0.8,1.7,1.7v6H11C11.1,14.5,9.7,15.2,8,15.2z',fill:'currentColor'}),o.def('circle',{cx:'8',cy:'2.6',r:'1.7',fill:'currentColor'})),'show-all':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M384 134.4c-177.6 0-331.2 139.2-331.2 249.6s158.4 249.6 331.2 249.6c182.4 0 331.2-153.6 331.2-249.6s-148.8-249.6-331.2-249.6zM384 576c-158.4 0-273.6-124.8-273.6-192s115.2-192 273.6-192c153.6 0 273.6 134.4 273.6 192s-120 192-273.6 192z M384 244.8c-67.2 0-124.8 62.4-124.8 139.2s57.6 139.2 124.8 139.2 124.8-62.4 124.8-139.2-57.6-139.2-124.8-139.2z',fill:'currentColor'})),'show-matched':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M744 158.4c-14.4-24-43.2-28.8-67.2-14.4l-91.2 57.6c-52.8-38.4-124.8-67.2-201.6-67.2-177.6 0-331.2 139.2-331.2 249.6 0 38.4 19.2 81.6 52.8 120l-62.4 38.4c-24 14.4-28.8 43.2-14.4 67.2 9.6 14.4 24 24 38.4 24 9.6 0 19.2 0 24-9.6l86.4-52.8c57.6 38.4 129.6 62.4 201.6 62.4 182.4 0 331.2-153.6 331.2-249.6 0-33.6-19.2-76.8-52.8-115.2l67.2-43.2c28.8-14.4 33.6-48 19.2-67.2zM110.4 384c0-67.2 115.2-192 273.6-192 57.6 0 105.6 19.2 148.8 43.2l-374.4 235.2c-28.8-28.8-48-62.4-48-86.4zM657.6 384c0 57.6-120 192-273.6 192-57.6 0-105.6-14.4-148.8-38.4l72-43.2c38.4 33.6 86.4 43.2 134.4 19.2 48-28.8 72-86.4 67.2-144l100.8-67.2c28.8 28.8 48 62.4 48 81.6z',fill:'currentColor'})),'scroll-to':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M368.2,704.9c9,9,23.5,9,32.4-0.1l182.8-185.4c14.3-14.4,4.1-38.9-16.3-38.9h-83.4V266.6c0-13.7-11.2-24.9-24.9-24.9H309.6 c-13.7,0-24.9,11.2-24.9,24.9v213.8H199c-20.4,0-30.6,24.6-16.2,39L368.2,704.9z M304.7,202h159.1c10.9,0,19.9-9,19.9-19.9c0-10.9-9-19.9-19.9-19.9H304.7c-10.9,0-19.9,9-19.9,19.9 C284.8,193,293.7,202,304.7,202z M304.7,122.4h159.1c10.9,0,19.9-9,19.9-19.9s-9-19.9-19.9-19.9H304.7c-10.9,0-19.9,9-19.9,19.9S293.7,122.4,304.7,122.4z',fill:'currentColor'})),'select-all':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M128,96c-17.7,0-32,14.3-32,32v512c0,17.7,14.3,32,32,32h512c17.7,0,32-14.3,32-32V128c0-17.7-14.3-32-32-32H128z M608,608 H160V160h448V608z M327.4,500.5c6.1,7.3,15.1,11.5,24.6,11.5c0.3,0,0.5,0,0.8,0c9.8-0.2,18.9-5,24.8-12.8l144-192 c10.6-14.1,7.7-34.2-6.4-44.8c-14.1-10.6-34.2-7.7-44.8,6.4L350.7,428.4l-54.1-64.9c-11.3-13.6-31.5-15.4-45.1-4.1 c-13.6,11.3-15.4,31.5-4.1,45.1L327.4,500.5z',fill:'currentColor'})),'select-none':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M640,96H128c-17.7,0-32,14.3-32,32v512c0,17.7,14.3,32,32,32h512c17.7,0,32-14.3,32-32V128C672,110.3,657.7,96,640,96z  M556,288L376,528c-7.4,9.8-18.8,15.8-31,16c-0.4,0-0.6,0-1,0c-11.9,0-23.1-5.3-30.8-14.4l-100-120c-14.1-17-11.9-42.3,5.1-56.4 c17-14.1,42.3-11.9,56.4,5.1l67.6,81.1L492,240c13.3-17.6,38.4-21.3,56-8C565.7,245.2,569.3,270.4,556,288z',fill:'currentColor'})),'no-selection':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M543.7,352C438,352,352,438,352,543.7s86,191.7,191.7,191.7s191.7-86,191.7-191.7S649.5,352,543.7,352z M543.7,416 c23.6,0,45.8,6.5,64.8,17.7L433.7,608.5c-11.2-19-17.7-41.2-17.7-64.8C416,473.3,473.3,416,543.7,416z M543.7,671.5 c-23.6,0-45.8-6.5-64.8-17.7l174.8-174.8c11.2,19,17.7,41.2,17.7,64.8C671.5,614.2,614.2,671.5,543.7,671.5z',fill:'currentColor'}),o.def('path',{d:'M54,32c-12.2,0-22,9.8-22,22v308c0,12.2,9.8,22,22,22h308c12.2,0,22-9.8,22-22V54c0-12.2-9.8-22-22-22H54z M326.7,147.2 L202.5,312.9c-5.1,6.8-12.9,10.8-21.4,11c-0.2,0-0.5,0-0.7,0c-8.2,0-16-3.6-21.2-9.9l-69-82.8c-9.8-11.7-8.2-29.1,3.5-38.9 c11.7-9.8,29.1-8.2,38.9,3.5l46.7,56l103.3-137.7c9.1-12.2,26.4-14.7,38.6-5.5C333.4,117.7,335.8,135,326.7,147.2z',fill:'currentColor'})),'no-filter':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M543.7,352C438,352,352,438,352,543.7s86,191.7,191.7,191.7s191.7-86,191.7-191.7S649.5,352,543.7,352z M543.7,416 c23.6,0,45.8,6.5,64.8,17.7L433.7,608.5c-11.2-19-17.7-41.2-17.7-64.8C416,473.3,473.3,416,543.7,416z M543.7,671.5 c-23.6,0-45.8-6.5-64.8-17.7l174.8-174.8c11.2,19,17.7,41.2,17.7,64.8C671.5,614.2,614.2,671.5,543.7,671.5z',fill:'currentColor'}),o.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'})),'click-select':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M734.1,603.7L508.8,326.4c-4.6-5.7-12.3-7.9-19.3-5.4c-6.9,2.5-11.5,9-11.5,16.3v312c0,6,3.1,11.6,8.2,14.7 c2.8,1.7,5.9,2.6,9.1,2.6c2.6,0,5.3-0.6,7.8-1.8l51.5-25.7l28.3,85c2.4,7.1,9,11.9,16.4,11.9h69.3c5.6,0,10.8-2.7,14.1-7.2 c3.3-4.5,4.1-10.3,2.4-15.6L658,632h62.6c6.7,0,12.8-3.8,15.7-9.9C739.2,616.1,738.3,608.9,734.1,603.7z',fill:'currentColor'}),o.def('path',{d:'M394.7,32H53.3C41.5,32,32,41.5,32,53.3v341.3c0,11.8,9.5,21.3,21.3,21.3h341.3c11.8,0,21.3-9.5,21.3-21.3V53.3 C416,41.5,406.5,32,394.7,32z M338.7,160l-120,160c-4.9,6.5-12.5,10.5-20.7,10.7c-0.3,0-0.4,0-0.7,0c-7.9,0-15.4-3.5-20.5-9.6 l-66.7-80c-9.4-11.3-7.9-28.2,3.4-37.6c11.3-9.4,28.2-7.9,37.6,3.4l45.1,54.1L296,128c8.9-11.7,25.6-14.2,37.3-5.3 C345.1,131.5,347.5,148.3,338.7,160z',fill:'currentColor'})),'click-select-tip':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M734.1,603.7L508.8,326.4c-4.6-5.7-12.3-7.9-19.3-5.4c-6.9,2.5-11.5,9-11.5,16.3v312c0,6,3.1,11.6,8.2,14.7 c2.8,1.7,5.9,2.6,9.1,2.6c2.6,0,5.3-0.6,7.8-1.8l51.5-25.7l28.3,85c2.4,7.1,9,11.9,16.4,11.9h69.3c5.6,0,10.8-2.7,14.1-7.2 c3.3-4.5,4.1-10.3,2.4-15.6L658,632h62.6c6.7,0,12.8-3.8,15.7-9.9C739.2,616.1,738.3,608.9,734.1,603.7z',fill:'currentColor'}),o.def('path',{d:'M334.2,32H49.8C39.9,32,32,39.9,32,49.8v284.4c0,9.8,7.9,17.8,17.8,17.8h284.4c9.8,0,17.8-7.9,17.8-17.8V49.8 C352,39.9,344.1,32,334.2,32z M287.6,138.7L187.6,272c-4.1,5.4-10.4,8.8-17.2,8.9c-0.2,0-0.3,0-0.6,0c-6.6,0-12.8-2.9-17.1-8 l-55.6-66.7c-7.8-9.4-6.6-23.5,2.8-31.3c9.4-7.8,23.5-6.6,31.3,2.8l37.6,45.1L252,112c7.4-9.8,21.3-11.8,31.1-4.4 C292.9,114.9,294.9,128.9,287.6,138.7z',fill:'currentColor'}),o.def('path',{d:'M193.8,752c-26.3,0-45-22.5-45-45V566h-37.6c0-26.3,30-45,82.5-45c26.3,0,45,22.5,45,45v141h33.8 C276.2,733.2,238.8,752,193.8,752z',fill:'currentColor'}),o.def('circle',{cx:'193.8',cy:'439',r:'45',fill:'currentColor'})),'click-tip':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M178.5,560c-37.8,0-64.7-32.3-64.7-64.7V263.4h-54c0-37.8,43.1-64.7,118.6-64.7c37.8,0,64.7,32.3,64.7,64.7v231.9h48.6 C297.1,533,243.2,560,178.5,560z',fill:'currentColor'}),o.def('circle',{cx:'178.5',cy:'80.7',r:'64.7',fill:'currentColor'}),o.def('path',{d:'M734.1,603.7L508.8,326.4c-4.6-5.7-12.3-7.9-19.3-5.4c-6.9,2.5-11.5,9-11.5,16.3v312c0,6,3.1,11.6,8.2,14.7 c2.8,1.7,5.9,2.6,9.1,2.6c2.6,0,5.3-0.6,7.8-1.8l51.5-25.7l28.3,85c2.4,7.1,9,11.9,16.4,11.9h69.3c5.6,0,10.8-2.7,14.1-7.2 c3.3-4.5,4.1-10.3,2.4-15.6L658,632h62.6c6.7,0,12.8-3.8,15.7-9.9C739.2,616.1,738.3,608.9,734.1,603.7z',fill:'currentColor'})),filter:o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M448 384v252.16c1.28 9.6-1.92 19.84-9.28 26.56-12.48 12.48-32.64 12.48-45.12 0l-64.32-64.32c-7.36-7.36-10.56-17.28-9.28-26.56v-187.84h-0.96l-184.32-236.16c-10.88-13.76-8.32-33.92 5.44-44.8 6.080-4.48 12.8-7.040 19.84-7.040h448c7.040 0 13.76 2.56 19.84 7.040 13.76 10.88 16.32 31.040 5.44 44.8l-184.32 236.16h-0.96z',fill:'currentColor'})),'filter-expanded':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M 672,512 L 544,672 L 416,512',fill:'none',stroke:'currentColor','stroke-width':'96','stroke-linejoin':'round','stroke-linecap':'round'}),o.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'})),'filter-collapsed':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M 544,384 L 704,512 L 544,640',fill:'none',stroke:'currentColor','stroke-width':'96','stroke-linejoin':'round','stroke-linecap':'round'}),o.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'})),'filter-parents':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'}),o.def('path',{d:'M656,576c-35.9,0-66.3,23.7-76.4,56.3c-1.2-0.2-2.4-0.3-3.6-0.3H472v-99.3c36.9-10.5,64-44.5,64-84.7c0-48.5-39.5-88-88-88 s-88,39.5-88,88c0,40.2,27.1,74.2,64,84.7V656c0,13.3,10.7,24,24,24h128c1.2,0,2.4-0.1,3.6-0.3c10.1,32.6,40.5,56.3,76.4,56.3 c44.2,0,80-35.8,80-80S700.2,576,656,576z M408,448c0-22.1,17.9-40,40-40s40,17.9,40,40s-17.9,40-40,40S408,470.1,408,448z',fill:'currentColor'})),'filter-children':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'}),o.def('path',{d:'M656,560c-44.7,0-82.3,30.6-93,72h-91V524.3c32.5-10.2,56-40.5,56-76.3c0-44.2-35.8-80-80-80s-80,35.8-80,80 c0,35.8,23.5,66.1,56,76.3V656c0,13.3,10.7,24,24,24h115c10.7,41.4,48.3,72,93,72c52.9,0,96-43.1,96-96S708.9,560,656,560z M656,699.6c-24.1,0-43.6-19.6-43.6-43.6s19.6-43.6,43.6-43.6s43.6,19.6,43.6,43.6S680.1,699.6,656,699.6z',fill:'currentColor'})),'item-selected':o.def('svg',{viewBox:'0 0 10 10'},o.def('circle',{r:2,cx:5,cy:5,fill:'currentColor'})),'item-deselected':o.def('svg',{viewBox:'0 0 10 10'},o.def('circle',{r:1.6,cx:5,cy:5,strokeWidth:.8,stroke:'currentColor',fill:'none'}))};function getItemTypeFrom(e){switch(e.type){case'':return'empty';case'dom':return e.def.domContent&&e.def.domContent.nodeType?'dom-external':void 0!==e.def.domElement?'dom-pseudo':e.def.tag?'dom-element':'dom-text';case'boundary':return'component';default:return e.type}}function getPassPhaseAndSource(e){return e.def.getRemote?['Remote pass',e.def.getRemote().boundary]:['Content pass',e.boundary&&e.boundary.sourceBoundary]}function consoleLog(e,...t){console.log(...t),e&&e.console&&e.console.log(...t)}function consoleWarn(e,...t){console.warn(...t),e&&e.console&&e.console.warn(...t)}const consoleLogItem=(e,t)=>{switch(t.treeNode.type){case'boundary':consoleLog(e,'MixDOMDebug: Log component',t.treeNode.boundary.component);break;case'root':case'dom':case'portal':consoleLog(e,'MixDOMDebug: Log DOM element',t.treeNode.domNode);break;case'host':consoleLog(e,'MixDOMDebug: Log nested host',t.treeNode.def.host);break;default:consoleLog(e,'MixDOMDebug: Log treeNode',t.treeNode)}};function flattenTree(e,t){t||(t='children');const o=[];let n,s=e,l=0;for(;n=s[l++];)o.push(n),n[t]&&(s=n[t].concat(s.slice(l)),l=0);return o}function flattenTreeWith(e,t,o){o||(o='children');const n=[];let s,l=e.map((e=>[e,null,0])),i=0,r=!1;const ignoreKids=()=>r=!0;for(;s=l[i++];){const[e,d,a]=s,c=t(e,d,a,ignoreKids);if(c)if(n.push(c),r)r=!1;else if(e[o]){const t=a+1;l=e[o].map((e=>[e,c,t])).concat(l.slice(i)),i=0}}return n}const MixHoverSignal=(e,t)=>{t.hoverTimeout=500;let o=!1;return t.hoverRef=new n,t.hoverRef.listenTo('domDidMount',(e=>{e.addEventListener('mouseenter',(()=>{!t.hoverDisabled&&t.setTimer('onMouseEnter',(()=>t.sendSignal('onHover',o=!0)),t.hoverTimeout)})),e.addEventListener('mouseleave',(()=>{'one-time'===t.hoverDisabled&&(t.hoverDisabled=!1),t.clearTimers('onMouseEnter'),o&&t.sendSignal('onHover',o=!1)}))})),null};var b;!function(e){e[e.Left=1]='Left',e[e.Top=2]='Top',e[e.Right=4]='Right',e[e.Bottom=8]='Bottom',e[e.Horizontal=5]='Horizontal',e[e.Vertical=10]='Vertical',e[e.None=0]='None',e[e.All=15]='All'}(b||(b={}));const cleanMargin=e=>{const t={top:0,left:0,right:0,bottom:0};if('number'==typeof e)t.top=t.left=t.bottom=t.right=e;else if(e&&e.constructor===Array)t.left=t.right=e[0]||0,t.top=t.bottom=e[1]||0;else if(e){const o=e;t.left=o.left||0,t.right=o.right||0,t.top=o.top||0,t.bottom=o.bottom||0}return t};class FitBoxAlgoritms{static fitToSize(e,t,o=b.None,n='push',s='push'){const l=Object.assign({},e);if((o&b.Horizontal)!==b.Horizontal){let e=l.left,s=l.width;'anchored'===n?[e,s]=FitBoxAlgoritms.axisFitAnchored(l.left,l.width,t.left,t.width,!(o&b.Left),!(o&b.Right)):'push'===n&&([e,s]=FitBoxAlgoritms.axisFitPush(l.left,l.width,t.left,t.width)),l.left=e,l.width=s}if((o&b.Vertical)!==b.Vertical){let e=l.top,n=l.height;'anchored'===s?[e,n]=FitBoxAlgoritms.axisFitAnchored(l.top,l.height,t.top,t.height,!(o&b.Top),!(o&b.Bottom)):'push'===s&&([e,n]=FitBoxAlgoritms.axisFitPush(l.top,l.height,t.top,t.height)),l.top=e,l.height=n}return l}static axisFitPush(e,t,o,n){t>n&&(t=n);const s=e+t,l=o+n;return s>l&&(e-=s-l),e<o&&(e=o),[e,t]}static axisFitAnchored(e,t,o,n,s=!0,l=!0){const i=o+n;let r=e,d=e+t,a=0;if(l&&d>i){a=i-d,d=i}if(s&&r+a<o){a=o-(r+a),r=o}return a>0&&l&&d+a>i&&(d=i,a=0),[r,d-r]}}const w=o.component((e=>{let t=null;const s=new n;e.state={left:0,top:0,width:0,height:0},e.listenTo('didMount',(()=>{t=new ResizeObserver(onResize);const e=s.getElement();if(e){const o=e.parentElement;t.observe(e),o&&t.observe(o)}})),e.listenTo('willUnmount',(()=>{t&&t.disconnect(),t=null}));const onResize=()=>{const t=s.getElement(),o={top:e.props.offset&&e.props.offset.top||0,left:e.props.offset&&e.props.offset.left||0,width:t?t.offsetWidth:0,height:t?t.offsetHeight:0},n=e.props.align&&e.props.align.horizontal||'left',l=e.props.align&&e.props.align.vertical||'top';'right'===n?o.left-=o.width:'center'===n&&(o.left-=.5*o.width),'bottom'===l?o.top-=o.height:'center'===l&&(o.top-=.5*o.height),resizeBy(o)},resizeBy=t=>{let o={left:0,top:0,width:0,height:0};if(e.props.getContainerRect)o=e.props.getContainerRect();else{const e=s.getElement();if(e){const t=e.parentElement;t&&(o.width=t.offsetWidth,o.height=t.offsetHeight)}}const n=cleanMargin(e.props.margin);o.left=n.left,o.width-=n.left+n.right,o.top=n.top,o.height-=n.top+n.bottom;let l=0;const i=e.props.align?e.props.align.horizontal:'left',r=e.props.align?e.props.align.vertical:'top';e.props.lockHorizontal&&(l|='left'===i?b.Left:'right'===i?b.Right:b.Horizontal),e.props.lockVertical&&(l|='top'===r?b.Top:'bottom'===r?b.Bottom:b.Vertical);const d=e.props.lockHorizontal?'anchored':'push',a=e.props.lockVertical?'anchored':'push',c=FitBoxAlgoritms.fitToSize(t,o,l,d,a);e.props.lockHorizontal?c.width='left'===i?o.left+o.width-t.left:'right'===i?t.left+t.width-o.left:c.width:c.width=o.width,e.props.lockVertical?c.height='top'===r?o.top+o.height-t.top:'bottom'===r?t.top+t.height-o.top:c.height:c.height=o.height,!e.props.onMaxSize||c.width===e.state.width&&c.height===e.state.height||e.props.onMaxSize(c.width,c.height),e.isMounted()?e.setState(c,!0,!1,null,null):e.setState(c)};return onResize(),(e,t)=>{const n=Object.assign(Object.assign({},e.style?'string'==typeof e.style?d(e.style):e.style:void 0),{position:'absolute',left:t.left+'px',top:t.top+'px',maxWidth:t.width+'px',maxHeight:t.height+'px'});return o.def('div',{className:a('m-size-fitter',e.className),_ref:s,style:n},o.Content)}})),v=o.component((e=>{e.state={refreshId:{}};const t={top:0,left:0},n={horizontal:e.props.hAlign||'center',vertical:e.props.vAlign||'center'},s=p(((e,t)=>()=>e&&e()||{top:0,left:0,width:window.innerWidth,height:window.innerHeight})),l=u((({getContainerRect:e,getElement:o,elementMargin:l,hAlign:i,vAlign:r,refreshId:d})=>{const a=s(e,d)(),c=o&&('function'==typeof o?o():o)||null;if(c&&document.body.contains(c)){const e=c.getBoundingClientRect(),o=cleanMargin(null==l?0:l);n.horizontal=i||'center',n.vertical=r||(e.top+.5*e.height>.5*a.height?'bottom':'top'),t.left=e.left+('right'===n.horizontal?-o.right+e.width:'center'===n.horizontal?.5*e.width:o.left),t.top=e.top+('top'===n.vertical?o.bottom+e.height:'center'===n.vertical?.5*e.height:-o.top)}else t.left=a.left+.5*a.width,t.top=a.top+.5*a.height,n.horizontal='center',n.vertical='center'})),i=new ResizeObserver((()=>{e.setState({refreshId:{}})}));e.listenTo('willUnmount',(()=>i.disconnect));const domDidMount=e=>{i.observe(e)};return(e,i)=>(l({getContainerRect:e.getContainerRect,getElement:e.getElement,elementMargin:e.elementMargin,hAlign:e.hAlign,vAlign:e.vAlign,refreshId:i.refreshId}),o.def('div',{class:a('ui-popup-contents layout-abs-fill',e.className),style:e.style,_signals:{domDidMount}},o.def(w,{offset:t,getContainerRect:s(e.getContainerRect),align:n,margin:e.margin},o.def('div',{class:a('popup-content',e.contentClassName),style:e.contentStyle},o.Content))))})),UIPopupContainer=e=>{const t=o.def(v,{getElement:e.sourceElement,contentClassName:e.contentClassName,contentStyle:e.contentStyle,hAlign:e.horizontalAlign,vAlign:e.verticalAlign,margin:e.containerMargin,elementMargin:e.elementMargin,style:e.style},o.Content);return!e.container||e.container instanceof Node?o.def(o.Portal,{container:e.container||document.body},t):o.def(e.container,null,t)},UIVirtualRow=e=>o.def('div',{className:'ui-virtual-row',style:{position:'absolute',top:e.rowHeight*e.iRow+'px',height:e.rowHeight,width:'100%'}},o.Content),x=o.component((t=>{t.state={height:0,iStart:-1,iEnd:-1};const s=new n;let l;t.scrollToIndex=(o,n,i,r)=>{const d=s.getElement();if(!d)return;r&&(l=n=>{const finishOff=()=>r(t.getElementAt(o));n?t.listenTo('didUpdate',finishOff,null,e.OneShot):finishOff()});const a=d.scrollTop,c=o*t.props.rowHeight;(!i||c<a||c+t.props.rowHeight>a+d.clientHeight)&&d.scrollTo({top:c,behavior:n||'auto'}),a===d.scrollTop&&l&&(l(!1),l=void 0)},t.getRootElement=()=>s.getElement(),t.getListElement=()=>{var e;return(null===(e=s.getElement())||void 0===e?void 0:e.querySelector('.list-content'))||null},t.getElementAt=e=>{var o;return(null===(o=s.getElement())||void 0===o?void 0:o.querySelectorAll('.list-content .ui-virtual-row')[e-t.getRenderedState().iStart])||null},t.getFirstVisibleItem=e=>{const t=s.getElement(),o=t&&t.querySelectorAll('.list-content .ui-virtual-row');if(!o)return null;const n=t.scrollTop;return e?o[0]||null:[...o].find((e=>e.offsetTop>=n))||null};const i=f((()=>{let e=null;const mountResizer=o=>{e=new ResizeObserver(onRefresh),e.observe(o),t.setState({height:o.offsetHeight}),onRefresh()};s.listenTo('domDidMount',mountResizer);const unmountResizer=()=>{s.unlistenTo('domDidMount',mountResizer),s.unlistenTo('domWillUnmount',unmountResizer),e&&e.disconnect(),e=null};return s.listenTo('domWillUnmount',unmountResizer),unmountResizer})),onRefresh=()=>{const e=s.getElement(),o=(null==e?void 0:e.scrollTop)||0,n=void 0!==t.props.rowTolerance?t.props.rowTolerance:2,i=(null==e?void 0:e.offsetHeight)||0,r=t.props.nRows-1,d={iStart:Math.min(Math.max(0,Math.floor(o/t.props.rowHeight-n)),r),iEnd:Math.min(Math.floor((o+i)/t.props.rowHeight+n),r),height:i},a=!h(d,t.state,1);l&&(l(a),l=void 0),a&&t.setState(d)},r=f(onRefresh,[t.props.rowHeight,t.props.nRows,t.props.rowTolerance,t.props.refreshId]),d=onRefresh;return(e,t)=>{i(!1!==e.handleResizing),r([e.rowHeight,e.nRows,e.rowTolerance,e.refreshId]);const n=e.nRows,l=g(t.iStart,t.iEnd+1).map((t=>{let s=e.renderRow(t,n,e.rowHeight);return s&&!1!==e.autoWrap?o.def(UIVirtualRow,{iRow:t,nRows:n,rowHeight:e.rowHeight,_key:e.getRowKey?e.getRowKey(t,n):t},s):s}));return o.def('div',{_ref:s,className:a('ui-virtual-list layout-scrollable style-scrollable layout-fit-height',e.className),style:Object.assign({display:'flex',flexDirection:'column'},e.style||{}),onScroll:d},o.def('div',{className:a('list-content',e.contentClassName),style:Object.assign({position:'relative',paddingBottom:n*e.rowHeight+'px'},e.contentStyle||{})},l))}}));function UIList(e,t){const n=p(((...e)=>({}))),s=p(((e,t,...o)=>{let n=0;return t?e.filter(((e,o)=>!!t(e,o,n)&&++n)):e.slice()}));let l=s(t.props.items,t.props.filter,t.props.refreshId);const renderRow=(e,n,s)=>{const i=t.props,r=l[e];return r?o.def(i.Item,Object.assign({_key:i.keyProp?r[i.keyProp]:r,item:r},i.commonProps)):null},getRowKey=e=>t.props.keyProp&&t.props.items[e]?t.props.items[e][t.props.keyProp]:e;return(e,t)=>{var i;return l=s(e.items,e.filter,e.refreshId),o.def('div',{class:a('ui-tree-list flex-col layout-fit-size',e.className),role:'tree'},o.def(x,{_ref:e.refVirtualList,nRows:l.length,getRowKey,rowHeight:null!==(i=e.rowHeight)&&void 0!==i?i:30,renderRow,refreshId:n(l,e.commonProps,e.refreshId),className:e.listClassName}))}}var __rest$6=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};const MixPositionedPopup=(e,t)=>(t.state=Object.assign(Object.assign({},t.state),{popupOpened:!1,popupSourceElement:null}),t.showPopup=(e,o)=>{void 0!==e&&t.setInState('popupSourceElement',e);const n=t.state.popupFadeIn;o||!n?t.setInState('popupOpened',!0):!0!==t.state.popupOpened&&(t.setTimer('popupFade',(()=>{'start'===t.state.popupOpened&&(t.setTimer('popupFade',(()=>'in'===t.state.popupOpened&&t.setInState('popupOpened',!0)),n),t.setInState('popupOpened','in'))}),25),t.setInState('popupOpened','start'))},t.hidePopup=e=>{t.state.popupOpened&&(e||!t.state.popupFadeOut?t.setState({popupOpened:!1,popupSourceElement:null}):(t.setInState('popupOpened','out'),t.setTimer('popupFade',(()=>'out'===t.state.popupOpened&&t.setState({popupOpened:!1,popupSourceElement:null})),t.state.popupFadeOut)))},t.WithTooltip=o.wired((()=>({popupOpened:t.state.popupOpened,horizontalAlign:t.state.horizontalAlign,verticalAlign:t.state.verticalAlign,containerMargin:t.state.containerMargin,elementMargin:t.state.elementMargin,popupFadeIn:t.state.popupFadeIn,popupFadeOut:t.state.popupFadeOut,popupSourceEl:t.state.popupSourceElement,refreshId:t.refreshPopupId})),(e=>{if(!e.popupOpened)return null;const n=t.renderPopup?t.renderPopup():null;if(null==n)return null;const{popupOpened:s,refreshId:l}=e,i=__rest$6(e,['popupOpened','refreshId']),r='start'===s||'in'===s?e.popupFadeIn:e.popupFadeOut;return o.def(UIPopupContainer,Object.assign({container:t.popupContainer,sourceElement:e.popupSourceEl,contentClassName:a('style-shadow-overlay','out'===s||'start'===s?'style-opacity-0':'style-opacity-1'),contentStyle:r?`transition: opacity ${r}ms ${'out'===s?'ease-in':'ease-in-out'}`:void 0},i),n)}),'WithTooltip'),t.addWired(t.WithTooltip),null),MixOnEscape=(e,t)=>{const onKeyDown=e=>{'Escape'===e.key&&(e.preventDefault(),e.stopPropagation(),t.sendSignal('onEscape'))};return t.useEscape=e=>(e?window.addEventListener:window.removeEventListener)('keydown',onKeyDown),null};var __rest$5=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};const C=o.remote(),S=o.mixFuncsWith(MixHoverSignal,MixOnEscape,MixPositionedPopup,((e,t)=>{t.state=Object.assign(Object.assign({},t.state),{elementMargin:5,containerMargin:10,popupFadeIn:100,popupFadeOut:300}),t.popupContainer=C,t.setHovered=e=>{const o=t.hoverRef.getElement();e?t.showPopup(t.props.getPositionSource?t.props.getPositionSource(o):o):t.hidePopup(),t.useEscape(t.props.escToCloseTip&&e||!1)},t.listenTo('onHover',(e=>{e&&'one-time'===t.hoverDisabled?t.hoverDisabled=!1:t.setHovered(e)})),t.listenTo('onEscape',(()=>t.hidePopup()));const onClick=e=>{t.props.onClick&&t.props.onClick(e),!1!==t.props.clickToCloseTip&&(t.state.popupOpened?t.hidePopup():t.hoverDisabled='one-time')};return t.renderPopup=()=>'function'==typeof t.props.renderTip?t.props.renderTip(t):t.props.renderTip,t.listenTo('preUpdate',(e=>{e&&e.disableHover!==t.props.disableHover&&(t.hoverDisabled=t.props.disableHover)})),e=>{const{class:n,className:s,tag:l,renderTip:i,getPositionSource:r,escToCloseTip:d,clickToCloseTip:c,onClick:p,refreshId:u,rootRef:f}=e,g=__rest$5(e,['class','className','tag','renderTip','getPositionSource','escToCloseTip','clickToCloseTip','onClick','refreshId','rootRef']);return t.refreshPopupId=i,o.def(l,Object.assign({_ref:f?[f,t.hoverRef]:t.hoverRef,class:a(n,s),onClick},g),o.Content,o.def(t.WithTooltip))}}),null),wrapTip=(...e)=>o.def('div',{class:a('style-ui-panel flex-col layout-gap-l'),style:'min-width: 100px;'},...e);var __rest$4=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};function UIAppIcon(e){const{iconName:t,iconSize:n,className:s}=e,l=__rest$4(e,['iconName','iconSize','className']);return o.def('span',Object.assign({},l,{className:a('ui-icon style-ui-icon flex-no-shrink',n&&'size-'+n,s)}),y[t])}var __rest$3=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};const UIAppButton=(e,t)=>{const onClick=e=>{t.props.onPress&&t.props.onPress(e),t.props.onClick&&t.props.onClick(e)},onKeyDown=e=>{!t.props.onPress||' '!==e.key&&'Enter'!==e.key||t.props.disabled||(e.preventDefault(),t.props.onPress(e)),t.props.onKeyDown&&t.props.onKeyDown(e)};return e=>{const{look:t,size:n,invisible:s,iconName:l,iconClassName:i,className:r,disabled:d,onPress:c,onClick:p,onKeyDown:u,toggled:f}=e,g=__rest$3(e,['look','size','invisible','iconName','iconClassName','className','disabled','onPress','onClick','onKeyDown','toggled']);return o.def(S,Object.assign({},g,{tag:'button',disabled:!!s||d,onKeyDown,onClick,className:a('ui-app-button style-ui-button style-ui-focusable','focusable-look-'+(t||'edge'),void 0!==f?f?'button-on':'button-off':void 0,n&&'size-'+n,s&&'layout-no-pointer style-opacity-0',r)}),void 0!==l?o.def(UIAppIcon,{iconName:l,className:i,iconSize:'narrow'!==n&&'no'!==n?n:void 0}):null,o.Content)}};var __rest$2=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};const UIAppInput=(e,t)=>{const n=new o.Ref,onInput=e=>{if(t.props.onInput&&t.props.onInput(e),t.props.onValue){const e=n.getElement();e&&t.props.onValue(e.value)}},onKeyDown=e=>{if(t.props.onKeyDown&&t.props.onKeyDown(e),'Escape'===e.key&&t.props.escToClearInput){const e=n.getElement();e&&e.value&&(e.value='',t.props.onValue&&t.props.onValue(''))}};return e=>{const{look:t,escToClearInput:s,className:l,onKeyDown:i,rootRef:r,onInput:d}=e,c=__rest$2(e,['look','escToClearInput','className','onKeyDown','rootRef','onInput']);return o.def(S,Object.assign({},c,{rootRef:n,onKeyDown,onInput,tag:'input',className:a('ui-app-input style-ui-input style-ui-focusable','focusable-look-'+(t||'edge'),l)}))}};function stringifyObject(e,t,o=1){if(!e||'object'!=typeof e)return'string'==typeof e?'"'+e+'"':''+e;if(Array.isArray(e))return'['+(o?e.map((e=>stringifyObject(e,!1,o-1))):e.toString())+']';let n='';if(!o)return''+e;o--;for(const s in e)n+=(t?'\n    ':' ')+s+': '+(o?stringifyObject(e[s],!1,o):'string'==typeof e[s]?'"'+e[s]+'"':''+e[s])+',';return n&&(n=n.slice(0,n.length-1)),'{'+n+(t&&n?'\n':' ')+'}'}const Prettify=e=>{const t=a('style-ui-code prettyprint',e.className);return window.PR?o.defHTML(window.PR.prettyPrintOne(e.code),e.tag||'code',{className:t,style:e.style}):o.def(e.tag||'code',{class:t,style:e.style},e.code)},PrettifyDelay=(e,t)=>{t.state={};const n=u((()=>{t.state.isReady&&t.setState({isReady:!1}),t.setTimer('reset',(()=>t.setState({isReady:!0})),t.props.delay||100)}),void 0,'shallow');return(e,t)=>{const s=e.origCode.trim();n([e.resetId,s]);const l=a('style-ui-code prettyprint',e.className),i=e.prePrettifier?e.prePrettifier(s):s;return t.isReady&&window.PR?o.defHTML(window.PR.prettyPrintOne(i),e.tag||'code',{className:l,style:e.style}):o.def(e.tag||'code',{class:l,style:e.style},s)}};function escapeHTML(e){return window.PR?e.replace(/\&(?!(\w+;))/g,'&amp;').replace(/</g,'&lt;'):e}function beautify(e){return window.exports&&window.exports.js_beautify?window.exports.js_beautify(e):e}function getSnippetContainerProps(){return{className:'layout-border-box',style:'max-width: 800px; max-height: 50vh;'}}function getMiniScrollableProps(e){return{className:'layout-scrollable style-scrollable'+(e?' '+e:''),style:'max-width: 100%; max-height: 250px'}}const renderComponentLinkTip=()=>wrapTip(o.def('div',null,'Scroll and focus to the target.',o.def('br',null),' - If is matching and item is out of view, also selects it.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),'/',o.def('b',null,'Alt'),' to open details popup instead.',o.def('br',null),' - Click with ',o.def('b',null,'Shift'),' to log into console instead.')),renderUIAppTipSectionTip=()=>wrapTip(o.def('div',null,'Toggle the section visibility.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),'/',o.def('b',null,'Alt'),' to only show this section or all.')),renderConsoleTip=()=>wrapTip(o.def('div',null,'Click to log in console.')),T=['heading','code','props','state','contexts','settings','rendered-by','wired','remote','children','renders'],UIAppTipSection=(e,t,n)=>{t.state={hiddenSections:[]},n.listenToData('state.hiddenTipSections',(e=>{t.setState({hiddenSections:e})}),[t.state.hiddenSections]);const onSectionClick=e=>{let o=t.state.hiddenSections.slice();const s=t.props.type;if(e.ctrlKey||e.altKey||e.metaKey)o=o.length+1!==T.length||o.includes(s)?T.filter((e=>e!==s)):[];else{const e=o.indexOf(s);-1!==e?o.splice(e,1):o.push(s)}n.setInData('state.hiddenTipSections',o)},onPressLink=e=>{t.props.onItemLink&&void 0!==t.props.idToScroll&&t.props.onItemLink(t.props.idToScroll,e.shiftKey?'log':e.ctrlKey||e.altKey||e.metaKey?'details':'focus')},onLog=()=>{consoleLog(t.props.debugInfo,'MixDOMDebug: Log info',Object.assign({},t.props.debugTarget))};return(e,t)=>{const n=!t.hiddenSections.includes(e.type),s=void 0===e.useOverflow?void 0!==e.extraTitle||void 0!==e.afterTitle:e.useOverflow;return o.def('aside',null,o.def('h3',{class:a('style-ui-heading',e.debugInfo&&'flex-row')},o.def(UIAppButton,{look:'transparent',className:a(s&&'style-text-ellipsis',!n&&'style-dimmed'),renderTip:renderUIAppTipSectionTip,onPress:onSectionClick},o.def(Title,{title:e.title,extraTitle:e.extraTitle,afterTitle:e.afterTitle,idToScroll:e.idToScroll,onPress:onPressLink})),e.debugInfo?o.def('span',{class:'flex-grow'}):null,e.debugInfo?o.def(UIAppButton,{look:'transparent',iconName:'console',onPress:onLog,renderTip:renderConsoleTip}):null),n?o.def(o.WithContent,null,o.def('div',Object.assign({},!1!==e.useDefaultLimits?getMiniScrollableProps('style-ui-mini-panel'):{className:'style-ui-mini-panel'}),o.Content)):null)}},UIAppTipHeading=(e,t,n)=>{const onPressLink=e=>{t.props.onItemLink&&void 0!==t.props.idToScroll&&t.props.onItemLink(t.props.idToScroll,e.shiftKey?'log':e.ctrlKey||e.altKey||e.metaKey?'details':'focus')},onPressTargetLog=e=>{consoleLog(t.props.debugInfo,'MixDOMDebug: Log element',t.props.afterLogTarget)},onPressClose=e=>{t.props.onItemLink&&t.props.onItemLink(null,'details-break')},onHistoryPrev=e=>{t.props.onHistory&&t.props.onHistory(t.props.iHistory?Math.max(t.props.iHistory-1,0):0)},onHistoryNext=e=>{var o;t.props.onHistory&&t.props.onHistory(null!=t.props.iHistory?Math.min(t.props.iHistory+1,(null===(o=t.props.history)||void 0===o?void 0:o.length)||0):0)};return e=>{const t=void 0===e.useOverflow?void 0!==e.extraTitle||void 0!==e.afterTitle:e.useOverflow;return o.def('aside',{class:'layout-gap-m flex-col layout-padding-m-x layout-padding-l-y layout-padding-no-top'},o.def('h2',{class:'style-ui-heading flex-row flex-align-items-baseline layout-gap-m'},e.history&&e.history[1]?e.history[2]?o.def(o.Fragment,null,o.def(UIAppButton,{iconName:'back',look:'transparent',size:'large',className:'flex-align-self-center history-button',onPress:onHistoryPrev,disabled:0===e.iHistory}),o.def(UIAppButton,{iconName:'forwards',look:'transparent',size:'large',className:'flex-align-self-center history-button',onPress:onHistoryNext,disabled:e.iHistory===e.history.length-1})):o.def(UIAppButton,{iconName:1===e.iHistory?'back':'forwards',look:'transparent',size:'large',className:'flex-align-self-center history-button',onPress:1===e.iHistory?onHistoryPrev:onHistoryNext}):null,o.def('span',{class:'flex-grow'}),o.def('span',{class:a('flex-row layout-gap-l',null!=e.extraTitle?'flex-align-items-center':'flex-align-items-baseline',t&&'style-text-ellipsis')},o.def(Title,{title:e.title,extraTitle:e.extraTitle,afterTitle:e.afterTitle,afterLogTitle:e.afterLogTitle,idToScroll:e.idToScroll,onPress:onPressLink,onPressAfterLog:onPressTargetLog})),o.def('span',{class:'flex-grow'}),o.def(UIAppButton,{iconName:'close',look:'transparent',size:'large',className:'flex-align-self-center',onPress:onPressClose})),o.def(o.WithContent,null,o.def('div',Object.assign({},!1!==e.useDefaultLimits?getMiniScrollableProps('style-ui-mini-panel layout-margin-no-bottom'):{className:'style-ui-mini-panel layout-margin-no-bottom'}),o.Content)))}};function Title(e){const t=null==e.afterLogTitle?null:o.def(UIAppButton,{look:'edge',size:'no',className:'style-text-ellipsis',onPress:e.onPressAfterLog,renderTip:renderConsoleTip},e.afterLogTitle);return e.idToScroll?o.def(o.Fragment,null,void 0!==e.extraTitle?o.def('span',null,e.title,': '):null,o.def(UIAppButton,{look:'edge',size:'no',className:'style-text-ellipsis',onPress:e.onPress,renderTip:renderComponentLinkTip},void 0!==e.extraTitle?e.extraTitle:e.title),e.afterTitle,t):o.def(o.Fragment,null,e.title,e.extraTitle,e.afterTitle,t)}function getGroundingTreeNode(e){let t=e;for(;t=t.parent;)switch(t.type){case'root':break;case'pass':case'boundary':return t}return null}function readComponentOneLine(e,t,n){if('boundary'===e.type)return o.def(o.Fragment,null,o.def(ComponentLink,{name:e.def.tag.name||'Anonymous',onPress:t||void 0}),o.def(Prettify,{code:e.def.tag.toString(),className:'style-text-ellipsis'}));const[s,l]=getPassPhaseAndSource(e),i=l&&l._outerDef.tag.name||'Anonymous';return o.def(o.Fragment,null,n?null:o.def('span',{_key:'pass',class:'style-color-dim'},t?o.def(ComponentLink,{name:s,onPress:t}):s),o.def('span',{_key:'from',class:'style-color-dim'},' from '),o.def('b',null,i))}function ComponentLink(e){return e.onPress?o.def(UIAppButton,{look:'edge',size:'narrow',className:e.className,onPress:e.onPress,renderTip:renderComponentLinkTip},o.def('b',null,e.name)):o.def('b',null,e.name)}function RenderComponentPartList(e){var t;const n='contexts'===e.part,s=n?(null===(t=e.component.contextAPI)||void 0===t?void 0:t.getContexts())||{}:e.component[e.part]||{};return o.def(RenderPartList,{portion:s,overrideText:n?'Context':void 0})}function RenderPartList(e){const t=e.keys||Object.keys(e.portion);return void 0===t[0]?null:o.def('ul',{class:'style-ui-list'},t.map((t=>o.def('li',{_key:t,class:'flex-row flex-align-items-baseline layout-gap-l'},o.def(RenderPropertyName,{bold:!0},t,': '),o.def(Prettify,{code:e.overrideText||beautify(stringifyObject(e.portion[t],!1,2)),tag:'pre',className:'style-text-ellipsis'})))))}function RenderPropertyName(e){return o.def('span',{class:a('style-color-dim layout-inline-block flex-no-shrink',e.italic&&'style-text-italic',e.bold&&'style-text-bold'),style:'min-width: 100px;'},o.Content)}function RenderComponentWiredChildren(e){if(!e.wired.size)return null;let t=-1;return o.def('ul',{class:'style-ui-list'},[...e.wired].map((n=>n.api&&n.api.components.size?[...n.api.components].map((n=>o.def('li',{_key:++t,class:'flex-row flex-align-items-baseline layout-gap-l'},o.def(RenderComponentChild,{treeNode:n.boundary.treeNode,onItemLink:e.onItemLink,index:t,childText:'Wired'})))):null)))}function RenderComponentRemoteChildren(e){const t=e.remote,n=e.remotePasses||t.getHost().findTreeNodes(['pass'],0,!0,(e=>e.def.getRemote&&e.def.getRemote()===t));return n[0]?o.def('ul',{class:'style-ui-list'},[...n].map(((t,n)=>o.def('li',{_key:t,class:'flex-row flex-align-items-baseline layout-gap-l'},o.def(RenderComponentChild,{treeNode:t,onItemLink:e.onItemLink,index:n,childText:'Pass'}))))):null}function RenderComponentChildren(e){const t=e.treeNode.boundary;return t&&t.innerBoundaries[0]?o.def('ul',{class:'style-ui-list'},t.innerBoundaries.map(((t,n)=>o.def('li',{_key:n,class:'flex-row flex-align-items-baseline layout-gap-l'},o.def(RenderComponentChild,{treeNode:t.treeNode,onItemLink:e.onItemLink,index:n}))))):null}const RenderComponentChild=(e,t)=>{const onPress=e=>t.props.onItemLink&&t.props.onItemLink(t.props.treeNode,e.shiftKey?'log':e.ctrlKey||e.altKey||e.metaKey?'details':'focus');return e=>o.def(o.Fragment,null,o.def(RenderPropertyName,{italic:!0},e.childText||'Child',' ',void 0===e.index?'':'#'+(e.index+1),': '),readComponentOneLine(e.treeNode,onPress))},RenderedByComponents=(e,t)=>{var n,s,l;t.setConstantProps({treeNode:!0});const i=t.props.treeNode,r=(null===(n=i.sourceBoundary)||void 0===n?void 0:n.treeNode)||null,d='pass'===i.type?i:null,a=d?d.def.getRemote?d.def.getRemote().boundary.treeNode:(null===(l=null===(s=d.def.contentPass)||void 0===s?void 0:s.sourceBoundary)||void 0===l?void 0:l.treeNode)||null:null;let c=[];const p=new Map,f=u((()=>{if(c=[],r){let e=getGroundingTreeNode(i);for(;e&&e!==r&&(c.push(e),!e.def.getRemote||e.def.getRemote().boundary.treeNode!==r);)e=getGroundingTreeNode(e);c.reverse()}const e=new Set(p.keys());for(const o of[...[r,a].filter((e=>e)),...c])o&&(p.set(o,p.get(o)||(e=>{t.props.onItemLink&&t.props.onItemLink(o,e.shiftKey?'log':e.ctrlKey||e.altKey||e.metaKey?'details':'focus')})),e.delete(o));for(const t of e)p.delete(t)})),g={class:'flex-row flex-align-items-baseline layout-gap-l'};return e=>(f(e.iUpdate),r||c[0]?o.def(UIAppTipSection,{type:'rendered-by',title:'Rendered by component'},o.def('ul',{class:'style-ui-list'},a?o.def('li',Object.assign({},g,{_key:'pass'}),o.def(RenderPropertyName,{italic:!0},'Pass from: '),readComponentOneLine(a,p.get(a))):null,r?o.def('li',Object.assign({},g,{_key:'source'}),o.def(RenderPropertyName,{italic:!0},'Source: '),readComponentOneLine(r,p.get(r))):null,c.map((e=>o.def('li',Object.assign({},g,{_key:e.boundary.bId}),o.def(RenderPropertyName,{italic:!0},'Through: '),readComponentOneLine(e,p.get(e))))))):null)},UIAppTipDisplay=(e,t)=>{t.state={history:[t.props.item],iHistory:0,isAlive:!1};const bringAlive=()=>!t.hasTimer('alive')&&t.setTimer('alive',(()=>t.setState({isAlive:!0})),25),onKeyDown=e=>{'Escape'===e.key&&t.props.escToCloseTip&&t.props.onItemLink&&t.props.onItemLink(null,'details-break')};t.listenTo('didMount',(()=>{bringAlive(),document.addEventListener('keydown',onKeyDown)})),t.listenTo('willUnmount',(()=>document.removeEventListener('keydown',onKeyDown))),t.listenTo('preUpdate',((e,o)=>{if(e&&(e.item!==t.props.item||e.reselectRefreshId!==t.props.reselectRefreshId)){if(t.props.item===t.state.history[t.state.iHistory])return;if(t.props.item===t.state.history[t.state.iHistory+1])t.setState({iHistory:t.state.iHistory+1,isAlive:!1});else if(t.props.item){const e=t.state.history.slice(0,t.state.iHistory+1).concat([t.props.item]);t.setState({history:e,iHistory:e.length-1,isAlive:!1})}!t.state.isAlive&&bringAlive()}})),t.onHistory=e=>{const o=e>t.state.iHistory;t.setState({iHistory:Math.min(Math.max(0,e),t.state.history.length-1),isAlive:!1}),t.props.onHistoryItem&&t.props.onHistoryItem(t.state.history[t.state.iHistory]),bringAlive(),t.setTimer(null,(()=>{var e,n;const s=[...(null===(e=t.queryElement('div.style-ui-panel'))||void 0===e?void 0:e.querySelectorAll('button.history-button:not([disabled])'))||[]];null===(n=s[o?1:0]||s[0])||void 0===n||n.focus()}),5)};const getHeadingProps=()=>({idToScroll:t.state.history[t.state.iHistory].treeNode,onItemLink:t.props.onItemLink,history:t.state.history,iHistory:t.state.iHistory,onHistory:t.onHistory}),renderDebugTip=()=>wrapTip(o.def('div',null,'Click to open the nested host in its own debug window.',o.def('br',null),' - Click with ',o.def('b',null,'Shift'),' to toggle inclusion for all hosts.')),onPressHostToggle=e=>{var o;const n=null===(o=t.props.item.treeNode.def)||void 0===o?void 0:o.host;n&&t.props.toggleSubHost&&t.props.toggleSubHost(n,e.shiftKey||t.props.includeAllHosts?'mode':null)},onPressDebug=()=>{var e;const o=null===(e=t.props.item.treeNode.def)||void 0===e?void 0:e.host;if(!o)return;const n=window.open(void 0,'_blank','toolbar=0,scrollbars=0,location=0,resizable=1');if(n){n.addEventListener('beforeunload',(()=>{n.MixDOMDebug&&n.MixDOMDebug.stopDebug(!0)}));const e=[...document.body.children].find((e=>{var t;return'SCRIPT'===e.tagName&&(null===(t=e.getAttribute('src'))||void 0===t?void 0:t.includes('MixDOMDebug.js'))})),s=[...document.head.children].find((e=>{var t;return'LINK'===e.tagName&&'stylesheet'===e.getAttribute('rel')&&(null===(t=e.getAttribute('href'))||void 0===t?void 0:t.includes('MixDOMDebug.css'))})),l=n.document.createElement('script');l.setAttribute('type','text/javascript'),l.setAttribute('src',e?e.getAttribute('src'):'https://unpkg.com/mix-dom-debug/MixDOMDebug.js'),l.addEventListener('load',(()=>{n.setTimeout((()=>n.MixDOMDebug.startDebug(o,Object.assign(Object.assign({},t.props.debugInfo),{cssUrl:s&&s.getAttribute('href')||void 0}))))})),n.document.body.appendChild(l)}},n={className:'layout-border-box',style:'max-width: 800px; max-height: 50vh;'},onTipEnter=()=>'select-tip'===t.props.rowMode&&t.state.isAlive&&t.props.onTipPresence&&t.props.onTipPresence(t.state.history[t.state.iHistory].treeNode,'popup',!0),onTipLeave=()=>'select-tip'===t.props.rowMode&&t.state.isAlive&&t.props.onTipPresence&&t.props.onTipPresence(t.state.history[t.state.iHistory].treeNode,'popup',!1);return(e,s)=>{var l,i,r,d,c,p;const u=t.state.history[t.state.iHistory],f=u.treeNode;let g=!0,h=null,m=null,y=null,b=o.readDOMString(f,!1,0,null);switch(f.type){case'dom':{let e,t='';switch(getItemTypeFrom(f)){case'dom-text':e='Text node';break;case'dom-external':e='External node',t=u.description;break;case'dom-pseudo':e='Pseudo element',t=u.description;break;default:e=(f.domNode&&void 0!==f.domNode.ownerSVGElement?'SVG':'HTML')+' element',t=u.description}h=o.def(UIAppTipHeading,Object.assign({title:e,extraTitle:o.def(Prettify,{code:t?escapeHTML(t):u.description,className:'layout-padding-l layout-inline-block'})},getHeadingProps()));break}case'boundary':{const t=f.def.tag,n=f.boundary.component,s='Remote'===n.constructor.MIX_DOM_CLASS?n.getHost().findTreeNodes(['pass'],0,!0,(e=>e.def.getRemote&&e.def.getRemote()===n)):null;h=o.def(UIAppTipHeading,Object.assign({_key:'heading',title:'Remote'===t.MIX_DOM_CLASS?'Remote component':n.contextAPI?o.def(o.Fragment,null,'Component ',o.def('span',{class:'style-text-small'},'(with ContextAPI)')):'Component',extraTitle:o.def('b',{class:'style-color-emphasis layout-padding-l-x layout-padding-m-y layout-inline-block'},u.name||'Anonymous')},getHeadingProps())),m=o.def(o.Fragment,null,o.def(UIAppTipSection,{_key:'code',type:'code',title:'JS code',useDefaultLimits:!1},o.def(PrettifyDelay,Object.assign({origCode:t.toString(),prePrettifier:beautify,tag:'pre'},getMiniScrollableProps()))),n.props&&void 0!==Object.keys(n.props)[0]?o.def(UIAppTipSection,{_key:'props',type:'props',title:'Props',debugInfo:e.debugInfo,debugTarget:n.props},o.def(RenderComponentPartList,{component:n,part:'props'})):null,n.state&&void 0!==Object.keys(n.state)[0]?o.def(UIAppTipSection,{_key:'state',type:'state',title:'State',debugInfo:e.debugInfo,debugTarget:n.state},o.def(RenderComponentPartList,{component:n,part:'state'})):null,n.contextAPI&&void 0!==Object.keys(n.contextAPI.getContexts())[0]?o.def(UIAppTipSection,{_key:'contexts',type:'contexts',title:'Contexts',debugInfo:e.debugInfo,debugTarget:null===(l=n.contextAPI)||void 0===l?void 0:l.getContexts()},o.def(RenderComponentPartList,{component:n,part:'contexts'})):null),y=o.def(o.Fragment,null,n.wired&&n.wired.size?o.def(UIAppTipSection,{_key:'wired',type:'wired',title:'Wired components'},o.def(RenderComponentWiredChildren,{wired:n.wired,onItemLink:e.onItemLink})):null,s&&s[0]?o.def(UIAppTipSection,{_key:'remote',type:'remote',title:'Remote passes'},o.def(RenderComponentRemoteChildren,{remote:n,remotePasses:s,onItemLink:e.onItemLink})):null,f.boundary.innerBoundaries[0]?o.def(UIAppTipSection,{_key:'children',type:'children',title:'Inner components'},o.def(RenderComponentChildren,{treeNode:f,onItemLink:e.onItemLink})):null);break}case'root':{g=!1,h=o.def(UIAppTipHeading,Object.assign({title:o.def('span',{class:'layout-padding-l-x layout-padding-m-y layout-inline-block'},'Root container'),extraTitle:u.description?o.def(Prettify,{code:escapeHTML(u.description),className:'layout-padding-l layout-border-box layout-inline-block'}):void 0,afterTitle:u.description?void 0:o.def('span',{class:'style-text-small'},u.treeNode.parent?'(element inherited)':'(no element)')},getHeadingProps()),o.def('ul',{class:'style-ui-list'},o.def('li',null,'Element that contains the ',e.item.level?'nested':'debugged',' host.')));const t=null===(r=null===(i=f.children[0])||void 0===i?void 0:i.boundary)||void 0===r?void 0:r.host.settings;m=t?o.def(UIAppTipSection,{_key:'settings',type:'settings',title:'Host settings',debugInfo:e.debugInfo,debugTarget:t},o.def(RenderPartList,{portion:t||{}})):null;break}case'host':{const n=t.props.includedSubHosts&&t.props.includedSubHosts.includes(f.def.host)||!1;h=o.def(UIAppTipHeading,Object.assign({title:o.def('span',{class:'layout-padding-l-x layout-padding-m-y layout-inline-block'},'Nested host')},getHeadingProps()),o.def('ul',{class:'style-ui-list'},o.def('li',null,'Contains another host instance. You can debug it, too.'),o.def('li',null,o.def(UIAppButton,{look:'edge',onPress:onPressHostToggle,renderTip:renderDebugTip,toggled:n},n?'Exclude from this debug'+(t.props.includeAllHosts?' and disable auto inclusion':''):'Include in this debug')),o.def('li',null,o.def(UIAppButton,{look:'edge',onPress:onPressDebug,renderTip:renderDebugTip},'Open in new debug window'))));const s=null===(d=f.def.host)||void 0===d?void 0:d.settings;m=o.def(UIAppTipSection,{_key:'settings',type:'settings',title:'Host settings',debugInfo:e.debugInfo,debugTarget:s},o.def(RenderPartList,{portion:s||{}}));const l=f.def.host;b=l&&l.groundedTree.children[0]?o.readDOMString(l.groundedTree.children[0],!1,0,null):'';break}case'pass':h=o.def(UIAppTipHeading,Object.assign({title:o.def('span',{class:'layout-padding-l-x layout-padding-m-y layout-inline-block'},f.def.getRemote?'Remote pass':'Content pass'),afterTitle:readComponentOneLine(f,null,!0)},getHeadingProps())),y=o.def(o.Fragment,null,(null===(c=f.boundary)||void 0===c?void 0:c.innerBoundaries[0])?o.def(UIAppTipSection,{_key:'children',type:'children',title:'Inner components'},o.def(RenderComponentChildren,{treeNode:f,onItemLink:e.onItemLink})):null);break;case'portal':{const e=o.def(Prettify,{code:escapeHTML(u.description),className:'layout-padding-l layout-border-box layout-inline-block'});h=o.def(UIAppTipHeading,Object.assign({title:o.def('span',{class:'layout-padding-l-x layout-padding-m-y layout-inline-block'},'Portal'),afterLogTarget:(null===(p=u.treeNode)||void 0===p?void 0:p.domNode)||null,afterTitle:o.def('span',{class:'style-color-dim'},' to '),afterLogTitle:e},getHeadingProps()),o.def('ul',{class:'style-ui-list'},o.def('li',null,'Portal allows to insert the rendered content in another location in the DOM.')));break}case'':h=o.def(UIAppTipHeading,Object.assign({title:o.def('span',{class:'layout-padding-l-x layout-padding-m-y layout-inline-block'},'Empty')},getHeadingProps()),o.def('ul',{class:'style-ui-list'},o.def('li',null,'Empty treeNodes should not typically end up in the grounded tree.')))}return b&&!b.trim().startsWith('<')&&(b=JSON.stringify(b)),o.def('div',{class:a('style-ui-panel flex-col',n.className,s.isAlive?'layout-auto-pointer':'layout-no-pointer'),style:n.style,onMouseEnter:onTipEnter,onMouseLeave:onTipLeave},h,o.def('div',{class:'layout-scrollable style-scrollable flex-col layout-gap-m layout-padding-m-x'},m,g?o.def(RenderedByComponents,{treeNode:f,iUpdate:e.iUpdate,onItemLink:e.onItemLink}):null,y,'root'!==f.type&&b?o.def(UIAppTipSection,{type:'renders',title:'Renders in DOM',useDefaultLimits:!1},o.def(PrettifyDelay,Object.assign({origCode:b.replace(/\t/g,'    '),prePrettifier:escapeHTML,tag:'pre'},getMiniScrollableProps('layout-padding-l')))):null))}},M=s(MixPositionedPopup,((e,t)=>{t.state=Object.assign(Object.assign({},t.state),{item:t.props.item,elementMargin:15,containerMargin:10,popupFadeIn:100,popupFadeOut:270});const onHistoryItem=e=>{t.setState({popupSourceElement:t.props.getSourceElement?t.props.getSourceElement(e.id):null})};return t.popupContainer=C,t.renderPopup=()=>t.state.item?o.def(UIAppTipDisplay,{item:t.state.item,iUpdate:t.props.iUpdate,onItemLink:t.props.onItemLink,debugInfo:t.props.debugInfo,reselectRefreshId:t.props.reselectRefreshId,onHistoryItem,onTipPresence:t.props.onTipPresence,escToCloseTip:!0,rowMode:t.props.rowMode,includedSubHosts:t.props.includedSubHosts,includeAllHosts:t.props.includeAllHosts,toggleSubHost:t.props.toggleSubHost}):null,t.listenTo('preUpdate',((e,o,n)=>{const s=t.props;if(e&&(e.item!==s.item||e.iUpdate!==s.iUpdate||e.onItemLink!==s.onItemLink||e.debugInfo!==s.debugInfo||e.reselectRefreshId!==s.reselectRefreshId||e.onTipPresence!==s.onTipPresence||e.rowMode!==s.rowMode||e.includedSubHosts!==s.includedSubHosts||e.includeAllHosts!==s.includeAllHosts||e.toggleSubHost!==s.toggleSubHost||o&&o.popupSourceElement!==t.state.popupSourceElement)&&(t.refreshPopupId={}),e&&e.item!==s.item)if(s.item){const e=s.getSourceElement?s.getSourceElement():null;t.setState({item:s.item,popupSourceElement:e}),t.showPopup()}else t.state.popupOpened&&'out'!==t.state.popupOpened&&t.hidePopup();o&&o.popupOpened&&!t.state.popupOpened&&t.setState({item:null,popupSourceElement:null})})),()=>o.def(t.WithTooltip,null)}),null),UITreeNodeType=(e,t)=>{const renderConceptTip=()=>wrapTip(o.def('div',null,'Filter by view by type: ',o.def('b',null,getItemTypeFrom(t.props.item.treeNode)),'.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),'/',o.def('b',null,'Alt'),' to only filter this type.'));let n=null;const onRowClick=e=>{if('click'!==e.type||!n||e.clientX===n[0]&&e.clientY===n[1]){const o=t.props.rowMode||'tip';'tip'===o?t.props.onToggleTip&&t.props.onToggleTip(e):(t.props.onSelectItem&&t.props.onSelectItem(e),'select-tip'===o&&t.props.onTipPresence&&t.props.onTipPresence(t.props.item.treeNode,'hoverable',!1))}n=null},onRowMouseDown=e=>{n=[e.clientX,e.clientY]},onRowMouseEnter=e=>{'select-tip'===t.props.rowMode&&t.props.onTipPresence&&t.props.onTipPresence(t.props.item.treeNode,'hoverable',!0)},onRowMouseLeave=e=>{'select-tip'===t.props.rowMode&&t.props.onTipPresence&&t.props.onTipPresence(t.props.item.treeNode,'hoverable',!1)};return(e,t)=>{const n=e.item,s=n.treeNode;let l=null;switch(s.type){case'dom':l=o.def(Prettify,{code:escapeHTML(n.description),className:'style-text-ellipsis'});break;case'pass':case'boundary':l=readComponentOneLine(s);break;case'portal':l=o.def(o.Fragment,null,o.def('span',{class:'style-color-dim'},'Portal to '),o.def(Prettify,{code:escapeHTML(n.description),className:'style-text-ellipsis'}));break;case'root':l=o.def(o.Fragment,null,o.def('span',{class:'style-color-dim'},'Root container '),o.def(Prettify,{code:escapeHTML(n.description),className:'style-text-ellipsis'}));break;case'host':l=o.def(o.Fragment,null,o.def('span',{class:'style-color-dim'},'Nested host'));break;case'':l=o.def(o.Fragment,null,o.def('span',{class:'style-color-dim'},'Empty'))}const i=getItemTypeFrom(s);return o.def('div',{class:a('flex-row flex-align-items-center flex-grow layout-overflow-hidden layout-gap-m layout-fit-height',e.className)},o.def('span',{class:a('description layout-fit-height flex-row flex-align-items-center flex-grow layout-overflow-hidden',e.displayClassName),onMouseEnter:onRowMouseEnter,onMouseLeave:onRowMouseLeave,onMouseDown:onRowMouseDown,onClick:onRowClick},o.def('div',{class:'layout-gap-m flex-row flex-align-items-baseline flex-grow layout-overflow-hidden'},l)),o.def(UIAppButton,{look:'filled',className:a('type style-ui-concept style-fill-app-type-'+i,e.conceptClassName),onPress:e.onSelectConcept,renderTip:renderConceptTip},i))}};function UIAppTreeItem(e,t){t.state={};const onToggle=e=>{t.props.toggleCollapsed&&t.props.toggleCollapsed(t.props.item,e.shiftKey?'level':e.ctrlKey||e.metaKey?'siblings':e.altKey?'chain':'self')},onSelect=e=>{t.props.toggleSelected&&t.props.toggleSelected(t.props.item,e.shiftKey?'level':e.ctrlKey||e.metaKey?'siblings':e.altKey?'reset':'self')},onSelectConcept=e=>{t.props.toggleConcept&&t.props.toggleConcept(getItemTypeFrom(t.props.item.treeNode),e.ctrlKey||e.altKey||e.metaKey)},onToggleTip=e=>{t.props.onToggleTip&&t.props.onToggleTip(t.props.item.treeNode)},onViewInConsole=e=>{const o=t.props.item;switch(o.treeNode.type){case'boundary':consoleLog(t.props.debugInfo,'MixDOMDebug: Log component',o.treeNode.boundary.component);break;case'root':case'dom':case'portal':consoleLog(t.props.debugInfo,'MixDOMDebug: Log DOM element',o.treeNode.domNode);break;case'host':consoleLog(t.props.debugInfo,'MixDOMDebug: Log nested host',o.treeNode.def.host);break;default:consoleLog(t.props.debugInfo,'MixDOMDebug: Log treeNode',o.treeNode)}};t.listenTo('didMount',(()=>{t.props.animate&&t.setTimer(null,(()=>t.setState({animFinished:!0})),25)}));const renderToggleTip=()=>wrapTip(o.def('div',null,'Click to collapse/uncollapse the item.',o.def('br',null),' - Click with ',o.def('b',null,'Shift'),' to toggle all items in the same level.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),' to toggle all siblings.',o.def('br',null),' - Click with ',o.def('b',null,'Alt'),' to toggle between expanding all or only this item and its parents and children.')),renderSelectTip=()=>wrapTip(o.def('div',null,'Click to select/deselect this item.',o.def('br',null),' - Click with ',o.def('b',null,'Shift'),' to toggle all items in the same level.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),' to toggle all siblings.',o.def('br',null),' - Click with ',o.def('b',null,'Alt'),' to reset selection to this item.')),renderConsoleTip=()=>wrapTip(o.def('div',null,'Click to log the item in console.')),renderTipTip=()=>wrapTip(o.def('div',null,'Click to open the details popup.'));return(e,t)=>{const n=6*e.item.level,s=`style-stroke-app-type-${getItemTypeFrom(e.item.treeNode)}`;return o.def('div',{role:'treeitem',class:a('ui-app-tree-item layout-fit-height layout-margin-m-x flex-row flex-align-items-center layout-gap-m style-hoverable',e.dimmed&&'style-disabled',e.animate&&(t.animFinished?'style-opacity-1':'style-opacity-0')),style:{marginLeft:n+'px'}},o.def('div',{class:a('level-indicator',e.selected?'style-dimmed':'style-disabled',e.selected&&s),style:`position: absolute; left: 0; height: 100%; width: ${n}px; background: linear-gradient(-160deg, currentColor, ${e.selected?'35%':'15%'}, transparent, 100%, transparent);`}),o.def(UIAppButton,{onPress:onSelect,iconName:e.selected?'item-selected':'item-deselected',className:'flex-align-self-center',iconClassName:a(!e.selected&&'style-dimmed',s),look:'transparent',renderTip:renderSelectTip}),o.def(UIAppButton,{onPress:onToggle,invisible:null===e.collapsed,disabled:null===e.collapsed||void 0,iconName:null===e.collapsed?'':e.collapsed?'collapsed':'expanded',look:'transparent',renderTip:renderToggleTip}),o.def(UITreeNodeType,{item:e.item,iUpdate:e.iUpdate,displayClassName:e.dimmed?'style-greyed':void 0,conceptClassName:e.dimmed?'style-greyed':void 0,rowMode:e.rowMode,onSelectItem:onSelect,onSelectConcept,onTipPresence:e.onTipPresence,onToggleTip}),o.def(UIAppButton,{onPress:onToggleTip,iconName:'info',look:'transparent',renderTip:renderTipTip}),o.def(UIAppButton,{onPress:onViewInConsole,iconName:'console',look:'transparent',renderTip:renderConsoleTip}))}}const k={component:'[component]',root:'[root] root container',host:'[host] nested host',pass:'[pass] content pass from','pass-remote':'[pass] remote pass from',portal:'[portal] portal to',empty:'[empty]',dom:'[dom]','dom-element':'[dom] [dom-element]','dom-text':'[dom] [dom-text]','dom-external':'[dom] [dom-external]','dom-pseudo':'[dom] [dom-pseudo]'};function matchesFilter(e,t){return t&&t.some((t=>t.every((t=>{var o;return(e.name||('boundary'===e.treeNode.type?'Anonymous':'')).toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||(k[(null===(o=e.treeNode.def)||void 0===o?void 0:o.getRemote)?'pass-remote':getItemTypeFrom(e.treeNode)]||'').includes(t)}))))}function modifyIds(e,t,o,n){switch(o){case'reset':return t.filter((e=>n.includes(e)));case'invert':return n.filter((e=>!t.includes(e)));case'add':return e.concat(t.filter((t=>!e.includes(t)&&n.includes(t))));case'remove':return e.filter((e=>!t.includes(e)));default:return e.slice()}}function isItemWithinCollapsed(e,t){let o=e.parent;for(;o;){if(t.includes(o.id))return!0;o=o.parent}return!1}function findItemsIdsBy(e,t,o,n){var s,l;const i=o.indexOf(e.id),r=-1===i;switch(t){case'level':{const t=e.level,s=n.filter((e=>e.level===t)).map((e=>e.id));return r?[...o,...s.filter((e=>!o.includes(e)))]:o.filter((e=>!s.includes(e)))}case'siblings':{const t=(null===(l=null===(s=e.parent)||void 0===s?void 0:s.children)||void 0===l?void 0:l.map((e=>e.id)))||[e.id];return r?[...o,...t.filter((e=>!o.includes(e)))]:o.filter((e=>!t.includes(e)))}case'chain':case'parents':{const s=[e.id];let l=e.parent;for(;l;)s.push(l.id),l=l.parent;if('chain'===t){let t,o=e.children||[],n=0;for(;t=o[n++];)s.push(t.id),t.children&&(o=t.children.concat(o.slice(n)),n=0)}const i=n.filter((e=>!s.includes(e.id))).map((e=>e.id));return o.length!==i.length||o.some((e=>s.includes(e)))?i:[]}case'reset':return r||1!==o.length?[e.id]:[];default:return o=o.slice(),r?o.push(e.id):o.splice(i,1),o}}const O=function DebugHost(t,n,s){n.iMatchCycle=-1,n.state={host:null,settings:null,iUpdate:0,selected:[],collapsed:[],tipItem:null,filterSplits:null,showCollapsed:!1,showParents:!1,showChildren:!1,ignoreSelection:!1,ignoreFilter:!1,rowMode:'select-tip',hideUnmatched:!1,includeAllSubHosts:!1,includedSubHosts:[],reselectRefreshId:{}},s.listenToData('debug.host','debug.settings','debug.iUpdate','state',((e,t,o,s)=>{const l=s||Object.assign({filter:''},n.state),i=l.filter.replace(/\,/g,' ').trim()?l.filter.split(',').map((e=>e.trim().split(' ').map((e=>e.trim().toLowerCase())).filter((e=>e)))).filter((e=>void 0!==e[0])):null;n.setState({host:e,settings:t,iUpdate:o,filterSplits:i&&void 0!==i[0]&&i||null,showCollapsed:l.showCollapsed,showParents:l.showParents,showChildren:l.showChildren,hideUnmatched:l.hideUnmatched,ignoreFilter:l.ignoreFilter,ignoreSelection:l.ignoreSelection,rowMode:l.rowMode})}),[n.state.host,n.state.settings,n.state.iUpdate]);const l=new o.Ref,i=p(((e,t,o)=>({debugInfo:e,animate:!0,iUpdate:t,rowMode:o,toggleCollapsed,toggleSelected,toggleConcept,onToggleTip,onTipPresence}))),toggleSubHost=(e,t)=>{if(n.state.includedSubHosts.includes(e)){if(!0===t)return;s.sendSignal('state.disconnectSubHost',e),n.setInState('includedSubHosts',n.state.includedSubHosts.filter((t=>t!==e))),'mode'===t&&n.setInState('includeAllSubHosts',!1)}else{if(!1===t)return;s.sendSignal('state.connectSubHost',e),n.setInState('includedSubHosts',n.state.includedSubHosts.concat([e])),'mode'===t&&n.setInState('includeAllSubHosts',!0)}};s.listenTo('state.modifySubHosts',(e=>{if('boolean'==typeof e)!e&&n.state.includedSubHosts.forEach((e=>toggleSubHost(e,!1))),n.setInState('includeAllSubHosts',e);else{const t=n.state.host&&n.state.host.findTreeNodes(['host'],0,!0).map((e=>e.def&&e.def.host)).filter((e=>e))||[];n.setState({includedSubHosts:e.filter((e=>t.includes(e)))})}}));const r=p(((e,t,o,l)=>{const i=t[0]?new Set(t):null,r=flattenTreeWith(e?[e.groundedTree]:[],((e,n,s,l)=>{let r='',d='';switch(e.type){case'pass':{let t;[d,t]=getPassPhaseAndSource(e),r=t?t._outerDef.tag.name||'Anonymous':'';break}case'boundary':d=e.def.tag?e.def.tag.name:'',r=e.def.tag?e.def.tag.toString():'';break;case'dom':{d=e.def.tag||'';let t,o='',n=!1,s='';switch(getItemTypeFrom(e)){case'dom-external':n=!0,t=e.def.domContent;break;case'dom-pseudo':n=!0,t=e.def.domElement;break;case'dom-text':s=null==e.def.domContent?'':'string'==typeof e.def.domContent?JSON.stringify(e.def.domContent):e.def.domContent.toString();break;default:o=e.def.tag,n=!(!o||!e.children[0])}r=c(o,e.def.props,n?null:s,t),n&&(r=r.replace('/>','>'));break}case'root':{const t=e.domNode;d='Root',t&&(r=c(t?t.tagName.toLowerCase():'',null,!1,t).replace('/>','>'));break}case'host':{d='Host';const n=e.def.host;i&&i.delete(n);const s=t.includes(n);!s&&l(),o&&!s&&toggleSubHost(n,!0);break}case'portal':{d='Portal';const t=(e.def.props||{}).container;r=c(t?t.tagName.toLowerCase():'body',e.def.props,!1,t||function getDocBodyBy(e){var t;let o=e;for(;o;){if(o.domNode)return(null===(t=o.domNode.ownerDocument)||void 0===t?void 0:t.body)||null;o=o.parent}return null}(e)),r=r.replace('/>','>');break}}const a={id:e,treeNode:e,parent:n,level:s,name:d,description:r};return n&&(n.children?n.children.push(a):n.children=[a]),a})),d=r.map((e=>e.id)),a=n.state.collapsed.filter((e=>d.includes(e)));a.length!==n.state.collapsed.length&&setCollapsed(a);const p=n.state.selected.filter((e=>d.includes(e)));if(p.length!==n.state.selected.length&&setSelected(p),i&&i.size){for(const e of i)s.sendSignal('state.disconnectSubHost',e);n.setInState('includedSubHosts',n.state.includedSubHosts.filter((e=>!i.has(e))))}return r}));let d=r(n.state.host,n.state.includedSubHosts,n.state.includeAllSubHosts,n.state.iUpdate);const areNoneCollapsed=(e=n.state.collapsed)=>void 0===e[0],setCollapsed=e=>{const t=areNoneCollapsed();areNoneCollapsed(e)!==t&&s.setInData('state.noneCollapsed',!t),n.setInState('collapsed',e)},toggleCollapsed=(e,t)=>{setCollapsed(findItemsIdsBy(e,t||'self',n.state.collapsed,d.filter((e=>e.children&&void 0!==e.children[0]))))},toggleConcept=(e,t)=>{let o=s.getInData('state.filter','');const n='['+e+']';let l=o?o.split(','):[];const i=l.map((e=>e.trim().toLowerCase())),r=i.findIndex((e=>e===n));if(t){const e=['component','dom','dom-element','dom-text','dom-external','dom-pseudo','host','pass','portal','root','empty'].map((e=>'['+e+']')),t=i.filter((t=>!e.includes(t)||t===n));t.length===l.length?-1!==r?l.splice(r,1):l.push(void 0===l[0]?n:' '+n):(l=t,-1===r&&l.push(void 0===l[0]?n:' '+n))}else-1!==r?l.splice(r,1):l.push(void 0===l[0]?n:' '+n);s.setInData('state.filter',l.join(','))};s.listenTo('state.toggleCollapseAll',(()=>{setCollapsed(areNoneCollapsed()?d.filter((e=>e.children&&void 0!==e.children[0])).map((e=>e.id)):[])})),s.listenTo('state.modifyCollapsed',((e,t)=>{setCollapsed(modifyIds(n.state.collapsed,e,t,d.map((e=>e.treeNode))))}));let u=!0;const whetherShouldSelect=(e=n.state.selected,t=!1)=>m?m.some((t=>!e.includes(t.id)))||t&&(y&&y.some((t=>!e.includes(t.id)))||b&&b.some((t=>!e.includes(t.id))))||!1:void 0===e[0],setSelected=e=>{const t=n.state.selected[n.iMatchCycle],o=void 0!==t?e.indexOf(t):-1;-1!==o?n.iMatchCycle+=o-n.iMatchCycle:n.iMatchCycle>=0&&n.iMatchCycle--;const l=n.state.filterSplits,i=l&&m?m.some((t=>!e.includes(t.id)&&matchesFilter(t,l))):void 0===e[0];i!==u&&s.setInData('state.shouldSelect',u=i),n.setInState('selected',e)},toggleSelected=(e,t)=>{setSelected(findItemsIdsBy(e,t||'self',n.state.selected,d))};s.listenTo('state.toggleSelectMatched',(e=>{let t=[];if(!m||!n.state.hideUnmatched&&e)void 0===n.state.selected[0]&&(t=d.map((e=>e.id)));else{const o=m.map((e=>e.id)).concat(e?(y&&y.map((e=>e.id))||[]).concat(b&&b.map((e=>e.id))||[]):[]);t=(e?void 0===n.state.selected.filter((e=>o.includes(e)))[0]:whetherShouldSelect())?o:n.state.selected.filter((e=>!o.includes(e)))}setSelected(t)})),s.listenTo('state.modifySelected',((e,t)=>{setSelected(modifyIds(n.state.selected,e,t,d.map((e=>e.treeNode))))})),s.listenTo('state.scrollToMatched',((e,t)=>{const o=m?t||n.state.showCollapsed?m:m.filter((e=>!isItemWithinCollapsed(e,n.state.collapsed))):[];if(!o[0])return;n.iMatchCycle=e?n.iMatchCycle-1<0?o.length-1:n.iMatchCycle-1:n.iMatchCycle+1>=o.length?0:n.iMatchCycle+1;const s=o[n.iMatchCycle];scrollToItem(s)}));const onItemLink=(t,o)=>{const s=t?d.find((e=>e.id===t)):null;switch(o||'focus'){case'focus':if(!s)break;filterer(s)?scrollToItem(s):m&&n.state.hideUnmatched?n.state.ignoreSelection||n.state.selected.includes(s.treeNode)||(n.listenTo('didUpdate',(()=>{s&&scrollToItem(s)}),null,e.OneShot),setSelected([...n.state.selected,s.treeNode])):scrollToItem(s);break;case'details':setTipBy(s?s.id:null);break;case'details-break':{const e=s||n.state.tipItem,t=!!(1&w);setTipBy(s?s.id:null),setSkipHover(!t),e&&refocusToGrid(e.treeNode);break}case'log':s&&consoleLogItem(n.state.settings,s)}},scrollToItem=async t=>{const o=l.getComponent(),s=n.state.collapsed;if(!o)return;let i=null,r=t.parent;for(;r;){const e=(i||s).indexOf(r.id);-1!==e&&(i||(i=s.slice()),i.splice(e,1)),r=r.parent}if(i){let t=new Promise((t=>(o||n).listenTo('didUpdate',(()=>(o||n).setTimer(null,t,20)),null,e.OneShot)));n.setInState('collapsed',i),await t}const a=d.filter(filterer).indexOf(t);-1!==a&&o.scrollToIndex(a,'instant',!0,(e=>{var t;return e&&(null===(t=e.querySelector('button'))||void 0===t?void 0:t.focus())}))},f=p(((e,t,o)=>o||t?e.filter((e=>t&&t.includes(e.id)||o&&matchesFilter(e,o))):null)),g=p((e=>{const t=[];for(const o of e){let n=o.parent;for(;n;)t.includes(n)||e.includes(n)||t.push(n),n=n.parent}return t})),h=p(((e,t)=>{const o=[];for(const n of e){if(t.includes(n))continue;let e=n.parent;for(;e;){if(t.includes(e)){o.push(n);break}e=e.parent}}return o})),filterer=e=>!(!(n.state.hideUnmatched&&n.state.showCollapsed&&(!n.state.ignoreFilter&&n.state.filterSplits||!n.state.ignoreSelection&&void 0!==n.state.selected[0]))&&isItemWithinCollapsed(e,n.state.collapsed))&&(!m||!n.state.hideUnmatched||(!!m.includes(e)||(!(!y||!y.includes(e))||!(!b||!b.includes(e)))));let m=f(d,n.state.ignoreSelection||void 0===n.state.selected[0]?null:n.state.selected,n.state.ignoreFilter?null:n.state.filterSplits),y=m&&n.state.showParents?g(m):null,b=m&&n.state.showChildren?h(d,m):null,w=0,v=!1;const setSkipHover=(e=!0)=>(!e||(v=!0))&&n.setTimer('skip-hover',(()=>{}),300),refocusToGrid=(e,t)=>{var o,n;const s=l.getComponent();if(!s||!t&&(null===(o=s.getRootElement())||void 0===o?void 0:o.contains(document.activeElement)))return;let i=e&&getRowElement(e);i||(i=s.getFirstVisibleItem()),i&&(null===(n=i.querySelector('button'))||void 0===n||n.focus())},setTipBy=(e,t=!0)=>{e||(w&=-3),n.clearTimers('tip-hover','skip-hover'),n.setState({tipItem:e&&d.find((t=>t.id===e))||null,reselectRefreshId:t?{}:n.state.reselectRefreshId})};s.listenTo('state.setTipDisplay',setTipBy);const onToggleTip=e=>{var t;setTipBy((null===(t=n.state.tipItem)||void 0===t?void 0:t.treeNode)===e?null:e)},onTipPresence=(e,t,o)=>{if('select-tip'!==n.state.rowMode)return;const s='popup'===t?2:1;if(w=o?w|s:w&~s,o)'hoverable'===t?(!v&&!n.hasTimer('skip-hover')&&!(2&w)&&n.setTimer('tip-hover',(()=>setTipBy(e)),600),v=!1):setTipBy(e,!1);else{const e=n.state.tipItem;!w&&e?(setTipBy(null),'popup'===t&&(setSkipHover(),refocusToGrid(e.treeNode))):n.clearTimers('tip-hover')}},getTipSourceElement=e=>e||n.state.tipItem?getRowElement(e||n.state.tipItem.treeNode):null,getRowElement=e=>{var t;return(null===(t=l.getComponent())||void 0===t?void 0:t.getElementAt(d.filter(filterer).findIndex((t=>t.id===e))))||null},x=o.wired((()=>i(n.state.settings,n.state.iUpdate,n.state.rowMode)),((e,t,o)=>{const s=e.item,l=s.children&&void 0!==s.children[0],i=n.state.selected.includes(s.id);return Object.assign(Object.assign(Object.assign({},e),t),{collapsed:l?n.state.collapsed.includes(s.id):null,selected:i,dimmed:m?!m.includes(s):!n.state.ignoreSelection&&void 0!==n.state.selected[0]&&!i})}),UIAppTreeItem,'WiredTreeItem');n.addWired(x);const beforeUpdate=()=>{let e=m;d=r(n.state.host,n.state.includedSubHosts,n.state.includeAllSubHosts,n.state.iUpdate),m=f(d,n.state.ignoreSelection||void 0===n.state.selected[0]?null:n.state.selected,n.state.ignoreFilter?null:n.state.filterSplits),y=m&&n.state.showParents?g(m):null,b=m&&n.state.showChildren?h(d,m):null,e!==m&&u!==whetherShouldSelect()&&s.setInData('state.shouldSelect',u=!u)};return n.listenTo('beforeUpdate',beforeUpdate),(e,t)=>(beforeUpdate(),o.def('div',{class:a('ui-app-host-tree layout-fit-size',e.className),style:e.style},o.def('div',{class:'flex-row flex-align-items-center layout-fit-size'},o.def(UIList,{items:d,Item:x,keyProp:'id',filter:filterer,rowHeight:30,refreshId:{},listClassName:e.listClassName,refVirtualList:l})),o.def(M,{item:t.tipItem,iUpdate:t.iUpdate,onItemLink,getSourceElement:getTipSourceElement,debugInfo:t.settings,reselectRefreshId:t.reselectRefreshId,onTipPresence,rowMode:t.rowMode,includedSubHosts:t.includedSubHosts,includeAllHosts:t.includeAllSubHosts,toggleSubHost})))};var __rest$1=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};const D=function DebugHost(e,t,n){t.state={theme:'dark',filter:'',showCollapsed:!1,showParents:!1,showChildren:!1,hideUnmatched:!1,ignoreFilter:!1,ignoreSelection:!1,rowMode:'select-tip',shouldSelect:!0,noneCollapsed:!0},n.listenToData('state',(e=>{const o=e||t.state,n=__rest$1(o,['hiddenTipSections']);t.setState(Object.assign({},n))}));const setFilter=e=>{n.setInData('state.filter',e)},toggleFilterAuto=()=>n.setInData('state.showCollapsed',!t.state.showCollapsed),toggleFilterParents=()=>n.setInData('state.showParents',!t.state.showParents),toggleFilterChildren=()=>n.setInData('state.showChildren',!t.state.showChildren),toggleHideUnmatched=()=>n.setInData('state.hideUnmatched',!t.state.hideUnmatched),toggleIgnoreFilter=()=>n.setInData('state.ignoreFilter',!t.state.ignoreFilter),toggleIgnoreSelection=()=>n.setInData('state.ignoreSelection',!t.state.ignoreSelection),toggleRowMode=e=>n.setInData('state.rowMode','tip'===t.state.rowMode?'select-tip':'select-tip'===t.state.rowMode?'select':'tip'),toggleCollapseAll=()=>n.sendSignal('state.toggleCollapseAll'),toggleSelectMatched=e=>n.sendSignal('state.toggleSelectMatched',e.shiftKey),toggleTheme=()=>n.sendSignal('state.toggleTheme'),scrollToMatched=e=>n.sendSignal('state.scrollToMatched',e.ctrlKey||e.altKey||e.metaKey,e.shiftKey),logHost=()=>consoleLog(n.getInData('debug.settings'),'MixDOMDebug: Log host',n.getInData('debug.host')),renderCollapseTip=()=>wrapTip(o.def('div',null,'Click to collapse/uncollapse all.')),renderSelectTip=()=>wrapTip(o.def('div',null,'Click to select/deselect matched (or all).',o.def('br',null),' - Click with ',o.def('b',null,'Shift'),' to always select/deselect all (= including dimly visible).')),renderScrollToMatchedTip=()=>wrapTip(o.def('div',null,'Scroll and focus to the next match.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),'/',o.def('b',null,'Alt'),' to go backwards.',o.def('br',null),' - Click with ',o.def('b',null,'Shift'),' to include matched but collapsed by parents (= uncollapses parents).')),renderHideUnmatchedTip=()=>wrapTip(o.def('div',null,'Whether to always show all items, or only matched by filter and/or selection.')),renderIgnoreFilterTip=()=>wrapTip(o.def('div',null,'Disable the effect of the filter temporarily.')),renderIgnoreSelectionTip=()=>wrapTip(o.def('div',null,'Disable the effect of the selection temporarily.')),renderRowModeTip=()=>wrapTip(o.def('div',null,'Change the row mode:',o.def('br',null),' 1. Clicking toggles selection and hovering toggles tip display.',o.def('br',null),' 2. Clicking the row only toggles selection.',o.def('br',null),' 3. Clicking the row toggles the tip display.')),renderFilterAutoTip=()=>wrapTip(o.def('div',null,'Whether auto-expands collapsed parents when filtering.')),renderFilterParentsTip=()=>wrapTip(o.def('div',null,'Whether shows parents with matching children.')),renderFilterChildrenTip=()=>wrapTip(o.def('div',null,'Whether shows children of matching parents.')),renderThemesTip=()=>wrapTip(o.def('div',null,'Toggle color theme.')),renderInputTip=()=>wrapTip(o.def('div',null,'Filter items by keywords.',o.def('br',null),' - Separate by comma (',o.def('b',null,','),') and join by space (',o.def('b',null,' '),').',o.def('br',null),' - Use brackets for tags: [component], [dom], [portal], [pass], [host], [root]')),renderConsoleTip=()=>wrapTip(o.def('div',null,'Click to log the debugged ',o.def('b',null,'Host'),' instance in console.'));return(e,n)=>{const s=!!t.state.filter&&t.state.filter.replace(/\,/g,'').trim();return o.def('div',{class:'ui-app-top-bar layout-fit-width flex-row flex-align-items-center layout-gap-m layout-padding-m layout-border-box'},o.def(UIAppButton,{_key:'select',look:'transparent',escToCloseTip:!0,iconName:n.shouldSelect?'select-all':'select-none',onPress:toggleSelectMatched,renderTip:renderSelectTip}),o.def(UIAppButton,{_key:'collapse',look:'transparent',escToCloseTip:!0,iconName:n.noneCollapsed?'expanded':'collapsed',onPress:toggleCollapseAll,renderTip:renderCollapseTip}),o.def(UIAppButton,{_key:'scrollTo',look:'transparent',escToCloseTip:!0,iconName:'scroll-to',disabled:n.shouldSelect&&!s||void 0,onPress:scrollToMatched,renderTip:renderScrollToMatchedTip}),o.def(UIAppInput,{_key:'filter',look:'edge',type:'text',disabled:n.ignoreFilter,escToCloseTip:!0,escToClearInput:!0,value:n.filter,onValue:setFilter,className:a('flex-grow layout-fit-height style-text-bold',s&&'active'),placeholder:'filter items',renderTip:renderInputTip}),n.hideUnmatched?o.def(o.Fragment,null,o.def(UIAppButton,{_key:'showCollapsed',look:n.hideUnmatched?'transparent':'filled',escToCloseTip:!0,iconName:n.hideUnmatched?'filter-expanded':'filter-collapsed',disabled:!n.hideUnmatched||void 0,toggled:n.hideUnmatched&&n.showCollapsed,onPress:toggleFilterAuto,renderTip:renderFilterAutoTip}),o.def(UIAppButton,{_key:'showParents',look:n.hideUnmatched?'transparent':'filled',escToCloseTip:!0,iconName:'filter-parents',disabled:!n.hideUnmatched||void 0,toggled:n.hideUnmatched&&n.showParents,onPress:toggleFilterParents,renderTip:renderFilterParentsTip}),o.def(UIAppButton,{_key:'showChildren',look:n.hideUnmatched?'transparent':'filled',escToCloseTip:!0,iconName:'filter-children',disabled:!n.hideUnmatched||void 0,toggled:n.hideUnmatched&&n.showChildren,onPress:toggleFilterChildren,renderTip:renderFilterChildrenTip})):null,o.def(UIAppButton,{_key:'eye',look:'edge',escToCloseTip:!0,iconName:n.hideUnmatched?'show-matched':'show-all',onPress:toggleHideUnmatched,renderTip:renderHideUnmatchedTip}),o.def(UIAppButton,{_key:'ignoreFilter',look:'transparent',escToCloseTip:!0,iconName:'no-filter',toggled:n.ignoreFilter,onPress:toggleIgnoreFilter,renderTip:renderIgnoreFilterTip}),o.def(UIAppButton,{_key:'ignoreSelection',look:'transparent',escToCloseTip:!0,iconName:'no-selection',toggled:n.ignoreSelection,onPress:toggleIgnoreSelection,renderTip:renderIgnoreSelectionTip}),o.def(UIAppButton,{_key:'ignoreTip',look:'transparent',escToCloseTip:!0,iconName:'select'===n.rowMode?'click-select':'select-tip'===n.rowMode?'click-select-tip':'click-tip',onPress:toggleRowMode,renderTip:renderRowModeTip}),o.def('span',{_key:'mix-dom-debug'},o.def('b',null,'mix-dom-debug'),' ',o.def('span',{class:'style-text-small'},'(v',m,')')),o.def(UIAppButton,{_key:'theme',look:'transparent',escToCloseTip:!0,iconName:'theme',onPress:toggleTheme,renderTip:renderThemesTip}),o.def(UIAppButton,{_key:'console',look:'transparent',escToCloseTip:!0,iconName:'console',onPress:logHost,renderTip:renderConsoleTip}))}};function Article(){return o.def('article',{class:'flex-col layout-gap-m layout-margin-l layout-fit-width style-ui-blog'},o.Content)}function Section(){return o.def('section',{class:'flex-col layout-padding-l layout-border-box layout-gap-l layout-fit-width'},o.Content)}function Aside(){return o.def('aside',{class:'style-ui-panel layout-margin-l'},o.Content)}function Small(e){return o.def('span',{class:a('style-text-small',e.wide&&'layout-padding-m',e.italic&&'style-text-italic',e.bold&&'style-text-bold')},o.Content)}function H1(){return o.def('h1',{class:'style-text-center layout-margin-l layout-padding-l style-ui-heading main'},o.Content)}function H2(){return o.def('h2',{class:'style-text-center style-ui-heading'},o.Content)}function H3(){return o.def('h3',{class:'style-ui-heading'},o.Content)}function A(e){return o.def('a',{class:'style-ui-button style-ui-focusable focusable-look-edge size-narrow style-text-no-decoration',href:e.href,target:e.target||'_blank'},o.Content)}function Code(e){return o.def(Prettify,{code:e.code,className:'style-ui-mini-panel layout-overflow-hidden'})}function Pre(e){return o.def(Prettify,{tag:'pre',code:e.code,className:'style-ui-mini-panel layout-scrollable style-scrollable'})}const SectionTogglable=(e,t)=>{const renderSectionTip=()=>wrapTip(o.def('div',null,'Toggle the section visibility.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),'/',o.def('b',null,'Alt'),' to only show this section or all.')),onPress=e=>t.props.toggleSection&&t.props.toggleSection(t.props.name,e.ctrlKey||e.altKey||e.metaKey);return e=>o.def(Section,null,o.def(H2,null,o.def(UIAppButton,{look:'transparent',className:a(!e.visible&&'style-dimmed'),renderTip:renderSectionTip,onPress},e.title)),e.visible?o.Content:null)},UIAppInstructions=(e,t)=>{t.state={hiddenSections:[]};const toggleSection=(e,o)=>{let n=t.state.hiddenSections.slice();const s=n.indexOf(e);o?n=1===n.length&&-1!==s?[]:['instructions','set-host','using-launcher','manual-launching','render-app'].filter((t=>t!==e)):-1===s?n.push(e):n.splice(s,1),t.setInState('hiddenSections',n)},SectionHelper=e=>o.def(SectionTogglable,{title:e.title,name:e.name,visible:!t.state.hiddenSections.includes(e.name),toggleSection},o.Content);return()=>o.def('div',{class:'ui-app-instructions layout-fit-size layout-padding-l layout-border-box layout-scrollable style-scrollable flex-col flex-align-items-center'},o.def(Article,null,o.def(H1,null,'MixDOMDebug'),o.def(SectionHelper,{title:'Instructions',name:'instructions'},o.def('p',{class:'style-text-center'},'You are viewing instructions for setting up the debugger ',o.def(Small,null,'(because no Host instance was given)'),'.')),o.def(SectionHelper,{title:'Set host directly',name:'set-host'},o.def('p',{class:'style-text-center'},'Since you\'re seeing this page, the debugger app is already running and available ',o.def(Small,null,'(in this window)'),', and so is the globally declared ',o.def(Code,{code:'MixDOMDebug'}),' class.'),o.def(Aside,null,o.def(H3,null,'Changing the host'),o.def('p',null,'To start debugging a Host instance in this window ',o.def(Small,null,'(',o.def(Code,{code:'debugWindow'}),')'),' from another window, simply call: ',o.def(Pre,{code:'debugWindow.MixDOMDebug.startDebug( host ); // Feed in the `host` to debug.'})),o.def('p',null,'Or you can use the ',o.def(Code,{code:'setHost(host, settings, appState)'}),' and ',o.def(Code,{code:'clearHost()'}),' methods directly: ',o.def(Pre,{code:'debugWindow.MixDOMDebug.debug.setHost( host );'})),o.def('p',null,'Note that there\'s only 1 ',o.def(Small,null,'(or 0)'),' instance at a time, accessible at: ',o.def(Code,{code:'debugWindow.MixDOMDebug.debug'})))),o.def(SectionHelper,{title:'Using the launcher script',name:'using-launcher'},o.def('p',{class:'style-text-center'},'Including the launcher script adds one function to the global window: ',o.def(Code,{code:'openMixDOMDebug'}),'.'),o.def(Aside,null,o.def(H3,null,'Global usage'),o.def('p',null,'The easiest way to use is to add the launcher script to the document, and then use it to open MixDOMDebug for the hosts you want to debug.'),o.def('ol',{class:'style-ui-list'},o.def('li',null,o.def(Small,{italic:!0,wide:!0},'1. '),'So first, include the launcher script ',o.def(Small,null,'(inside ',o.def(Code,{code:escapeHTML('<body>')}),')'),': ',o.def(Pre,{code:escapeHTML('<script type="text/javacript" src="https://unpkg.com/mix-dom-debug/launcher.global.js" />')})),o.def('li',null,o.def(Small,{italic:!0,wide:!0},'2. '),'And then use it to debug a Host instance: ',o.def(Pre,{code:'const debugWindow = window.openMixDOMDebug( host ); '.trim()})),o.def('li',null,o.def(Small,{italic:!0,wide:!0},'+ '),'Use the returned window to access the static class ',o.def(Small,null,'(after it\'s loaded)'),': ',o.def(Code,{code:'debugWindow.MixDOMDebug'})))),o.def(Aside,null,o.def(H3,null,'Adding global script by JS'),o.def('p',null,'You can also do this programmatically. ',o.def(Small,null,'(Of course, you only need to add the script to the document once.)')),o.def(Pre,{code:'\n// Prepare script.\nconst scriptUrl = "https://unpkg.com/mix-dom-debug/launcher.global.js";\nconst script = document.createElement("script");\nscript.setAttribute("type", "text/javascript");\nscript.setAttribute("src", scriptUrl);\n\n// Add a listener to start debugging when the script is loaded.\nlet debugWindow = null;\nscript.addEventListener("load", () => debugWindow = window.openMixDOMDebug(host));\n\n// Add the script to document.\ndocument.body.appendChild(script);\n\n'.trim()}),o.def('p',null,'If you have the ',o.def(Code,{code:'mix-dom-debug'}),' package downloaded / installed locally, you can of course point to its ',o.def(Code,{code:'launcher.global.js'}),'.')),o.def(Aside,null,o.def(H3,null,'Module usage ',o.def(Small,null,'(import/require)')),o.def('p',null,'You can also install the ',o.def(A,{href:'https://www.npmjs.com/package/mix-dom-debug'},'NPM package'),' and import the launcher as a sub module.'),o.def('ol',{class:'style-ui-list'},o.def('li',null,o.def(Small,{italic:!0,wide:!0},'1. '),'First, install ',o.def(Code,{code:'mix-dom-debug'}),' from the terminal ',o.def(Small,null,'(as a dev. dependency)'),': ',o.def(Pre,{code:escapeHTML('npm -i mix-dom-debug --save-dev')})),o.def('li',null,o.def(Small,{italic:!0,wide:!0},'2. '),'Then import ',o.def(Small,null,'(or require)'),' the launcher function: ',o.def(Pre,{code:'import { openMixDOMDebug } from "mix-dom-debug";'})),o.def('li',null,o.def(Small,{italic:!0,wide:!0},'3. '),'And finally hook it up in your code ',o.def(Small,null,'(with typing support)'),': ',o.def(Pre,{code:'openMixDOMDebug(host, debugSettings, appState, windowSettings);'})))),o.def(Aside,null,o.def(H3,null,'About launcher arguments'),o.def('p',null,'The ',o.def(Code,{code:'openMixDOMDebug'}),' function takes in 3 arguments, all of which are optional.'),o.def('ol',{class:'style-ui-list'},o.def('li',null,o.def(Small,{italic:!0,wide:!0},'1. '),'The host to debug: ',o.def(Code,{code:'host: Host | null'})),o.def('li',null,o.def(Small,{italic:!0,wide:!0},'2. '),'Debug settings: ',o.def(Pre,{code:'\ninterface DebugSettings {\n    // Persistent.\n    console?: Console;       // Default: window.console (in original window)\n    // Only for launching.\n    rootElement?: Element | string | null; // Defaults to "#app-root"\n    scriptUrl?: string;      // Default: "https://unpkg.com/mix-dom-debug/MixDOMDebug.js"\n    cssUrl?: string;         // Default: "https://unpkg.com/mix-dom-debug/MixDOMDebug.css"\n    windowFeatures?: string; // Default: "toolbar=0,scrollbars=0,location=0,resizable=1"\n    windowTarget?: string;   // Default: "_blank"\n    onLoad?: (debug, host, debugWindow) => void;    // Default: undefined\n}\n'.trim()})),o.def('li',null,o.def(Small,{italic:!0,wide:!0},'3. '),'Initial app state: ',o.def(Pre,{code:'\ninterface DebugAppState {\n    theme?: "dark" | "light";                   // Default: "dark"\n    filter?: string;                            // Default: ""\n    selected?: MixDOMTreeNode[];                // Default: []\n    collapsed?: MixDOMTreeNode[];               // Default: []\n    includedSubHosts?: Host[] | boolean;        // Default: false\n    showCollapsed?: boolean;                    // Default: false\n    showParents?: boolean;                      // Default: false\n    showChildren?: boolean;                     // Default: false\n    hideUnmatched?: boolean;                    // Default: false\n    ignoreSelection?: boolean;                  // Default: false\n    ignoreFilter?: boolean;                     // Default: false\n    rowMode?: "select" | "select-tip" | "tip";  // Default: "select-tip"\n    hiddenTipSections?: TipSectionNames[];      // Default: []\n}'.trim()}),o.def(Pre,{code:'\ntype TipSectionNames = "heading" | "code" | "props" | "state" | "contexts" |\n    "settings" | "rendered-by" | "wired" | "remote" | "children" | "renders";\n'.trim()}))))),o.def(SectionHelper,{title:'Manual launching',name:'manual-launching'},o.def('p',{class:'style-text-center'},'Using the launcher is of course optional: you can just open up the debugger manually.'),o.def(Aside,null,o.def(H3,null,'Manually ',o.def(Small,null,'(without launcher script)')),o.def('p',null,'The below code shows what the ',o.def(Code,{code:'openMixDOMDebug'}),' function actually does.'),o.def(Pre,{code:'\nfunction openMixDOMDebug(host, debugSettings, appState) {\n\n    // Parse.\n    const s = { console: window.console, ...debugSettings };\n    const sUrl = s.scriptUrl || "https://unpkg.com/mix-dom-debug/MixDOMDebug.js";\n    const wFeatures = s.windowFeatures || "toolbar=0,scrollbars=0,location=0,resizable=1";\n    const wTarget = s.windowTarget || "_blank";\n    const onLoad = s.onLoad;\n    const coreSettings = {\n        console: s.console !== undefined ? s.console : window.console,\n        cssUrl: s.cssUrl || sUrl.slice(0, sUrl.lastIndexOf("/") + 1) + "MixDOMDebug.css",\n        rootElement: s.rootElement\n    };\n\n    // Open a window.\n    const w = window.open(undefined, wTarget, wFeatures);\n\n    // Generate contents.\n    if (w) {\n\n        // Prepare script.\n        const script = w.document.createElement("script");\n        script.setAttribute("type", "text/javascript");\n        script.setAttribute("src", sUrl);\n\n        // Add load listener.\n        script.addEventListener("load", () => {\n            const debug = w.MixDOMDebug.startDebug(host, coreSettings, appState);\n            onLoad && onLoad(debug, host || null, w);\n        });\n        \n        // Add window close listener.\n        // .. We can use "beforeunload" to call a func inside,\n        // .. since we are not trying to prevent the unloading.\n        w.addEventListener("beforeunload", () => {\n            w.MixDOMDebug?.stopDebug(true); // True to skip context update.\n        });\n\n        // Add script.\n        w.document.body.appendChild(script);\n    }\n\n    // Return window.\n    return w;\n}\n'.trim()}))),o.def(SectionHelper,{title:'Render the app manually',name:'render-app'},o.def('p',{class:'style-text-center'},'Finally, you can include the whole debugger app with the ',o.def(A,{href:'https://www.npmjs.com/package/mix-dom-debug',target:'_blank'},'NPM package'),'.'),o.def(Aside,null,o.def(H3,null,'Import the app root'),o.def('p',null,'To render the app in a custom location within your app ',o.def(Small,null,'(instead of a new window)'),', import the ',o.def(Code,{code:'MixDOMDebug'}),' class, instantiate it and insert its own host ',o.def(Code,{code:'debug.ownHost'}),' inside your app.'),o.def('p',null,'Note that it\'s okay to insert the debugger host inside the host you want to debug - it will be cut out from debugging itself. The below JSX-example demonstrates the principles.'),o.def(Pre,{code:escapeHTML('\n// Imports.\nimport { MixDOM } from "mix-dom";\nimport { MixDOMDebug } from "mix-dom-debug";\n\n// Host to debug.\n// .. Note that you could insert debug.ownHost inside, too.\nconst UIAppToDebug = () => <div class="app-to-debug">...</div>;\nconst hostToDebug = new Host(<UIAppToDebug/>);\n\n// Create a debug instance manually.\nconst debug = new MixDOMDebug(document.body.querySelector("#my-app-root"));\ndebug.setHost(hostToDebug);\n\n// Insert the debugger\'s own host inside your dev. app.\nconst UIDevApp = () => <div class="dev-app">{debug.ownHost}</div>;\nconst devHost = new Host(<UIDevApp/>);\n\n// Extra tips.\n// debug.setHost(host, settings, appState);     // Set host + update settings.\n// debug.updateSettings(settings, appState);    // Update settings.\n// debug.clearHost(host);                       // Stop debugging.\n\n'.trim())})))))},I=function UIApp(e,t,o){return t.state={theme:'dark',host:null},o.listenToData('state.theme','debug.host',((e,o)=>t.setState({theme:e,host:o})),[t.state.theme,t.state.host]),(e,t)=>r.def('div',{class:a('ui-app style-back-main style-front-main layout-fit-size flex-col','color-theme-'+t.theme,'layout-theme-default','transition-theme-default')},t.host?r.def(r.Fragment,null,r.def(D,{refreshId:e.refreshId}),r.def('div',{class:'flex-row layout-fit-width flex-grow layout-overflow-hidden'},r.def(O,{refreshId:e.refreshId,listClassName:'layout-padding-m layout-border-box'}))):r.def('div',{class:'flex-row layout-fit-width flex-grow layout-overflow-hidden'},r.def(UIAppInstructions,{refreshId:e.refreshId})),r.def(C.WithContent,null,r.def('div',{class:'popup-tip-container layout-abs-fill layout-z-high layout-overflow-hidden layout-no-pointer'},C.Content)))};var __rest=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};class MixDOMDebug{constructor(e){this.onUpdate=(e,t)=>{e||null===this.updateTimer&&(this.updateTimer=window.setTimeout((()=>{this.updateTimer=null,this.contexts.debug.setInData('iUpdate',(this.contexts.debug.data.iUpdate||0)+1)}),1))},this.updateTimer=null,this.refreshId={},this.contexts={debug:new t({settings:this.getSettings(null,!1),host:null,iUpdate:0}),state:new t({theme:'dark',filter:'',showCollapsed:!1,showParents:!1,showChildren:!1,hideUnmatched:!1,ignoreSelection:!1,ignoreFilter:!1,rowMode:'select-tip',shouldSelect:!0,noneCollapsed:!0,hiddenTipSections:[]})},this.contexts.state.listenTo('toggleTheme',(()=>this.contexts.state.setData({theme:'dark'===this.contexts.state.data.theme?'light':'dark'}))),this.contexts.state.listenTo('connectSubHost',((e,t)=>{e!==this.contexts.debug.data.host&&e!==this.ownHost&&(this.setHostListeners(e),t&&this.refresh())})),this.contexts.state.listenTo('disconnectSubHost',((e,t)=>{e!==this.contexts.debug.data.host&&e!==this.ownHost&&(this.clearHostListeners(e),t&&this.refresh())})),this.ownHost=new l(i(I,{refreshId:this.refreshId}),e||null,{onlyRunInContainer:!0},this.contexts)}setHost(e,t,o){if(e===this.ownHost){return void consoleWarn(t?Object.assign(Object.assign({},this.contexts.debug.data.settings),t):this.contexts.debug.data.settings,'MixDOMDebug: Tried to debug self.',e)}const n=this.contexts.debug.data.host;n&&n===e||(n&&this.clearHostListeners(n),this.setHostListeners(e)),this.contexts.debug.setData({host:e,iUpdate:0}),this.updateSettings(t,o)}clearHost(){const e=this.contexts.debug.data.host;e&&(this.clearHostListeners(e),this.contexts.debug.setData({host:null,iUpdate:0}))}updateSettings(e,t){if(e&&this.contexts.debug.setInData('settings',this.getSettings(e)),t){const{selected:e,collapsed:o,includedSubHosts:n}=t,s=__rest(t,['selected','collapsed','includedSubHosts']);this.contexts.state.setData(Object.assign({},s)),e&&this.contexts.state.sendSignalAs('delay','modifySelected',e,'reset'),o&&this.contexts.state.sendSignalAs('delay','modifyCollapsed',o,'reset'),void 0!==n&&this.contexts.state.sendSignalAs('delay','modifySubHosts',n)}}refresh(e=!0){e&&(this.refreshId={}),this.ownHost.updateRoot(i(I,{refreshId:this.refreshId}))}getSettings(e,t=!0){return Object.assign(Object.assign({console:window.console},t?this.contexts.debug.data.settings:void 0),e)}clearHostListeners(e){e.services.renderCycle.unlistenTo('onFinish',this.onUpdate),consoleLog(this.contexts.debug.data.settings,'MixDOMDebug: Host removed',e)}setHostListeners(e){e.services.renderCycle.listenTo('onFinish',this.onUpdate,[e]),consoleLog(this.contexts.debug.data.settings,'MixDOMDebug: Host added',e)}}MixDOMDebug.debug=null,MixDOMDebug.stopDebug=e=>{if(MixDOMDebug.debug){const t=MixDOMDebug.debug.contexts,o=t.debug.data.host;o&&MixDOMDebug.debug.clearHostListeners(o),!e&&t.debug.setData({host:null}),MixDOMDebug.debug=null}},MixDOMDebug.startDebug=(e,t,o)=>{const n=t||{},{rootElement:s,cssUrl:l}=n,i=__rest(n,['rootElement','cssUrl']);if(MixDOMDebug.debug)return e?MixDOMDebug.debug.setHost(e,i,o):MixDOMDebug.debug.updateSettings(i,o),MixDOMDebug.debug;MixDOMDebug.initApp(l,(()=>{MixDOMDebug.debug&&MixDOMDebug.debug.refresh()}));const r=s&&s instanceof Element?s:document.body.querySelector(s||'#app-root');return MixDOMDebug.debug=new MixDOMDebug(r),e?MixDOMDebug.debug.setHost(e,i,o):MixDOMDebug.debug.updateSettings(i,o),MixDOMDebug.debug},MixDOMDebug.initApp=(e,t)=>{e||(e='https://unpkg.com/mix-dom-debug/MixDOMDebug.css');const o=window,n=o.document,s=m;n.documentElement.setAttribute('lang','en');const l=n.createElement('div');l.innerHTML=`\n<title>MixDOMDebug | Debugger for MixDOM library</title>\n<meta name='description' content="MixDOMDebug is an app for MixDOM library to debug a Host instance - shows the tree in details" />\n<meta name='keywords' content='mix-dom-debug, mixdomdebug, mixdomjs, mix-dom-js, mix, dom, debug, service' />\n<meta http-equiv='content-type' content='text/html' charset='utf-8' />\n<meta name='viewport' content='width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no' />\n<link href='https://fonts.googleapis.com/css?family=Abel' rel='stylesheet' />\n<link href="${e}?v=${s}" rel='stylesheet' type="text/css" />\n`.trim();for(const e of l.childNodes)n.head.appendChild(e);n.body.style.cssText='background: #222; margin: 0; padding: 0; width: 100%; height: 100%; font-family: \'Abel\', Arial, sans-serif; font-size: 16px;';const i=function useFade(e){const t=e.createElement('div');t.classList.add('ui'),t.id='app-root';const o=e.createElement('div');return o.classList.add('ui'),o.id='app-hide',o.style.cssText='position: absolute; inset: 0; z-index: 1; background: #222; opacity: 1; transition: opacity 150ms ease-in-out; pointer-events: none;',e.body.appendChild(t),e.body.appendChild(o),()=>{const t=e.querySelector('#app-hide');t&&(e.body.style.removeProperty('background'),t.style.setProperty('opacity','0'),(e.defaultView||window).setTimeout((()=>{t.remove()}),150))}}(n);let r=0;const ready=()=>{--r||(i(),t&&t())};['https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/prettify.js','https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.15.1/beautify.min.js'].map((e=>{r++;const t=o.document.createElement('script');return t.setAttribute('type','text/javascript'),t.setAttribute('src',e),t.onload=ready,t})).forEach((e=>o.document.body.appendChild(e)))};export{ComponentLink,FitBoxAlgoritms,b as FitLocks,MixDOMDebug,MixHoverSignal,MixOnEscape,MixPositionedPopup,Prettify,PrettifyDelay,RenderComponentChildren,RenderComponentPartList,RenderComponentRemoteChildren,RenderComponentWiredChildren,RenderPartList,RenderPropertyName,RenderedByComponents,I as UIApp,UIAppButton,O as UIAppHostTree,UIAppIcon,UIAppInput,UIAppInstructions,M as UIAppShowTip,S as UIAppTip,UIAppTipDisplay,UIAppTipHeading,C as UIAppTipRemote,UIAppTipSection,D as UIAppTopBar,UIAppTreeItem,w as UIFitBox,UIList,UIPopupContainer,v as UIPopupContents,UITreeNodeType,x as UIVirtualList,UIVirtualRow,y as appIcons,m as appVersion,beautify,cleanMargin,consoleLog,consoleLogItem,consoleWarn,escapeHTML,flattenTree,flattenTreeWith,getGroundingTreeNode,getItemTypeFrom,getMiniScrollableProps,getPassPhaseAndSource,getSnippetContainerProps,readComponentOneLine,renderComponentLinkTip,stringifyObject,wrapTip};
