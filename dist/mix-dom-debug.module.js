import{SignalListenerFlags as e,Context as t}from'data-signals';import{MixDOM as o,Ref as n,mixFuncsWith as s,hasContentInDefs as l,Host as i,newDef as r}from'mix-dom';import{classNames as a,parseDOMStyle as d,readDOMString as c}from'dom-types';import{MixDOM as p}from'mix-dom/camelCase';import{createMemo as u,createTrigger as f,createDataTrigger as m,numberRange as h,areEqual as g}from'data-memo';function consoleLog(e,...t){console.log(...t),e&&e.console&&e.console.log(...t)}const wrapTip=(...e)=>o.def('div',{class:a('style-ui-panel flex-col layout-gap-l'),style:'min-width: 100px;'},...e);function computeSnappedValue(e,t){return e&&e?Math.round(t/e)/(1/e):t}function flattenTree(e,t){t||(t='children');const o=[];let n,s=e,l=0;for(;n=s[l++];)o.push(n),n[t]&&(s=n[t].concat(s.slice(l)),l=0);return o}function flattenTreeWith(e,t,o){o||(o='children');const n=[];let s,l=e.map((e=>[e,null,0])),i=0;for(;s=l[i++];){const[e,r,a]=s,d=t(e,r,a);if(n.push(d),e[o]){const t=a+1;l=e[o].map((e=>[e,d,t])).concat(l.slice(i)),i=0}}return n}const y='0.2.24';var b;!function(e){e[e.Left=1]='Left',e[e.Top=2]='Top',e[e.Right=4]='Right',e[e.Bottom=8]='Bottom',e[e.Horizontal=5]='Horizontal',e[e.Vertical=10]='Vertical',e[e.None=0]='None',e[e.All=15]='All'}(b||(b={}));const cleanMargin=e=>{const t={top:0,left:0,right:0,bottom:0};if('number'==typeof e)t.top=t.left=t.bottom=t.right=e;else if(e&&e.constructor===Array)t.left=t.right=e[0]||0,t.top=t.bottom=e[1]||0;else if(e){const o=e;t.left=o.left||0,t.right=o.right||0,t.top=o.top||0,t.bottom=o.bottom||0}return t};class FitBoxAlgoritms{static fitToSize(e,t,o=b.None,n='push',s='push'){const l=Object.assign({},e);if((o&b.Horizontal)!==b.Horizontal){let e=l.left,s=l.width;'anchored'===n?[e,s]=FitBoxAlgoritms.axisFitAnchored(l.left,l.width,t.left,t.width,!(o&b.Left),!(o&b.Right)):'push'===n&&([e,s]=FitBoxAlgoritms.axisFitPush(l.left,l.width,t.left,t.width)),l.left=e,l.width=s}if((o&b.Vertical)!==b.Vertical){let e=l.top,n=l.height;'anchored'===s?[e,n]=FitBoxAlgoritms.axisFitAnchored(l.top,l.height,t.top,t.height,!(o&b.Top),!(o&b.Bottom)):'push'===s&&([e,n]=FitBoxAlgoritms.axisFitPush(l.top,l.height,t.top,t.height)),l.top=e,l.height=n}return l}static axisFitPush(e,t,o,n){t>n&&(t=n);const s=e+t,l=o+n;return s>l&&(e-=s-l),e<o&&(e=o),[e,t]}static axisFitAnchored(e,t,o,n,s=!0,l=!0){const i=o+n;let r=e,a=e+t,d=0;if(l&&a>i){d=i-a,a=i}if(s&&r+d<o){d=o-(r+d),r=o}return d>0&&l&&a+d>i&&(a=i,d=0),[r,a-r]}}const v=o.component((e=>{let t=null;const s=new n;e.state={left:0,top:0,width:0,height:0},e.listenTo('didMount',(()=>{t=new ResizeObserver(onResize);const e=s.getElement();if(e){const o=e.parentElement;t.observe(e),o&&t.observe(o)}})),e.listenTo('willUnmount',(()=>{t&&t.disconnect(),t=null}));const onResize=()=>{const t=s.getElement(),o={top:e.props.offset&&e.props.offset.top||0,left:e.props.offset&&e.props.offset.left||0,width:t?t.offsetWidth:0,height:t?t.offsetHeight:0},n=e.props.align&&e.props.align.horizontal||'left',l=e.props.align&&e.props.align.vertical||'top';'right'===n?o.left-=o.width:'center'===n&&(o.left-=.5*o.width),'bottom'===l?o.top-=o.height:'center'===l&&(o.top-=.5*o.height),resizeBy(o)},resizeBy=t=>{let o={left:0,top:0,width:0,height:0};if(e.props.getContainerRect)o=e.props.getContainerRect();else{const e=s.getElement();if(e){const t=e.parentElement;t&&(o.width=t.offsetWidth,o.height=t.offsetHeight)}}const n=cleanMargin(e.props.margin);o.left=n.left,o.width-=n.left+n.right,o.top=n.top,o.height-=n.top+n.bottom;let l=0;const i=e.props.align?e.props.align.horizontal:'left',r=e.props.align?e.props.align.vertical:'top';e.props.lockHorizontal&&(l|='left'===i?b.Left:'right'===i?b.Right:b.Horizontal),e.props.lockVertical&&(l|='top'===r?b.Top:'bottom'===r?b.Bottom:b.Vertical);const a=e.props.lockHorizontal?'anchored':'push',d=e.props.lockVertical?'anchored':'push',c=FitBoxAlgoritms.fitToSize(t,o,l,a,d);e.props.lockHorizontal?c.width='left'===i?o.left+o.width-t.left:'right'===i?t.left+t.width-o.left:c.width:c.width=o.width,e.props.lockVertical?c.height='top'===r?o.top+o.height-t.top:'bottom'===r?t.top+t.height-o.top:c.height:c.height=o.height,!e.props.onMaxSize||c.width===e.state.width&&c.height===e.state.height||e.props.onMaxSize(c.width,c.height),e.isMounted()?e.setState(c,!0,!1,null,null):e.setState(c)};return onResize(),(e,t)=>{const n=Object.assign(Object.assign({},e.style?'string'==typeof e.style?d(e.style):e.style:void 0),{position:'absolute',left:t.left+'px',top:t.top+'px',maxWidth:t.width+'px',maxHeight:t.height+'px'});return o.def('div',{className:a('m-size-fitter',e.className),_ref:s,style:n},o.Content)}})),w=o.component((e=>{e.state={refreshId:{}};const t={top:0,left:0},n={horizontal:e.props.hAlign||'center',vertical:e.props.vAlign||'center'},s=u(((e,t)=>()=>e&&e()||{top:0,left:0,width:window.innerWidth,height:window.innerHeight})),l=f((({getContainerRect:e,getElement:o,elementMargin:l,hAlign:i,vAlign:r,refreshId:a})=>{const d=s(e,a)(),c=o&&('function'==typeof o?o():o)||null;if(c&&document.body.contains(c)){const e=c.getBoundingClientRect(),o=cleanMargin(null==l?0:l);n.horizontal=i||'center',n.vertical=r||(e.top+.5*e.height>.5*d.height?'bottom':'top'),t.left=e.left+('right'===n.horizontal?-o.right+e.width:'center'===n.horizontal?.5*e.width:o.left),t.top=e.top+('top'===n.vertical?o.bottom+e.height:'center'===n.vertical?.5*e.height:-o.top)}else t.left=d.left+.5*d.width,t.top=d.top+.5*d.height,n.horizontal='center',n.vertical='center'})),i=new ResizeObserver((()=>{e.setState({refreshId:{}})}));e.listenTo('willUnmount',(()=>i.disconnect));const domDidMount=e=>{i.observe(e)};return(e,i)=>(l({getContainerRect:e.getContainerRect,getElement:e.getElement,elementMargin:e.elementMargin,hAlign:e.hAlign,vAlign:e.vAlign,refreshId:i.refreshId}),o.def('div',{class:a('ui-popup-contents layout-fit-size',e.className),style:e.style,_signals:{domDidMount}},o.def(v,{offset:t,getContainerRect:s(e.getContainerRect),align:n,margin:e.margin},o.def('div',{class:a('popup-content',e.contentClassName),style:e.contentStyle},o.Content))))})),UIPopupContainer=e=>{const t=o.def(w,{getElement:e.sourceElement,contentClassName:e.contentClassName,contentStyle:e.contentStyle,hAlign:e.horizontalAlign,vAlign:e.verticalAlign,margin:e.containerMargin,elementMargin:e.elementMargin,style:e.style},o.Content);return!e.container||e.container instanceof Node?o.def(o.Portal,{container:e.container||document.body},t):o.def(e.container,null,t)},UIVirtualRow=e=>o.def('div',{className:'ui-virtual-row',style:{position:'absolute',top:e.rowHeight*e.iRow+'px',height:e.rowHeight,width:'100%'}},o.Content),C=o.component((t=>{t.state={height:0,iStart:-1,iEnd:-1};const s=new n;let l;t.scrollToIndex=(o,n,i,r)=>{const a=s.getElement();if(!a)return;r&&(l=n=>{const finishOff=()=>r(t.getElementAt(o));n?t.listenTo('didUpdate',finishOff,null,e.OneShot):finishOff()});const d=a.scrollTop,c=o*t.props.rowHeight;(!i||c<d||c+t.props.rowHeight>d+a.clientHeight)&&a.scrollTo({top:c,behavior:n||'auto'}),d===a.scrollTop&&l&&(l(!1),l=void 0)},t.getElementAt=e=>{var o;return(null===(o=s.getElement())||void 0===o?void 0:o.querySelectorAll('.list-content .ui-virtual-row')[e-t.getLastState().iStart])||null};const i=m((()=>{let e=null;const mountResizer=o=>{e=new ResizeObserver(onRefresh),e.observe(o),t.setState({height:o.offsetHeight}),onRefresh()};s.listenTo('domDidMount',mountResizer);const unmountResizer=()=>{s.unlistenTo('domDidMount',mountResizer),s.unlistenTo('domWillUnmount',unmountResizer),e&&e.disconnect(),e=null};return s.listenTo('domWillUnmount',unmountResizer),unmountResizer})),onRefresh=()=>{const e=s.getElement(),o=(null==e?void 0:e.scrollTop)||0,n=void 0!==t.props.rowTolerance?t.props.rowTolerance:2,i=(null==e?void 0:e.offsetHeight)||0,r=t.props.nRows-1,a={iStart:Math.min(Math.max(0,Math.floor(o/t.props.rowHeight-n)),r),iEnd:Math.min(Math.floor((o+i)/t.props.rowHeight+n),r),height:(null==e?void 0:e.offsetHeight)||0},d=!g(a,t.state,1);l&&(l(d),l=void 0),d&&t.setState(a)},r=m(onRefresh,[t.props.rowHeight,t.props.nRows,t.props.rowTolerance,t.props.refreshId]),d=onRefresh;return(e,t)=>{i(!1!==e.handleResizing),r([e.rowHeight,e.nRows,e.rowTolerance,e.refreshId]);const n=e.nRows,l=h(t.iStart,t.iEnd+1).map((t=>{let s=e.renderRow(t,n,e.rowHeight);return s&&!1!==e.autoWrap?o.def(UIVirtualRow,{iRow:t,nRows:n,rowHeight:e.rowHeight,_key:e.getRowKey?e.getRowKey(t,n):t},s):s}));return o.def('div',{_ref:s,className:a('ui-virtual-list layout-scrollable style-scrollable',e.className),style:Object.assign({display:'flex',flexDirection:'column'},e.style||{}),onScroll:d},o.def('div',{className:a('list-content',e.contentClassName),style:Object.assign({position:'relative',paddingBottom:n*e.rowHeight+'px'},e.contentStyle||{})},l))}}));function UIList(e,t){const n=u(((...e)=>({}))),s=u(((e,t,...o)=>{let n=0;return t?e.filter(((e,o)=>!!t(e,o,n)&&++n)):e.slice()}));let l=s(t.props.items,t.props.filter,t.props.refreshId);const renderRow=(e,n,s)=>{const i=t.props,r=l[e];return r?o.def(i.Item,Object.assign({_key:i.keyProp?r[i.keyProp]:r,item:r},i.commonProps)):null},getRowKey=e=>t.props.keyProp&&t.props.items[e]?t.props.items[e][t.props.keyProp]:e;return(e,t)=>{var i;return l=s(e.items,e.filter,e.refreshId),o.def('div',{class:a('ui-tree-list flex-col layout-fit-size',e.className),role:'tree'},o.def(C,{_ref:e.refVirtualList,nRows:l.length,getRowKey,rowHeight:null!==(i=e.rowHeight)&&void 0!==i?i:30,renderRow,refreshId:n(l,e.commonProps,e.refreshId),className:e.listClassName}))}}var __rest$5=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};const MixPositionedPopup=(e,t)=>(t.state=Object.assign(Object.assign({},t.state),{popupOpened:!1,popupSourceElement:null}),t.showPopup=(e,o)=>{void 0!==e&&t.setInState('popupSourceElement',e);const n=t.state.popupFadeIn;o||!n?t.setInState('popupOpened',!0):!0!==t.state.popupOpened&&(t.setTimer('popupFade',(()=>{'start'===t.state.popupOpened&&(t.setTimer('popupFade',(()=>'in'===t.state.popupOpened&&t.setInState('popupOpened',!0)),n),t.setInState('popupOpened','in'))}),25),t.setInState('popupOpened','start'))},t.hidePopup=e=>{t.state.popupOpened&&(e||!t.state.popupFadeOut?t.setState({popupOpened:!1,popupSourceElement:null}):(t.setInState('popupOpened','out'),t.setTimer('popupFade',(()=>'out'===t.state.popupOpened&&t.setState({popupOpened:!1,popupSourceElement:null})),t.state.popupFadeOut)))},t.WithTooltip=o.wired((()=>({popupOpened:t.state.popupOpened,horizontalAlign:t.state.horizontalAlign,verticalAlign:t.state.verticalAlign,containerMargin:t.state.containerMargin,elementMargin:t.state.elementMargin,popupFadeIn:t.state.popupFadeIn,popupFadeOut:t.state.popupFadeOut,popupSourceEl:t.state.popupSourceElement,refreshId:t.refreshPopupId})),(e=>{if(!e.popupOpened)return null;const n=t.renderPopup?t.renderPopup():null;if(null==n)return null;const{popupOpened:s,refreshId:l}=e,i=__rest$5(e,['popupOpened','refreshId']),r='start'===s||'in'===s?e.popupFadeIn:e.popupFadeOut;return o.def(UIPopupContainer,Object.assign({container:t.popupContainer,sourceElement:e.popupSourceEl,contentClassName:a('style-shadow-overlay','out'===s||'start'===s?'style-opacity-0':'style-opacity-1'),contentStyle:r?`transition: opacity ${r}ms ease-in-out`:void 0},i),n)}),'WithTooltip'),t.addWired(t.WithTooltip),null),MixOnEscape=(e,t)=>{const onKeyDown=e=>{'Escape'===e.key&&(e.preventDefault(),e.stopPropagation(),t.sendSignal('onEscape'))};return t.useEscape=e=>(e?window.addEventListener:window.removeEventListener)('keydown',onKeyDown),null};var __rest$4=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};const x=o.remote(),T=o.mixFuncsWith(((e,t)=>{t.hoverTimeout=500;let o=!1;return t.hoverRef=new n,t.hoverRef.listenTo('domDidMount',(e=>{e.addEventListener('mouseenter',(()=>{!t.hoverDisabled&&t.setTimer('onMouseEnter',(()=>t.sendSignal('onHover',o=!0)),t.hoverTimeout)})),e.addEventListener('mouseleave',(()=>{'one-time'===t.hoverDisabled&&(t.hoverDisabled=!1),t.clearTimers('onMouseEnter'),o&&t.sendSignal('onHover',o=!1)}))})),null}),MixOnEscape,MixPositionedPopup,((e,t)=>{t.state=Object.assign(Object.assign({},t.state),{elementMargin:5,containerMargin:10,popupFadeIn:100,popupFadeOut:300}),t.popupContainer=x,t.setHovered=e=>{const o=t.hoverRef.getElement();e?t.showPopup(t.props.getPositionSource?t.props.getPositionSource(o):o):t.hidePopup(),t.useEscape(t.props.escToCloseTip&&e||!1)},t.listenTo('onHover',(e=>{e&&'one-time'===t.hoverDisabled?t.hoverDisabled=!1:t.setHovered(e)})),t.listenTo('onEscape',(()=>t.hidePopup()));const onClick=e=>{t.props.onClick&&t.props.onClick(e),!1!==t.props.clickToCloseTip&&(t.state.popupOpened?t.hidePopup():t.hoverDisabled='one-time')};return t.renderPopup=()=>'function'==typeof t.props.renderTip?t.props.renderTip(t):t.props.renderTip,t.listenTo('preUpdate',(e=>{e&&e.disableHover!==t.props.disableHover&&(t.hoverDisabled=t.props.disableHover)})),e=>{const{class:n,className:s,tag:l,renderTip:i,getPositionSource:r,escToCloseTip:d,clickToCloseTip:c,onClick:p,refreshId:u,rootRef:f}=e,m=__rest$4(e,['class','className','tag','renderTip','getPositionSource','escToCloseTip','clickToCloseTip','onClick','refreshId','rootRef']);return t.refreshPopupId=i,o.def(l,Object.assign({_ref:f?[f,t.hoverRef]:t.hoverRef,class:a(n,s),onClick},m),o.Content,o.def(t.WithTooltip))}}),null),k=['heading','code','props','state','contexts','rendered-by','wired','remote','children','renders'],M={'':null,expanded:o.def('svg',{viewBox:'0 0 10 10'},o.def('path',{d:'M 2.5,4 L 5,6 L 7.5,4',fill:'none',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'})),collapsed:o.def('svg',{viewBox:'0 0 10 10'},o.def('path',{d:'M 4,2.5 L 6,5 L 4,7.5',fill:'none',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'})),back:o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M658.8,527.9c14.4,0,26.2-11.8,26.2-26.1V292.3c0-14.4-11.8-26.2-26.2-26.2H397V135.2c0-10.6-6.4-20.1-16.2-24.2 c-9.7-4-21-1.8-28.5,5.7L90.5,378.5c-10.1,10.2-10.1,26.9,0,37l261.8,261.8c4.9,5.1,11.6,7.7,18.5,7.7c3.3,0,6.7-0.7,10-2 c9.8-4.1,16.2-13.6,16.2-24.2V527.9H658.8L658.8,527.9z',fill:'currentColor'})),forwards:o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M109.1,527.9h261.8v130.9c0,10.6,6.4,20.1,16.2,24.2c3.3,1.3,6.7,2,10,2c6.9,0,13.6-2.6,18.5-7.7l261.8-261.8 c10.1-10.1,10.1-26.8,0-37L415.6,116.7c-7.5-7.5-18.8-9.7-28.5-5.7c-9.8,4.1-16.2,13.6-16.2,24.2v130.9H109.1 c-14.4,0-26.2,11.8-26.2,26.2v209.5C82.9,516.1,94.7,527.9,109.1,527.9L109.1,527.9z',fill:'currentColor'})),console:o.def('svg',{viewBox:'0 0 10 10'},o.def('path',{d:'M 2,3 L 4,5 L 2,7',fill:'none',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'}),o.def('line',{x1:'6',x2:'8.5',y1:'8',y2:'8',stroke:'currentColor','stroke-width':'1.5','stroke-linejoin':'round','stroke-linecap':'round'})),theme:o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M386.4,50.2c-184.5,0-334,149.5-334,334s149.5,334,334,334c59.1,0,84.8-81,36.6-114.1c-29.8-20.5,18.2-83.2,70.4-83.2 c79.9,0,227,12.7,227-136.7C720.4,199.8,570.9,50.2,386.4,50.2z M148.4,401.8c-22.6,0-40.9-18.3-40.9-40.9s18.3-40.9,40.9-40.9 c22.6,0,40.9,18.3,40.9,40.9S171,401.8,148.4,401.8z M217.6,272.9c-26.2,0-47.5-21.2-47.5-47.5c0-26.2,21.2-47.5,47.5-47.5 c26.2,0,47.5,21.2,47.5,47.5C265.1,251.7,243.8,272.9,217.6,272.9z M358.6,209c-29.9,0-54.1-24.2-54.1-54.1 c0-29.9,24.2-54.1,54.1-54.1c29.9,0,54.1,24.2,54.1,54.1C412.6,184.8,388.4,209,358.6,209z M521.1,262.2c-32.1,0-58.1-26-58.1-58.1 s26-58.1,58.1-58.1c32.1,0,58.1,26,58.1,58.1S553.2,262.2,521.1,262.2z M613.1,427.1c-34.6,0-62.6-28-62.6-62.6s28-62.6,62.6-62.6 c34.6,0,62.6,28,62.6,62.6S647.7,427.1,613.1,427.1z',fill:'currentColor'})),close:o.def('svg',{viewBox:'0 0 16 16'},o.def('path',{d:'M10.1,8L13,5.1c0.6-0.6,0.6-1.5,0-2.1c-0.6-0.6-1.5-0.6-2.1,0L8,5.9L5.1,3C4.5,2.4,3.6,2.4,3,3C2.4,3.6,2.4,4.5,3,5.1L5.9,8 L3,10.9c-0.6,0.6-0.6,1.5,0,2.1c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4L8,10.1l2.9,2.9c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4 c0.6-0.6,0.6-1.5,0-2.1L10.1,8z',fill:'currentColor'})),info:o.def('svg',{viewBox:'0 0 16 16'},o.def('path',{d:'M8,15.2c-1,0-1.7-0.8-1.7-1.7v-6H4.9c0-1,1.1-1.7,3.1-1.7c1,0,1.7,0.8,1.7,1.7v6H11C11.1,14.5,9.7,15.2,8,15.2z',fill:'currentColor'}),o.def('circle',{cx:'8',cy:'2.6',r:'1.7',fill:'currentColor'})),'show-all':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M384 134.4c-177.6 0-331.2 139.2-331.2 249.6s158.4 249.6 331.2 249.6c182.4 0 331.2-153.6 331.2-249.6s-148.8-249.6-331.2-249.6zM384 576c-158.4 0-273.6-124.8-273.6-192s115.2-192 273.6-192c153.6 0 273.6 134.4 273.6 192s-120 192-273.6 192z M384 244.8c-67.2 0-124.8 62.4-124.8 139.2s57.6 139.2 124.8 139.2 124.8-62.4 124.8-139.2-57.6-139.2-124.8-139.2z',fill:'currentColor'})),'show-matched':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M744 158.4c-14.4-24-43.2-28.8-67.2-14.4l-91.2 57.6c-52.8-38.4-124.8-67.2-201.6-67.2-177.6 0-331.2 139.2-331.2 249.6 0 38.4 19.2 81.6 52.8 120l-62.4 38.4c-24 14.4-28.8 43.2-14.4 67.2 9.6 14.4 24 24 38.4 24 9.6 0 19.2 0 24-9.6l86.4-52.8c57.6 38.4 129.6 62.4 201.6 62.4 182.4 0 331.2-153.6 331.2-249.6 0-33.6-19.2-76.8-52.8-115.2l67.2-43.2c28.8-14.4 33.6-48 19.2-67.2zM110.4 384c0-67.2 115.2-192 273.6-192 57.6 0 105.6 19.2 148.8 43.2l-374.4 235.2c-28.8-28.8-48-62.4-48-86.4zM657.6 384c0 57.6-120 192-273.6 192-57.6 0-105.6-14.4-148.8-38.4l72-43.2c38.4 33.6 86.4 43.2 134.4 19.2 48-28.8 72-86.4 67.2-144l100.8-67.2c28.8 28.8 48 62.4 48 81.6z',fill:'currentColor'})),'scroll-to':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M368.2,704.9c9,9,23.5,9,32.4-0.1l182.8-185.4c14.3-14.4,4.1-38.9-16.3-38.9h-83.4V266.6c0-13.7-11.2-24.9-24.9-24.9H309.6 c-13.7,0-24.9,11.2-24.9,24.9v213.8H199c-20.4,0-30.6,24.6-16.2,39L368.2,704.9z M304.7,202h159.1c10.9,0,19.9-9,19.9-19.9c0-10.9-9-19.9-19.9-19.9H304.7c-10.9,0-19.9,9-19.9,19.9 C284.8,193,293.7,202,304.7,202z M304.7,122.4h159.1c10.9,0,19.9-9,19.9-19.9s-9-19.9-19.9-19.9H304.7c-10.9,0-19.9,9-19.9,19.9S293.7,122.4,304.7,122.4z',fill:'currentColor'})),'select-all':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M128,96c-17.7,0-32,14.3-32,32v512c0,17.7,14.3,32,32,32h512c17.7,0,32-14.3,32-32V128c0-17.7-14.3-32-32-32H128z M608,608 H160V160h448V608z M327.4,500.5c6.1,7.3,15.1,11.5,24.6,11.5c0.3,0,0.5,0,0.8,0c9.8-0.2,18.9-5,24.8-12.8l144-192 c10.6-14.1,7.7-34.2-6.4-44.8c-14.1-10.6-34.2-7.7-44.8,6.4L350.7,428.4l-54.1-64.9c-11.3-13.6-31.5-15.4-45.1-4.1 c-13.6,11.3-15.4,31.5-4.1,45.1L327.4,500.5z',fill:'currentColor'})),'select-none':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M640,96H128c-17.7,0-32,14.3-32,32v512c0,17.7,14.3,32,32,32h512c17.7,0,32-14.3,32-32V128C672,110.3,657.7,96,640,96z  M556,288L376,528c-7.4,9.8-18.8,15.8-31,16c-0.4,0-0.6,0-1,0c-11.9,0-23.1-5.3-30.8-14.4l-100-120c-14.1-17-11.9-42.3,5.1-56.4 c17-14.1,42.3-11.9,56.4,5.1l67.6,81.1L492,240c13.3-17.6,38.4-21.3,56-8C565.7,245.2,569.3,270.4,556,288z',fill:'currentColor'})),'no-selection':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M543.7,352C438,352,352,438,352,543.7s86,191.7,191.7,191.7s191.7-86,191.7-191.7S649.5,352,543.7,352z M543.7,416 c23.6,0,45.8,6.5,64.8,17.7L433.7,608.5c-11.2-19-17.7-41.2-17.7-64.8C416,473.3,473.3,416,543.7,416z M543.7,671.5 c-23.6,0-45.8-6.5-64.8-17.7l174.8-174.8c11.2,19,17.7,41.2,17.7,64.8C671.5,614.2,614.2,671.5,543.7,671.5z',fill:'currentColor'}),o.def('path',{d:'M54,32c-12.2,0-22,9.8-22,22v308c0,12.2,9.8,22,22,22h308c12.2,0,22-9.8,22-22V54c0-12.2-9.8-22-22-22H54z M326.7,147.2 L202.5,312.9c-5.1,6.8-12.9,10.8-21.4,11c-0.2,0-0.5,0-0.7,0c-8.2,0-16-3.6-21.2-9.9l-69-82.8c-9.8-11.7-8.2-29.1,3.5-38.9 c11.7-9.8,29.1-8.2,38.9,3.5l46.7,56l103.3-137.7c9.1-12.2,26.4-14.7,38.6-5.5C333.4,117.7,335.8,135,326.7,147.2z',fill:'currentColor'})),'no-filter':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M543.7,352C438,352,352,438,352,543.7s86,191.7,191.7,191.7s191.7-86,191.7-191.7S649.5,352,543.7,352z M543.7,416 c23.6,0,45.8,6.5,64.8,17.7L433.7,608.5c-11.2-19-17.7-41.2-17.7-64.8C416,473.3,473.3,416,543.7,416z M543.7,671.5 c-23.6,0-45.8-6.5-64.8-17.7l174.8-174.8c11.2,19,17.7,41.2,17.7,64.8C671.5,614.2,614.2,671.5,543.7,671.5z',fill:'currentColor'}),o.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'})),'no-info':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M543.7,352C438,352,352,438,352,543.7s86,191.7,191.7,191.7s191.7-86,191.7-191.7S649.5,352,543.7,352z M543.7,416 c23.6,0,45.8,6.5,64.8,17.7L433.7,608.5c-11.2-19-17.7-41.2-17.7-64.8C416,473.3,473.3,416,543.7,416z M543.7,671.5 c-23.6,0-45.8-6.5-64.8-17.7L653.7,479c11.2,19,17.7,41.2,17.7,64.8C671.5,614.2,614.2,671.5,543.7,671.5z',fill:'currentColor'}),o.def('path',{d:'M162.2,485.2c-32.6,0-55.8-27.9-55.8-55.8v-200H59.8c0-32.6,37.2-55.8,102.3-55.8c32.6,0,55.8,27.9,55.8,55.8v200h41.9 C264.5,461.9,218,485.2,162.2,485.2z',fill:'currentColor'}),o.def('circle',{cx:'162.2',cy:'71.8',r:'55.8',fill:'currentColor'})),filter:o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M448 384v252.16c1.28 9.6-1.92 19.84-9.28 26.56-12.48 12.48-32.64 12.48-45.12 0l-64.32-64.32c-7.36-7.36-10.56-17.28-9.28-26.56v-187.84h-0.96l-184.32-236.16c-10.88-13.76-8.32-33.92 5.44-44.8 6.080-4.48 12.8-7.040 19.84-7.040h448c7.040 0 13.76 2.56 19.84 7.040 13.76 10.88 16.32 31.040 5.44 44.8l-184.32 236.16h-0.96z',fill:'currentColor'})),'filter-expanded':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M 672,512 L 544,672 L 416,512',fill:'none',stroke:'currentColor','stroke-width':'96','stroke-linejoin':'round','stroke-linecap':'round'}),o.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'})),'filter-collapsed':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M 544,384 L 704,512 L 544,640',fill:'none',stroke:'currentColor','stroke-width':'96','stroke-linejoin':'round','stroke-linecap':'round'}),o.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'})),'filter-parents':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'}),o.def('path',{d:'M656,576c-35.9,0-66.3,23.7-76.4,56.3c-1.2-0.2-2.4-0.3-3.6-0.3H472v-99.3c36.9-10.5,64-44.5,64-84.7c0-48.5-39.5-88-88-88 s-88,39.5-88,88c0,40.2,27.1,74.2,64,84.7V656c0,13.3,10.7,24,24,24h128c1.2,0,2.4-0.1,3.6-0.3c10.1,32.6,40.5,56.3,76.4,56.3 c44.2,0,80-35.8,80-80S700.2,576,656,576z M408,448c0-22.1,17.9-40,40-40s40,17.9,40,40s-17.9,40-40,40S408,470.1,408,448z',fill:'currentColor'})),'filter-children':o.def('svg',{viewBox:'0 0 768 768'},o.def('path',{d:'M288.5,282.4v191.2c1,7.3-1.5,15-7,20.1c-9.5,9.5-24.7,9.5-34.2,0L198.5,445c-5.6-5.6-8-13.1-7-20.1V282.4h-0.7L51,103.3 c-8.2-10.4-6.3-25.7,4.1-34c4.6-3.4,9.7-5.3,15-5.3h339.7c5.3,0,10.4,1.9,15,5.3c10.4,8.2,12.4,23.5,4.1,34L289.3,282.4H288.5 L288.5,282.4z',fill:'currentColor'}),o.def('path',{d:'M656,560c-44.7,0-82.3,30.6-93,72h-91V524.3c32.5-10.2,56-40.5,56-76.3c0-44.2-35.8-80-80-80s-80,35.8-80,80 c0,35.8,23.5,66.1,56,76.3V656c0,13.3,10.7,24,24,24h115c10.7,41.4,48.3,72,93,72c52.9,0,96-43.1,96-96S708.9,560,656,560z M656,699.6c-24.1,0-43.6-19.6-43.6-43.6s19.6-43.6,43.6-43.6s43.6,19.6,43.6,43.6S680.1,699.6,656,699.6z',fill:'currentColor'})),'item-selected':o.def('svg',{viewBox:'0 0 10 10'},o.def('circle',{r:2,cx:5,cy:5,fill:'currentColor'})),'item-deselected':o.def('svg',{viewBox:'0 0 10 10'},o.def('circle',{r:1.6,cx:5,cy:5,strokeWidth:.8,stroke:'currentColor',fill:'none'}))};var __rest$3=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};function UIAppIcon(e){const{iconName:t,iconSize:n,className:s}=e,l=__rest$3(e,['iconName','iconSize','className']);return o.def('span',Object.assign({},l,{className:a('ui-icon style-ui-icon flex-no-shrink',n&&'size-'+n,s)}),M[t])}var __rest$2=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};const UIAppButton=(e,t)=>{const onClick=e=>{t.props.onPress&&t.props.onPress(e),t.props.onClick&&t.props.onClick(e)},onKeyDown=e=>{!t.props.onPress||' '!==e.key&&'Enter'!==e.key||t.props.disabled||(e.preventDefault(),t.props.onPress(e)),t.props.onKeyDown&&t.props.onKeyDown(e)};return e=>{const{look:t,size:n,invisible:s,iconName:l,iconClassName:i,className:r,disabled:d,onPress:c,onClick:p,onKeyDown:u,toggled:f}=e,m=__rest$2(e,['look','size','invisible','iconName','iconClassName','className','disabled','onPress','onClick','onKeyDown','toggled']);return o.def(T,Object.assign({},m,{tag:'button',disabled:!!(s||d&&'false'!==d)||void 0,onKeyDown,onClick,className:a('ui-app-button style-ui-button style-ui-focusable','focusable-look-'+(t||'edge'),void 0!==f?f?'button-on':'button-off':void 0,n&&'size-'+n,s&&'layout-no-pointer style-opacity-0',r)}),void 0!==l?o.def(UIAppIcon,{iconName:l,className:i,iconSize:'narrow'!==n?n:void 0}):null,o.Content)}};var __rest$1=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};const UIAppInput=(e,t)=>{const n=new o.Ref,onInput=e=>{if(t.props.onInput&&t.props.onInput(e),t.props.onValue){const e=n.getElement();e&&t.props.onValue(e.value)}},onKeyDown=e=>{if(t.props.onKeyDown&&t.props.onKeyDown(e),'Escape'===e.key&&t.props.escToClearInput){const e=n.getElement();e&&e.value&&(e.value='',t.props.onValue&&t.props.onValue(''))}};return e=>{const{look:t,escToClearInput:s,className:l,onKeyDown:i,rootRef:r,onInput:d}=e,c=__rest$1(e,['look','escToClearInput','className','onKeyDown','rootRef','onInput']);return o.def(T,Object.assign({},c,{rootRef:n,onKeyDown,onInput,tag:'input',className:a('ui-app-input style-ui-input style-ui-focusable','focusable-look-'+(t||'edge'),l)}))}};function stringifyObject(e,t,o=1){if(!e||'object'!=typeof e)return'string'==typeof e?'"'+e+'"':''+e;if(Array.isArray(e))return'['+(o?e.map((e=>stringifyObject(e,!1,o-1))):e.toString())+']';let n='';if(!o)return''+e;o--;for(const s in e)n+=(t?'\n    ':' ')+s+': '+(o?stringifyObject(e[s],!1,o):'string'==typeof e[s]?'"'+e[s]+'"':''+e[s])+',';return n&&(n=n.slice(0,n.length-1)),'{'+n+(t&&n?'\n':' ')+'}'}const Prettify=e=>{const t=a('style-ui-code prettyprint',e.className);return window.PR?o.defHTML(window.PR.prettyPrintOne(e.code),e.tag||'code',{className:t,style:e.style}):o.def(e.tag||'code',{class:t,style:e.style},e.code)},PrettifyDelay=(e,t)=>{t.state={};const n=f((()=>{t.state.isReady&&t.setState({isReady:!1}),t.setTimer('reset',(()=>t.setState({isReady:!0})),t.props.delay||100)}),void 0,'shallow');return(e,t)=>{n([e.resetId,e.origCode]);const s=a('style-ui-code prettyprint',e.className),l=(e.prePrettifier?e.prePrettifier(e.origCode):e.origCode).trim();return t.isReady&&window.PR?o.defHTML(window.PR.prettyPrintOne(l),e.tag||'code',{className:s,style:e.style}):o.defHTML(l,e.tag||'code',{className:s,style:e.style})}};function escapeHTML(e){return window.PR?e.replace(/\&(?!(\w+;))/g,'&amp;').replace(/</g,'&lt;'):e}function beautify(e){return window.exports&&window.exports.js_beautify?window.exports.js_beautify(e):e}function getMiniScrollableProps(e){return{className:'layout-scrollable style-scrollable'+(e?' '+e:''),style:'max-width: 100%; max-height: 250px'}}const renderComponentLinkTip=()=>wrapTip(o.def('div',null,'Scroll and focus to the target.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),'/',o.def('b',null,'Alt'),' to open details popup instead.',o.def('br',null),' - Click with ',o.def('b',null,'Shift'),' to log into console instead.')),renderUIAppTipSectionTip=()=>wrapTip(o.def('div',null,'Toggle the section visibility.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),'/',o.def('b',null,'Alt'),' to only show this section or all.')),renderConsoleTip=()=>wrapTip(o.def('div',null,'Click to log in console.')),UIAppTipSection=(e,t,n)=>{t.state={hiddenSections:[]},n.listenToData('settings.hiddenTipSections',(e=>{t.setState({hiddenSections:e})}),[t.state.hiddenSections]);const onSectionClick=e=>{let o=t.state.hiddenSections.slice();const s=t.props.type;if(e.ctrlKey||e.altKey||e.metaKey)o=o.length+1!==k.length||o.includes(s)?k.filter((e=>e!==s)):[];else{const e=o.indexOf(s);-1!==e?o.splice(e,1):o.push(s)}n.setInData('settings.hiddenTipSections',o)},onPressLink=e=>{t.props.onItemLink&&void 0!==t.props.idToScroll&&t.props.onItemLink(t.props.idToScroll,e.shiftKey?'log':e.ctrlKey||e.altKey||e.metaKey?'details':'focus')},onLog=()=>{consoleLog(t.props.debugInfo,'MixDOMDebug: Log info',Object.assign({},t.props.debugTarget))};return(e,t)=>{const n=!t.hiddenSections.includes(e.type),s=void 0===e.useOverflow?void 0!==e.extraTitle||void 0!==e.afterTitle:e.useOverflow;return o.def('aside',null,o.def('h3',{class:a('style-ui-heading',e.debugInfo&&'flex-row')},o.def(UIAppButton,{look:'transparent',className:a(s&&'style-text-ellipsis',!n&&'style-dimmed'),renderTip:renderUIAppTipSectionTip,onPress:onSectionClick},o.def(Title,{title:e.title,extraTitle:e.extraTitle,afterTitle:e.afterTitle,idToScroll:e.idToScroll,onPress:onPressLink})),e.debugInfo?o.def('span',{class:'flex-grow'}):null,e.debugInfo?o.def(UIAppButton,{look:'transparent',iconName:'console',onPress:onLog,renderTip:renderConsoleTip}):null),n?o.def(o.WithContent,null,o.def('div',Object.assign({},!1!==e.useDefaultLimits?getMiniScrollableProps('style-ui-mini-panel'):{className:'style-ui-mini-panel'}),o.Content)):null)}},UIAppTipHeading=(e,t,n)=>{const onPressLink=e=>{t.props.onItemLink&&void 0!==t.props.idToScroll&&t.props.onItemLink(t.props.idToScroll,e.shiftKey?'log':e.ctrlKey||e.altKey||e.metaKey?'details':'focus')},onPressClose=e=>{t.props.onItemLink&&t.props.onItemLink(null,'details-break')},onHistoryPrev=e=>{t.props.onHistory&&t.props.onHistory(t.props.iHistory?Math.max(t.props.iHistory-1,0):0)},onHistoryNext=e=>{var o;t.props.onHistory&&t.props.onHistory(null!=t.props.iHistory?Math.min(t.props.iHistory+1,(null===(o=t.props.history)||void 0===o?void 0:o.length)||0):0)};return e=>{const t=void 0===e.useOverflow?void 0!==e.extraTitle||void 0!==e.afterTitle:e.useOverflow;return o.def('aside',null,o.def('h2',{class:'style-ui-heading flex-row flex-align-items-baseline layout-gap-m'},e.history&&e.history[1]?e.history[2]?o.def(o.Fragment,null,o.def(UIAppButton,{iconName:'back',look:'transparent',size:'large',className:'flex-align-self-center',onPress:onHistoryPrev,disabled:0===e.iHistory}),o.def(UIAppButton,{iconName:'forwards',look:'transparent',size:'large',className:'flex-align-self-center',onPress:onHistoryNext,disabled:e.iHistory===e.history.length-1})):o.def(UIAppButton,{iconName:1===e.iHistory?'back':'forwards',look:'transparent',size:'large',className:'flex-align-self-center',onPress:1===e.iHistory?onHistoryPrev:onHistoryNext}):null,o.def('span',{class:'flex-grow'}),o.def('span',{class:a('flex-row flex-align-items-baseline layout-gap-l',t&&'style-text-ellipsis')},o.def(Title,{title:e.title,extraTitle:e.extraTitle,afterTitle:e.afterTitle,idToScroll:e.idToScroll,onPress:onPressLink})),o.def('span',{class:'flex-grow'}),o.def(UIAppButton,{iconName:'close',look:'transparent',size:'large',className:'flex-align-self-center',onPress:onPressClose})),o.def(o.WithContent,null,o.def('div',Object.assign({},!1!==e.useDefaultLimits?getMiniScrollableProps('style-ui-mini-panel'):{className:'style-ui-mini-panel'}),o.Content)))}};function Title(e){return e.idToScroll?o.def(o.Fragment,null,void 0!==e.extraTitle?o.def(o.Fragment,null,e.title,': '):null,o.def(UIAppButton,{look:'edge',className:'style-text-ellipsis',onPress:e.onPress,renderTip:renderComponentLinkTip},void 0!==e.extraTitle?e.extraTitle:e.title),e.afterTitle):o.def(o.Fragment,null,e.title,e.extraTitle,e.afterTitle)}function readComponentOneLine(e,t,n){if('boundary'===e.type)return o.def(o.Fragment,null,o.def(ComponentLink,{name:e.def.tag.name||'Anonymous',onPress:t||void 0}),o.def(Prettify,{code:e.def.tag.toString(),className:'style-text-ellipsis'}));let s,l;e.def.getRemote?(s='Remote pass',l=e.def.getRemote().boundary):(s='Content pass',l=e.boundary&&e.boundary.sourceBoundary);const i=l&&l._outerDef.tag.name||'Anonymous';return o.def(o.Fragment,null,n?null:o.def('span',{_key:'pass',class:'style-color-dim'},t?o.def(ComponentLink,{name:s,onPress:t}):s),o.def('span',{_key:'from',class:'style-color-dim'},' from '),o.def('b',null,i))}function getGroundingNode(e){let t=e;for(;t=t.parent;)switch(t.type){case'pass':case'boundary':return t}return null}function ComponentLink(e){return e.onPress?o.def(UIAppButton,{look:'edge',size:'narrow',className:e.className,onPress:e.onPress,renderTip:renderComponentLinkTip},o.def('b',null,e.name)):o.def('b',null,e.name)}function RenderComponentPartList(e){var t;const n='contexts'===e.part,s=n?(null===(t=e.component.contextAPI)||void 0===t?void 0:t.getContexts())||{}:e.component[e.part]||{},l=Object.keys(s);return void 0===l[0]?null:o.def('ul',{class:'style-ui-list'},l.map((e=>o.def('li',{_key:e,class:'flex-row flex-align-items-baseline layout-gap-l'},o.def(RenderPropertyName,{bold:!0},e,': '),o.def(Prettify,{code:n?'Context':beautify(stringifyObject(s[e],!1,2)),tag:'pre',className:'style-text-ellipsis'})))))}function RenderPropertyName(e){return o.def('span',{class:a('style-color-dim layout-inline-block flex-no-shrink',e.italic&&'style-text-italic',e.bold&&'style-text-bold'),style:'min-width: 100px;'},o.Content)}function RenderComponentWiredChildren(e){if(!e.wired.size)return null;let t=-1;return o.def('ul',{class:'style-ui-list'},[...e.wired].map((n=>n.api&&n.api.components.size?[...n.api.components].map((n=>o.def('li',{_key:++t,class:'flex-row flex-align-items-baseline layout-gap-l'},o.def(RenderComponentChild,{treeNode:n.boundary.treeNode,onItemLink:e.onItemLink,index:t,childText:'Wired'})))):null)))}function RenderComponentRemoteChildren(e){const t=e.remote,n=e.remotePasses||t.getHost().findTreeNodes(['pass'],0,!1,(e=>e.def.getRemote&&e.def.getRemote()===t));return n[0]?o.def('ul',{class:'style-ui-list'},[...n].map(((t,n)=>o.def('li',{_key:t,class:'flex-row flex-align-items-baseline layout-gap-l'},o.def(RenderComponentChild,{treeNode:t,onItemLink:e.onItemLink,index:n,childText:'Pass'}))))):null}function RenderComponentChildren(e){const t=e.treeNode.boundary;return t&&t.innerBoundaries[0]?o.def('ul',{class:'style-ui-list'},t.innerBoundaries.map(((t,n)=>o.def('li',{_key:n,class:'flex-row flex-align-items-baseline layout-gap-l'},o.def(RenderComponentChild,{treeNode:t.treeNode,onItemLink:e.onItemLink,index:n}))))):null}const RenderComponentChild=(e,t)=>{const onPress=e=>t.props.onItemLink&&t.props.onItemLink(t.props.treeNode,e.shiftKey?'log':e.ctrlKey||e.altKey||e.metaKey?'details':'focus');return e=>o.def(o.Fragment,null,o.def(RenderPropertyName,{italic:!0},e.childText||'Child',' ',void 0===e.index?'':'#'+(e.index+1),': '),readComponentOneLine(e.treeNode,onPress))},RenderedByComponents=(e,t)=>{var n,s,l;t.setConstantProps({treeNode:!0});const i=t.props.treeNode,r=(null===(n=i.sourceBoundary)||void 0===n?void 0:n.treeNode)||null,a='pass'===i.type?i:null,d=a?a.def.getRemote?a.def.getRemote().boundary.treeNode:(null===(l=null===(s=a.def.contentPass)||void 0===s?void 0:s.sourceBoundary)||void 0===l?void 0:l.treeNode)||null:null;let c=[];const p=new Map,u=f((()=>{let e=getGroundingNode(i);for(;e&&e!==r&&(c.push(e),!e.def.getRemote||e.def.getRemote().boundary.treeNode!==r);)e=getGroundingNode(e);c.reverse();const o=new Set(p.keys());for(const e of[...[r,d].filter((e=>e)),...c])e&&(p.set(e,p.get(e)||(o=>{t.props.onItemLink&&t.props.onItemLink(e,o.shiftKey?'log':o.ctrlKey||o.altKey||o.metaKey?'details':'focus')})),o.delete(e));for(const e of o)p.delete(e)})),m={class:'flex-row flex-align-items-baseline layout-gap-l'};return e=>(u(e.iUpdate),r||c[0]?o.def(UIAppTipSection,{type:'rendered-by',title:'Rendered by component'},o.def('ul',{class:'style-ui-list'},d?o.def('li',Object.assign({},m),o.def(RenderPropertyName,{italic:!0},'Pass from: '),readComponentOneLine(d,p.get(d))):null,r?o.def('li',Object.assign({},m),o.def(RenderPropertyName,{italic:!0},'Source: '),readComponentOneLine(r,p.get(r))):null,c.map((e=>o.def('li',Object.assign({},m,{_key:e.boundary.bId}),o.def(RenderPropertyName,{italic:!0},'Through: '),readComponentOneLine(e,p.get(e))))))):null)},UITreeNodeType=(e,t)=>{const renderConceptTip=()=>wrapTip(o.def('div',null,'Filter by view by treeNode type: ',o.def('b',null,t.props.item.treeNode.type||'empty'),'.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),'/',o.def('b',null,'Alt'),' to only filter this type.'));let n=null;const onRowClick=e=>{('click'!==e.type||!n||e.clientX===n[0]&&e.clientY===n[1])&&(t.props.onSelectItem&&t.props.onSelectItem(e),t.props.onTipPresence&&t.props.onTipPresence(t.props.item.treeNode,'hoverable',!1)),n=null},onRowMouseDown=e=>{n=[e.clientX,e.clientY]},onRowMouseEnter=e=>{t.props.onTipPresence&&t.props.onTipPresence(t.props.item.treeNode,'hoverable',!0)},onRowMouseLeave=e=>{t.props.onTipPresence&&t.props.onTipPresence(t.props.item.treeNode,'hoverable',!1)};return(e,t)=>{const n=e.item,s=n.treeNode;let l=s.type,i=null;switch(s.type){case'dom':i=o.def(Prettify,{code:escapeHTML(n.description),className:'style-text-ellipsis'});break;case'pass':case'boundary':i=readComponentOneLine(s);break;case'portal':i=o.def(o.Fragment,null,o.def('span',{class:'style-color-dim'},'Portal to '),o.def(Prettify,{code:escapeHTML(n.description),className:'style-text-ellipsis'}));break;case'root':i=o.def(o.Fragment,null,o.def('span',{class:'style-color-dim'},'Root container '),o.def(Prettify,{code:escapeHTML(n.description),className:'style-text-ellipsis'}));break;case'host':i=o.def(o.Fragment,null,o.def('span',{class:'style-color-dim'},'Nested host'));break;case'':i=o.def(o.Fragment,null,o.def('span',{class:'style-color-dim'},'Empty'))}return o.def('div',{class:a('flex-row flex-align-items-center flex-grow layout-overflow-hidden layout-gap-m layout-fit-height',e.className)},o.def('span',{class:a('description layout-fit-height flex-row flex-align-items-center flex-grow layout-overflow-hidden',e.displayClassName),onMouseEnter:onRowMouseEnter,onMouseLeave:onRowMouseLeave,onMouseDown:onRowMouseDown,onClick:onRowClick},o.def('div',{class:'layout-gap-m flex-row flex-align-items-baseline flex-grow layout-overflow-hidden'},i)),o.def(UIAppButton,{look:'filled',className:a('type style-ui-concept style-fill-app-type-'+l,e.conceptClassName),onPress:e.onSelectConcept,renderTip:renderConceptTip},l||'empty'))}};function UIAppTreeItem(e,t){t.state={};const onToggle=e=>{t.props.toggleCollapsed&&t.props.toggleCollapsed(t.props.item,e.shiftKey?'level':e.ctrlKey||e.metaKey?'siblings':e.altKey?'chain':'self')},onSelect=e=>{t.props.toggleSelected&&t.props.toggleSelected(t.props.item,e.shiftKey?'level':e.ctrlKey||e.metaKey?'siblings':e.altKey?'reset':'self')},onSelectConcept=e=>{t.props.toggleConcept&&t.props.toggleConcept(t.props.item.treeNode.type,e.ctrlKey||e.altKey||e.metaKey)},onToggleTip=e=>{t.props.onToggleTip&&t.props.onToggleTip(t.props.item.treeNode)},onViewInConsole=e=>{const o=t.props.item;switch(o.treeNode.type){case'boundary':consoleLog(t.props.debugInfo,'MixDOMDebug: Log component',o.treeNode.boundary.component);break;case'root':case'dom':case'boundary':consoleLog(t.props.debugInfo,'MixDOMDebug: Log DOM element',o.treeNode.domNode);break;case'host':consoleLog(t.props.debugInfo,'MixDOMDebug: Log nested host',o.treeNode.def.host);break;default:consoleLog(t.props.debugInfo,'MixDOMDebug: Log treeNode',o.treeNode)}};t.listenTo('didMount',(()=>{t.props.animate&&t.setTimer(null,(()=>t.setState({animFinished:!0})),25)}));const renderToggleTip=()=>wrapTip(o.def('div',null,'Click to collapse/uncollapse the item.',o.def('br',null),' - Click with ',o.def('b',null,'Shift'),' to toggle all items in the same level.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),' to toggle all siblings.',o.def('br',null),' - Click with ',o.def('b',null,'Alt'),' to toggle between expanding all or only this item and its parents and children.')),renderSelectTip=()=>wrapTip(o.def('div',null,'Click to select/deselect this item.',o.def('br',null),' - Click with ',o.def('b',null,'Shift'),' to toggle all items in the same level.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),' to toggle all siblings.',o.def('br',null),' - Click with ',o.def('b',null,'Alt'),' to reset selection to this item.')),renderConsoleTip=()=>wrapTip(o.def('div',null,'Click to log the item in console.')),renderTipTip=()=>wrapTip(o.def('div',null,'Click to open the details popup.'));return(e,t)=>{const n=6*e.item.level,s=`style-stroke-app-type-${e.item.treeNode.type||'empty'}`;return o.def('div',{role:'treeitem',class:a('ui-app-tree-item layout-fit-height layout-margin-m-x flex-row flex-align-items-center layout-gap-m style-hoverable',e.dimmed&&'style-disabled',e.animate&&(t.animFinished?'style-opacity-1':'style-opacity-0')),style:{marginLeft:n+'px'}},o.def('div',{class:a('level-indicator',e.selected?'style-dimmed':'style-disabled',e.selected&&s),style:`position: absolute; left: 0; height: 100%; width: ${n}px; background: linear-gradient(-160deg, currentColor, ${e.selected?'35%':'15%'}, transparent, 100%, transparent);`}),o.def(UIAppButton,{onPress:onSelect,iconName:e.selected?'item-selected':'item-deselected',className:'flex-align-self-center',iconClassName:a(!e.selected&&'style-dimmed',s),look:'transparent',renderTip:renderSelectTip}),o.def(UIAppButton,{onPress:onToggle,invisible:null===e.collapsed,disabled:null===e.collapsed||void 0,iconName:null===e.collapsed?'':e.collapsed?'collapsed':'expanded',look:'transparent',renderTip:renderToggleTip}),o.def(UITreeNodeType,{item:e.item,iUpdate:e.iUpdate,displayClassName:e.dimmed?'style-greyed':void 0,conceptClassName:e.dimmed?'style-greyed':void 0,onSelectItem:onSelect,onSelectConcept,onTipPresence:e.onTipPresence}),o.def(UIAppButton,{onPress:onToggleTip,iconName:'info',look:'transparent',renderTip:renderTipTip}),o.def(UIAppButton,{onPress:onViewInConsole,iconName:'console',look:'transparent',renderTip:renderConsoleTip}))}}const UIAppTipDisplay=(e,t)=>{t.state={history:[t.props.item],iHistory:0};const onKeyDown=e=>{'Escape'===e.key&&t.props.escToCloseTip&&t.props.onItemLink&&t.props.onItemLink(null,'details-break')};t.listenTo('didMount',(()=>document.addEventListener('keydown',onKeyDown))),t.listenTo('willUnmount',(()=>document.removeEventListener('keydown',onKeyDown))),t.listenTo('preUpdate',((e,o)=>{if(e&&(e.item!==t.props.item||e.reselectRefreshId!==t.props.reselectRefreshId))if(t.props.item===t.state.history[t.state.iHistory]);else if(t.props.item===t.state.history[t.state.iHistory+1])t.setInState('iHistory',t.state.iHistory+1);else{const e=t.state.history.slice(0,t.state.iHistory+1).concat([t.props.item]);t.setState({history:e,iHistory:e.length-1})}})),t.onHistory=e=>{t.setInState('iHistory',Math.min(Math.max(0,e),t.state.history.length-1)),t.props.onHistoryItem&&t.props.onHistoryItem(t.state.history[t.state.iHistory])};const getHeadingProps=()=>({idToScroll:(t.state.history[t.state.iHistory]||t.props.item).treeNode,onItemLink:t.props.onItemLink,history:t.state.history,iHistory:t.state.iHistory,onHistory:t.onHistory}),domDidMount=e=>{e.addEventListener('mouseenter',(()=>{var e;return null===(e=t.props.tipComponent)||void 0===e?void 0:e.setHovered(!0)})),e.addEventListener('mouseleave',(()=>{var e;return null===(e=t.props.tipComponent)||void 0===e?void 0:e.setHovered(!1)})),t.setTimer(null,(()=>t.setState({isAlive:!0})),1)},n={className:'layout-border-box',style:'max-width: 800px; max-height: 50vh;'},onTipEnter=()=>t.props.onTipPresence&&t.props.onTipPresence(t.props.item.treeNode,'popup',!0),onTipLeave=()=>t.props.onTipPresence&&t.props.onTipPresence(t.props.item.treeNode,'popup',!1);return(e,s)=>{var l,i;const r=t.state.history[t.state.iHistory]||t.props.item,d=r.treeNode;let c=!0,p=null,u=null,f=o.readDOMString(d,!1,0,null);switch(d.type){case'dom':{const e=d.def.tag;let t='';e?t=r.description:f&&(f='"'+f+'"'),p=o.def(UIAppTipHeading,Object.assign({title:e?(d.domNode&&void 0!==d.domNode.ownerSVGElement?'SVG':'HTML')+' element':'Text node',extraTitle:o.def(Prettify,{code:t?escapeHTML(t):r.description})},getHeadingProps()));break}case'boundary':{const t=d.def.tag,n=d.boundary.component,s='Remote'===n.constructor.MIX_DOM_CLASS?n.getHost().findTreeNodes(['pass'],0,!1,(e=>e.def.getRemote&&e.def.getRemote()===n)):null;p=o.def(o.Fragment,null,o.def(UIAppTipHeading,Object.assign({_key:'heading',title:'Remote'===t.MIX_DOM_CLASS?'Remote component':n.contextAPI?o.def(o.Fragment,null,'Component ',o.def('span',{class:'style-text-small'},'(with ContextAPI)')):'Component',extraTitle:o.def('b',{class:'style-color-emphasis'},r.name||'Anonymous')},getHeadingProps())),o.def(UIAppTipSection,{_key:'code',type:'code',title:'JS code',useDefaultLimits:!1},o.def(PrettifyDelay,Object.assign({origCode:t.toString(),prePrettifier:beautify,tag:'pre'},getMiniScrollableProps()))),n.props&&void 0!==Object.keys(n.props)[0]?o.def(UIAppTipSection,{_key:'props',type:'props',title:'Props',debugInfo:e.debugInfo,debugTarget:n.props},o.def(RenderComponentPartList,{component:n,part:'props'})):null,n.state&&void 0!==Object.keys(n.state)[0]?o.def(UIAppTipSection,{_key:'state',type:'state',title:'State',debugInfo:e.debugInfo,debugTarget:n.state},o.def(RenderComponentPartList,{component:n,part:'state'})):null,n.contextAPI&&void 0!==Object.keys(n.contextAPI.getContexts())[0]?o.def(UIAppTipSection,{_key:'contexts',type:'contexts',title:'Contexts',debugInfo:e.debugInfo,debugTarget:null===(l=n.contextAPI)||void 0===l?void 0:l.getContexts()},o.def(RenderComponentPartList,{component:n,part:'contexts'})):null),u=o.def(o.Fragment,null,n.wired&&n.wired.size?o.def(UIAppTipSection,{_key:'wired',type:'wired',title:'Wired components'},o.def(RenderComponentWiredChildren,{wired:n.wired,onItemLink:e.onItemLink})):null,s&&s[0]?o.def(UIAppTipSection,{_key:'remote',type:'remote',title:'Remote passes'},o.def(RenderComponentRemoteChildren,{remote:n,remotePasses:s,onItemLink:e.onItemLink})):null,d.boundary.innerBoundaries[0]?o.def(UIAppTipSection,{_key:'children',type:'children',title:'Inner components'},o.def(RenderComponentChildren,{treeNode:d,onItemLink:e.onItemLink})):null);break}case'root':c=!1,p=o.def(UIAppTipHeading,Object.assign({title:'Root container',extraTitle:r.description?o.def(Prettify,{code:escapeHTML(r.description)}):null},getHeadingProps()),o.def('ul',{class:'style-ui-list'},o.def('li',null,'Contains the debugged host.')));break;case'host':p=o.def(UIAppTipHeading,Object.assign({title:'Nested host'},getHeadingProps()),o.def('ul',{class:'style-ui-list'},o.def('li',null,'Contains another host instance.')));break;case'pass':p=o.def(UIAppTipHeading,Object.assign({title:d.def.getRemote?'Remote pass':'Content pass',afterTitle:readComponentOneLine(d,null,!0)},getHeadingProps())),u=o.def(o.Fragment,null,(null===(i=d.boundary)||void 0===i?void 0:i.innerBoundaries[0])?o.def(UIAppTipSection,{_key:'children',type:'children',title:'Inner components'},o.def(RenderComponentChildren,{treeNode:d,onItemLink:e.onItemLink})):null);break;case'portal':p=o.def(UIAppTipHeading,Object.assign({title:'Portal container',afterTitle:o.def(Prettify,{code:escapeHTML(r.description)})},getHeadingProps()));break;case'':p=o.def(UIAppTipHeading,Object.assign({title:'Empty'},getHeadingProps()),o.def('ul',{class:'style-ui-list'},o.def('li',null,'Empty treeNodes should not typically end up in the grounded tree.')))}return o.def('div',{class:a('style-ui-panel layout-scrollable style-scrollable flex-col layout-gap-m',n.className,s.isAlive&&'layout-auto-pointer'),style:n.style,_signals:{domDidMount},onMouseEnter:onTipEnter,onMouseLeave:onTipLeave},p,c?o.def(RenderedByComponents,{treeNode:d,iUpdate:e.iUpdate,onItemLink:e.onItemLink}):null,u,'root'!==d.type&&f?o.def(UIAppTipSection,{type:'renders',title:'Renders in DOM',useDefaultLimits:!1},o.def(PrettifyDelay,Object.assign({origCode:f.replace(/\t/g,'    '),prePrettifier:escapeHTML,tag:'pre'},getMiniScrollableProps()))):null)}},I=s(MixPositionedPopup,((e,t)=>{t.state=Object.assign(Object.assign({},t.state),{item:t.props.item,elementMargin:5,containerMargin:10,popupFadeIn:100,popupFadeOut:300});const onHistoryItem=e=>{t.setState({popupSourceElement:t.props.getSourceElement?t.props.getSourceElement(e.id):null})};return t.popupContainer=x,t.renderPopup=()=>t.state.item?o.def(UIAppTipDisplay,{item:t.state.item,iUpdate:t.props.iUpdate,onItemLink:t.props.onItemLink,debugInfo:t.props.debugInfo,reselectRefreshId:t.props.reselectRefreshId,onHistoryItem,onTipPresence:t.props.onTipPresence,escToCloseTip:!0}):null,t.listenTo('preUpdate',((e,o,n)=>{const s=t.props;if(e&&(e.item!==s.item||e.iUpdate!==s.iUpdate||e.onItemLink!==s.onItemLink||e.debugInfo!==s.debugInfo||e.reselectRefreshId!==s.reselectRefreshId||e.onTipPresence!==s.onTipPresence||o&&o.popupSourceElement!==t.state.popupSourceElement)&&(t.refreshPopupId={}),e&&e.item!==s.item)if(s.item){const e=s.getSourceElement?s.getSourceElement():null;t.setState({item:s.item,popupSourceElement:e}),t.showPopup()}else t.hidePopup();o&&o.popupOpened&&!t.state.popupOpened&&t.setState({item:null,popupSourceElement:null})})),()=>o.def(t.WithTooltip,null)}),null),S={boundary:'[boundary]',dom:'[dom]',root:'[root] root container',host:'[host] nested host',pass:'[pass] content pass from','pass-remote':'[pass] remote pass from',portal:'[portal] portal to','':'[empty]'};function matchesFilter(e,t){return t&&t.some((t=>t.every((t=>{var o;return e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||(S[(null===(o=e.treeNode.def)||void 0===o?void 0:o.getRemote)?'pass-remote':e.treeNode.type]||'').includes(t)}))))}function isItemWithinCollapsed(e,t){let o=e.parent;for(;o;){if(t.includes(o.id))return!0;o=o.parent}return!1}function findItemsIdsBy(e,t,o,n){var s,l;const i=o.indexOf(e.id),r=-1===i;switch(t){case'level':{const t=e.level,s=n.filter((e=>e.level===t)).map((e=>e.id));return r?[...o,...s.filter((e=>!o.includes(e)))]:o.filter((e=>!s.includes(e)))}case'siblings':{const t=(null===(l=null===(s=e.parent)||void 0===s?void 0:s.children)||void 0===l?void 0:l.map((e=>e.id)))||[e.id];return r?[...o,...t.filter((e=>!o.includes(e)))]:o.filter((e=>!t.includes(e)))}case'chain':case'parents':{const s=[e.id];let l=e.parent;for(;l;)s.push(l.id),l=l.parent;if('chain'===t){let t,o=e.children||[],n=0;for(;t=o[n++];)s.push(t.id),t.children&&(o=t.children.concat(o.slice(n)),n=0)}const i=n.filter((e=>!s.includes(e.id))).map((e=>e.id));return o.length!==i.length||o.some((e=>s.includes(e)))?i:[]}case'reset':return r||1!==o.length?[e.id]:[];default:return o=o.slice(),r?o.push(e.id):o.splice(i,1),o}}const O=function DebugHost(t,n,s){var i;n.iMatchCycle=-1,n.state={host:null,debugSettings:null,debugLive:null,selected:[],collapsed:[],tipItem:null,filterSplits:null,showCollapsed:!1,showParents:!1,showChildren:!1,ignoreSelection:!1,ignoreFilter:!1,ignoreTip:!1,hideUnmatched:!1,reselectRefreshId:{}},s.listenToData('debug.host','debug.settings','debug.live','settings',((e,t,o,s)=>{const l=s||Object.assign({filter:''},n.state),i=l.filter.replace(/\,/g,' ').trim()?l.filter.split(',').map((e=>e.trim().split(' ').map((e=>e.trim().toLowerCase())).filter((e=>e)))).filter((e=>void 0!==e[0])):null;n.setState({host:e,debugSettings:t,debugLive:o,filterSplits:i&&void 0!==i[0]&&i||null,showCollapsed:l.showCollapsed,showParents:l.showParents,showChildren:l.showChildren,hideUnmatched:l.hideUnmatched,ignoreFilter:l.ignoreFilter,ignoreSelection:l.ignoreSelection,ignoreTip:l.ignoreTip})}),[n.state.host,n.state.debugSettings,n.state.debugLive]);const r=new o.Ref,d=u(((e,t)=>({debugInfo:e,animate:!0,iUpdate:t,toggleCollapsed,toggleSelected,toggleConcept,onToggleTip,onTipPresence})));u(((...e)=>({})));const p=u(((e,t)=>{if(!e)return[];const o=flattenTreeWith([e.groundedTree],((e,t,o)=>{let n='',s='';switch(e.type){case'boundary':s=e.def.tag?e.def.tag.name:'',n=e.def.tag?e.def.tag.toString():'';break;case'dom':{s=e.def.tag||'';const t=e.def.tag,o='string'==typeof e.def.domContent?'"'+e.def.domContent+'"':void 0,i=!!(t&&e.children[0]&&l(e.def.childDefs));n=c(t,e.def.props,i?null:o),i&&(n=n.replace('/>','>'));break}case'root':{const t=e.domNode;if(s=t?t.tagName.toLowerCase():'',t){n=c(s,null,!1,t).replace('/>','>')}break}case'host':s='Host';break;case'portal':{s='Portal';const t=(e.def.props||{}).container;n=c(t?t.tagName.toLowerCase():'body',e.def.props,!1,t||function getDocBodyBy(e){var t;let o=e;for(;o;){if(o.domNode)return(null===(t=o.domNode.ownerDocument)||void 0===t?void 0:t.body)||null;o=o.parent}return null}(e)),n=n.replace('/>','>');break}}const i={id:e,treeNode:e,parent:t,level:o,name:s,description:n};return t&&(t.children?t.children.push(i):t.children=[i]),i})),s=o.map((e=>e.id)),i=n.state.collapsed.filter((e=>s.includes(e)));i.length!==n.state.collapsed.length&&setCollapsed(i);const r=n.state.selected.filter((e=>s.includes(e)));return r.length!==n.state.selected.length&&setSelected(r),o}));let f=p(n.state.host,(null===(i=n.state.debugLive)||void 0===i?void 0:i.iUpdate)||0);const areNoneCollapsed=(e=n.state.collapsed)=>void 0===e[0],setCollapsed=e=>{const t=areNoneCollapsed();areNoneCollapsed(e)!==t&&s.setInData('settings.noneCollapsed',!t),n.setInState('collapsed',e)},toggleCollapsed=(e,t)=>{setCollapsed(findItemsIdsBy(e,t||'self',n.state.collapsed,f.filter((e=>e.children&&void 0!==e.children[0]))))},toggleConcept=(e,t)=>{let o=s.getInData('settings.filter')||'';const n='['+e+']';let l=o?o.split(','):[];const i=l.map((e=>e.trim().toLowerCase())),r=i.findIndex((e=>e===n));if(t){const e=['boundary','dom','host','pass','portal','root',''].map((e=>'['+e+']')),t=i.filter((t=>!e.includes(t)||t===n));t.length===l.length?-1!==r?l.splice(r,1):l.push(void 0===l[0]?n:' '+n):(l=t,-1===r&&l.push(void 0===l[0]?n:' '+n))}else-1!==r?l.splice(r,1):l.push(void 0===l[0]?n:' '+n);s.setInData('settings.filter',l.join(','))};s.listenTo('settings.toggleCollapseAll',(()=>{setCollapsed(areNoneCollapsed()?f.filter((e=>e.children&&void 0!==e.children[0])).map((e=>e.id)):[])}));let m=!0;const whetherShouldSelect=(e=n.state.selected,t=!1)=>b?b.some((t=>!e.includes(t.id)))||t&&(v&&v.some((t=>!e.includes(t.id)))||w&&w.some((t=>!e.includes(t.id))))||!1:void 0===e[0],setSelected=e=>{const t=n.state.selected[n.iMatchCycle],o=void 0!==t?e.indexOf(t):-1;-1!==o?n.iMatchCycle+=o-n.iMatchCycle:n.iMatchCycle>=0&&n.iMatchCycle--;const l=n.state.filterSplits,i=l&&b?b.some((t=>!e.includes(t.id)&&matchesFilter(t,l))):void 0===e[0];i!==m&&s.setInData('settings.shouldSelect',m=i),n.setInState('selected',e)},toggleSelected=(e,t)=>{setSelected(findItemsIdsBy(e,t||'self',n.state.selected,f))};s.listenTo('settings.toggleSelectMatched',(e=>{let t=[];if(!b||!n.state.hideUnmatched&&e)void 0===n.state.selected[0]&&(t=f.map((e=>e.id)));else{const o=b.map((e=>e.id)).concat(e?(v&&v.map((e=>e.id))||[]).concat(w&&w.map((e=>e.id))||[]):[]);t=(e?void 0===n.state.selected.filter((e=>o.includes(e)))[0]:whetherShouldSelect())?o:n.state.selected.filter((e=>!o.includes(e)))}setSelected(t)})),s.listenTo('settings.scrollToMatched',((e,t)=>{const o=b?t||n.state.showCollapsed?b:b.filter((e=>!isItemWithinCollapsed(e,n.state.collapsed))):[];if(!o[0])return;n.iMatchCycle=e?n.iMatchCycle-1<0?o.length-1:n.iMatchCycle-1:n.iMatchCycle+1>=o.length?0:n.iMatchCycle+1;const s=o[n.iMatchCycle];scrollToItem(s)}));const onItemLink=(e,t)=>{const o=e?f.find((t=>t.id===e)):null;switch(t||'focus'){case'focus':o&&scrollToItem(o);break;case'details':setTipBy(o?o.id:null);break;case'details-break':setTipBy(o?o.id:null),setSkipHover();break;case'log':o&&consoleLog(n.state.debugSettings,'MixDOMDebug: Log item',o.treeNode)}},scrollToItem=async t=>{const o=r.getComponent(),s=n.state.collapsed;if(!o)return;let l=null,i=t.parent;for(;i;){const e=(l||s).indexOf(i.id);-1!==e&&(l||(l=s.slice()),l.splice(e,1)),i=i.parent}if(l){let t=new Promise((t=>(o||n).listenTo('didUpdate',(()=>(o||n).setTimer(null,t,20)),null,e.OneShot)));n.setInState('collapsed',l),await t}const a=f.filter(filterer).indexOf(t);-1!==a&&o.scrollToIndex(a,'instant',!0,(e=>{var t;return e&&(null===(t=e.querySelector('button'))||void 0===t?void 0:t.focus())}))},h=u(((e,t,o)=>o||t?e.filter((e=>t&&t.includes(e.id)||o&&matchesFilter(e,o))):null)),g=u((e=>{const t=[];for(const o of e){let n=o.parent;for(;n;)t.includes(n)||e.includes(n)||t.push(n),n=n.parent}return t})),y=u(((e,t)=>{const o=[];for(const n of e){if(t.includes(n))continue;let e=n.parent;for(;e;){if(t.includes(e)){o.push(n);break}e=e.parent}}return o})),filterer=e=>!(!(n.state.hideUnmatched&&n.state.showCollapsed&&(!n.state.ignoreFilter&&n.state.filterSplits||!n.state.ignoreSelection&&void 0!==n.state.selected[0]))&&isItemWithinCollapsed(e,n.state.collapsed))&&(!b||!n.state.hideUnmatched||(!!b.includes(e)||(!(!v||!v.includes(e))||!(!w||!w.includes(e)))));let b=h(f,n.state.ignoreSelection||void 0===n.state.selected[0]?null:n.state.selected,n.state.ignoreFilter?null:n.state.filterSplits),v=b&&n.state.showParents?g(b):null,w=b&&n.state.showChildren?y(f,b):null,C=0,x=!1;const setSkipHover=()=>(x=!0)&&n.setTimer('skip-hover',(()=>{}),300),setTipBy=(e,t=!0)=>{e||(C&=-3),n.clearTimers('tip-hover','skip-hover'),n.setState({tipItem:e&&f.find((t=>t.id===e))||null,reselectRefreshId:t?{}:n.state.reselectRefreshId})};s.listenTo('settings.setTipDisplay',setTipBy);const onToggleTip=e=>{var t;setTipBy((null===(t=n.state.tipItem)||void 0===t?void 0:t.treeNode)===e?null:e)},onTipPresence=(e,t,o)=>{if(n.state.ignoreTip)return;const s='popup'===t?2:1;C=o?C|s:C&~s,o?'hoverable'===t?(!x&&!n.hasTimer('skip-hover')&&!(2&C)&&n.setTimer('tip-hover',(()=>setTipBy(e)),500),x=!1):setTipBy(e,!1):!C&&n.state.tipItem?(setTipBy(null),'popup'===t&&setSkipHover()):n.clearTimers('tip-hover')},getTipSourceElement=e=>{var t,o;return e?(null===(t=r.getComponent())||void 0===t?void 0:t.getElementAt(f.filter(filterer).findIndex((t=>t.id===e))))||null:n.state.tipItem&&(null===(o=r.getComponent())||void 0===o?void 0:o.getElementAt(f.filter(filterer).indexOf(n.state.tipItem)))||null},T=o.wired((()=>{var e;return Object.assign({},d(n.state.debugSettings,null===(e=n.state.debugLive)||void 0===e?void 0:e.iUpdate))}),((e,t,o)=>{const s=e.item,l=s.children&&void 0!==s.children[0],i=n.state.selected.includes(s.id);return Object.assign(Object.assign(Object.assign({},e),t),{collapsed:l?n.state.collapsed.includes(s.id):null,selected:i,dimmed:b?!b.includes(s):!n.state.ignoreSelection&&void 0!==n.state.selected[0]&&!i})}),UIAppTreeItem,'WiredTreeItem');return n.addWired(T),n.listenTo('beforeUpdate',(()=>{var e;let t=b;f=p(n.state.host,(null===(e=n.state.debugLive)||void 0===e?void 0:e.iUpdate)||0),b=h(f,n.state.ignoreSelection||void 0===n.state.selected[0]?null:n.state.selected,n.state.ignoreFilter?null:n.state.filterSplits),v=b&&n.state.showParents?g(b):null,w=b&&n.state.showChildren?y(f,b):null,t!==b&&m!==whetherShouldSelect()&&s.setInData('settings.shouldSelect',m=!m)})),(e,t)=>{var n;return o.def('div',{class:a('ui-app-host-tree layout-fit-size',e.className),style:e.style},o.def('div',{class:'flex-row flex-align-items-center layout-fit-size'},o.def(UIList,{items:f,Item:T,keyProp:'id',filter:filterer,rowHeight:30,refreshId:{},listClassName:e.listClassName,refVirtualList:r})),o.def(I,{item:t.tipItem,iUpdate:null===(n=t.debugLive)||void 0===n?void 0:n.iUpdate,onItemLink,getSourceElement:getTipSourceElement,debugInfo:t.debugSettings,reselectRefreshId:t.reselectRefreshId,onTipPresence}))}};var __rest=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&'function'==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o};const L=function DebugHost(e,t,n){t.state={theme:'dark',filter:'',showCollapsed:!1,showParents:!1,showChildren:!1,hideUnmatched:!1,ignoreFilter:!1,ignoreSelection:!1,ignoreTip:!1,shouldSelect:!0,noneCollapsed:!0},n.listenToData('settings',(e=>{const o=e||t.state,n=__rest(o,['hiddenTipSections']);t.setState(Object.assign({},n))}));const setFilter=e=>{n.setInData('settings.filter',e)},toggleFilterAuto=()=>n.setInData('settings.showCollapsed',!t.state.showCollapsed),toggleFilterParents=()=>n.setInData('settings.showParents',!t.state.showParents),toggleFilterChildren=()=>n.setInData('settings.showChildren',!t.state.showChildren),toggleHideUnmatched=()=>n.setInData('settings.hideUnmatched',!t.state.hideUnmatched),toggleIgnoreFilter=()=>n.setInData('settings.ignoreFilter',!t.state.ignoreFilter),toggleIgnoreSelection=()=>n.setInData('settings.ignoreSelection',!t.state.ignoreSelection),toggleIgnoreTip=()=>n.setInData('settings.ignoreTip',!t.state.ignoreTip),toggleCollapseAll=()=>n.sendSignal('settings.toggleCollapseAll'),toggleSelectMatched=e=>n.sendSignal('settings.toggleSelectMatched',e.shiftKey),toggleTheme=()=>n.sendSignal('settings.toggleTheme'),scrollToMatched=e=>n.sendSignal('settings.scrollToMatched',e.ctrlKey||e.altKey||e.metaKey,e.shiftKey),logHost=()=>consoleLog(n.getInData('debug.settings'),'MixDOMDebug: Log host',n.getInData('debug.host')),renderCollapseTip=()=>wrapTip(o.def('div',null,'Click to collapse/uncollapse all.')),renderSelectTip=()=>wrapTip(o.def('div',null,'Click to select/deselect matched (or all).',o.def('br',null),' - Click with ',o.def('b',null,'Shift'),' to always select/deselect all (= including dimly visible).')),renderScrollToMatchedTip=()=>wrapTip(o.def('div',null,'Scroll and focus to the next match.',o.def('br',null),' - Click with ',o.def('b',null,'Ctrl'),'/',o.def('b',null,'Alt'),' to go backwards.',o.def('br',null),' - Click with ',o.def('b',null,'Shift'),' to include matched but collapsed by parents (= uncollapses parents).')),renderHideUnmatchedTip=()=>wrapTip(o.def('div',null,'Whether to always show all items, or only matched by filter and/or selection.')),renderIgnoreFilterTip=()=>wrapTip(o.def('div',null,'Disable the effect of the filter temporarily.')),renderIgnoreSelectionTip=()=>wrapTip(o.def('div',null,'Disable the effect of the selection temporarily.')),renderIgnoreTipTip=()=>wrapTip(o.def('div',null,'Disable the automatic popup display.')),renderFilterAutoTip=()=>wrapTip(o.def('div',null,'Whether auto-expands collapsed parents when filtering.')),renderFilterParentsTip=()=>wrapTip(o.def('div',null,'Whether shows parents with matching children.')),renderFilterChildrenTip=()=>wrapTip(o.def('div',null,'Whether shows children of matching parents.')),renderThemesTip=()=>wrapTip(o.def('div',null,'Toggle color theme.')),renderInputTip=()=>wrapTip(o.def('div',null,'Filter items by keywords.',o.def('br',null),' - Separate by comma (',o.def('b',null,','),') and join by space (',o.def('b',null,' '),').',o.def('br',null),' - Use brackets for tags: [root], [boundary], [dom], [portal], [pass], [host]')),renderConsoleTip=()=>wrapTip(o.def('div',null,'Click to log the debugged ',o.def('b',null,'Host'),' instance in console.'));return(e,n)=>{const s=!!t.state.filter&&t.state.filter.replace(/\,/g,'').trim();return o.def('div',{class:'ui-app-top-bar layout-fit-width flex-row flex-align-items-center layout-gap-m layout-padding-m layout-border-box'},o.def(UIAppButton,{_key:'select',look:'transparent',escToCloseTip:!0,iconName:n.shouldSelect?'select-all':'select-none',onPress:toggleSelectMatched,renderTip:renderSelectTip}),o.def(UIAppButton,{_key:'collapse',look:'transparent',escToCloseTip:!0,iconName:n.noneCollapsed?'expanded':'collapsed',onPress:toggleCollapseAll,renderTip:renderCollapseTip}),o.def(UIAppButton,{_key:'scrollTo',look:'transparent',escToCloseTip:!0,iconName:'scroll-to',disabled:n.shouldSelect&&!s||void 0,onPress:scrollToMatched,renderTip:renderScrollToMatchedTip}),o.def(UIAppInput,{_key:'filter',look:'edge',type:'text',disabled:n.ignoreFilter||void 0,escToCloseTip:!0,escToClearInput:!0,value:n.filter,onValue:setFilter,className:a('flex-grow layout-fit-height style-text-bold',s&&'active'),placeholder:'filter items',renderTip:renderInputTip}),n.hideUnmatched?o.def(o.Fragment,null,o.def(UIAppButton,{_key:'showCollapsed',look:n.hideUnmatched?'transparent':'filled',escToCloseTip:!0,iconName:n.hideUnmatched?'filter-expanded':'filter-collapsed',disabled:!n.hideUnmatched||void 0,toggled:n.hideUnmatched&&n.showCollapsed,onPress:toggleFilterAuto,renderTip:renderFilterAutoTip}),o.def(UIAppButton,{_key:'showParents',look:n.hideUnmatched?'transparent':'filled',escToCloseTip:!0,iconName:'filter-parents',disabled:!n.hideUnmatched||void 0,toggled:n.hideUnmatched&&n.showParents,onPress:toggleFilterParents,renderTip:renderFilterParentsTip}),o.def(UIAppButton,{_key:'showChildren',look:n.hideUnmatched?'transparent':'filled',escToCloseTip:!0,iconName:'filter-children',disabled:!n.hideUnmatched||void 0,toggled:n.hideUnmatched&&n.showChildren,onPress:toggleFilterChildren,renderTip:renderFilterChildrenTip})):null,o.def(UIAppButton,{_key:'eye',look:'edge',escToCloseTip:!0,iconName:n.hideUnmatched?'show-matched':'show-all',onPress:toggleHideUnmatched,renderTip:renderHideUnmatchedTip}),o.def(UIAppButton,{_key:'ignoreFilter',look:'transparent',escToCloseTip:!0,iconName:'no-filter',toggled:n.ignoreFilter,onPress:toggleIgnoreFilter,renderTip:renderIgnoreFilterTip}),o.def(UIAppButton,{_key:'ignoreSelection',look:'transparent',escToCloseTip:!0,iconName:'no-selection',toggled:n.ignoreSelection,onPress:toggleIgnoreSelection,renderTip:renderIgnoreSelectionTip}),o.def(UIAppButton,{_key:'ignoreTip',look:'transparent',escToCloseTip:!0,iconName:'no-info',toggled:n.ignoreTip,onPress:toggleIgnoreTip,renderTip:renderIgnoreTipTip}),o.def('span',{_key:'mix-dom-debug'},o.def('b',null,'mix-dom-debug'),' ',o.def('span',{class:'style-text-small'},'(v',y,')')),o.def(UIAppButton,{_key:'theme',look:'transparent',escToCloseTip:!0,iconName:'theme',onPress:toggleTheme,renderTip:renderThemesTip}),o.def(UIAppButton,{_key:'console',look:'transparent',escToCloseTip:!0,iconName:'console',onPress:logHost,renderTip:renderConsoleTip}))}},P=function UIApp(e,t,o){return t.state={theme:'dark'},o.listenToData('settings.theme',(e=>t.setInState('theme',e)),[t.state.theme]),(e,t)=>p.def('div',{class:a('ui-app style-back-main style-front-main layout-fit-size flex-col','color-theme-'+t.theme,'layout-theme-default','transition-theme-default')},p.def(L,{refreshId:e.refreshId}),p.def('div',{class:'flex-row layout-fit-width flex-grow layout-overflow-hidden'},p.def(O,{refreshId:e.refreshId,listClassName:'layout-padding-m layout-border-box'})),p.def(x.WithContent,null,p.def('div',{class:'popup-tip-container layout-abs-fill layout-z-high layout-overflow-hidden layout-no-pointer'},x.Content)))};class MixDOMDebug{constructor(e){this.onUpdate=(e,t)=>{e||null===this.updateTimer&&(this.updateTimer=window.setTimeout((()=>{if(this.updateTimer=null,!this.ownHost.getContainerElement())return void(t&&this.clearHostListeners(t));const e=this.contexts.debug.data.live,o=e?e.iUpdate+1:1;this.contexts.debug.setInData('live.iUpdate',o)}),1))},this.updateTimer=null,this.refreshId={},this.contexts={debug:new t(Object.assign(Object.assign({},this.getSettingsAndLive()),{host:null,focusedId:null})),settings:new t({theme:'dark',filter:'',showCollapsed:!1,showParents:!1,showChildren:!1,hideUnmatched:!1,ignoreSelection:!1,ignoreFilter:!1,ignoreTip:!1,shouldSelect:!0,noneCollapsed:!0,hiddenTipSections:[]})},this.contexts.settings.listenTo('toggleTheme',(()=>this.contexts.settings.setData({theme:'dark'===this.contexts.settings.data.theme?'light':'dark'}))),this.ownHost=new i(r(P,{refreshId:this.refreshId}),e||null,{onlyRunInContainer:!0,renderTimeout:null},this.contexts),this.initialize()}setHost(e,t){const{settings:o,live:n}=this.getSettingsAndLive(t),s=this.contexts.debug.data.host;s&&s===e||(s&&this.clearHostListeners(s),e.services.renderCycle.listenTo('onFinish',this.onUpdate,[e])),window.setTimeout((()=>this.contexts.debug.setData({host:e,settings:o,live:n})),0),consoleLog(o,'MixDOMDebug: '+(s?' Host re-added':' Host added'),e)}clearHost(){const e=this.contexts.debug.data.host;e&&(this.clearHostListeners(e),this.contexts.debug.setData(Object.assign({host:null,focusedId:null},this.getSettingsAndLive())))}refresh(e){var t;e&&(this.refreshId={}),null===(t=this.contexts.debug.data.host)||void 0===t||t.updateRoot(r(P,{refreshId:this.refreshId}))}getSettingsAndLive(e,t=0){const o={console:window.console},n={iUpdate:t};return{settings:e?Object.assign(Object.assign({},o),e):o,live:n}}initialize(){}clearHostListeners(e){e.services.renderCycle.unlistenTo('onFinish',this.onUpdate),consoleLog(this.contexts.debug.data.settings,'MixDOMDebug: Host removed',e)}}MixDOMDebug.mixDOMDebug=null,MixDOMDebug.stopDebug=()=>{if(MixDOMDebug.mixDOMDebug){const e=MixDOMDebug.mixDOMDebug.contexts.debug.data.host;e&&MixDOMDebug.mixDOMDebug.clearHostListeners(e),MixDOMDebug.mixDOMDebug=null}},MixDOMDebug.startDebug=(e,t)=>{const o=window,n=y;let s='http://localhost/www/projects/MixDOM/mix-dom-debug/dist/';s&&!s.endsWith('/')&&(s+='/');const l=s+'css/';o.document.documentElement.setAttribute('lang','en'),o.document.head.innerHTML=`<title>MixDOMDebug | Debugger for MixDOM library</title><meta name='description' content="MixDOMDebug provides a debugging view for MixDOM library hosts and contexts" /><meta name='keywords' content='mix-dom-debug, mixdomdebug, mixdomjs, mix-dom-js, mix, dom, debug, service' /><meta http-equiv='content-type' content='text/html' charset='utf-8' /><meta name='viewport' content='width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no' /><meta name="google-site-verification" content="vuXdGK5mafeCIvjzenv2uDtR4S-nxq8crCSAW_Vgyg0" /><link href='https://fonts.googleapis.com/css?family=Abel' rel='stylesheet' /><link href="${l}prettify.css?v=${n}" rel='stylesheet' type="text/css" /><link href="${l}common.css?v=${n}" rel='stylesheet' type="text/css" /><link href="${l}app.css?v=${n}" rel="stylesheet" type="text/css" />`,o.document.body.style.cssText='background: #222; margin: 0; padding: 0; width: 100%; height: 100%; font-family: \'Abel\', Arial, sans-serif; font-size: 16px;';const i=o.document.createElement('div');i.classList.add('ui'),i.id='app-root';const r=o.document.createElement('div');r.classList.add('ui'),r.id='app-hide',r.style.cssText='position: absolute; inset: 0; z-index: 1; background: #222; opacity: 1; transition: opacity 150ms ease-in-out; pointer-events: none;',o.document.body.appendChild(i),o.document.body.appendChild(r);let a=0;const ready=()=>{if(--a)return;const n=o.document.querySelector('#app-hide');n&&(o.document.body.style.removeProperty('background'),n.style.setProperty('opacity','0'),window.setTimeout((()=>{n.remove()}),150),e&&MixDOMDebug.mixDOMDebug&&MixDOMDebug.mixDOMDebug.setHost(e,t))};['https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/prettify.js','https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.15.1/beautify.min.js'].map((e=>{a++;const t=o.document.createElement('script');return t.setAttribute('type','text/javascript'),t.setAttribute('src',e),t.onload=ready,t})).forEach((e=>o.document.body.appendChild(e)));const d=o.document.querySelector('#app-root');return MixDOMDebug.mixDOMDebug=new MixDOMDebug(d),MixDOMDebug.mixDOMDebug};const MixEnabled=(e,t)=>(t.state={enabled:e.enabled||!1},t.toggleEnabled=()=>t.setInState('enabled',!t.state.enabled),null),MixEscEnabled=(e,t)=>{const onKeyDown=e=>{'Escape'===e.key&&t.state.enabled&&(t.toggleEnabled(),e.preventDefault(),e.stopPropagation())},o=t.toggleEnabled;return t.toggleEnabled=()=>{t.state.enabled?window.removeEventListener('keydown',onKeyDown):window.addEventListener('keydown',onKeyDown),o()},null},MixPopupEnabled=(e,t)=>(t.WithPopup=()=>{if(t.state.enabled){const e=o.def('div',{style:{position:'absolute',inset:0,zIndex:100,display:'flex',justifyContent:'center',alignItems:'center',background:'rgba(0,0,0,.9)',color:'#aaa',overflow:'hidden'}},o.def('button',{style:'position: absolute; top: 1em; right: 1em;',onClick:t.toggleEnabled},'Close'),o.def('div',null,o.Content));return null==e?null:!t.popupContainer||t.popupContainer instanceof Node?o.def(o.Portal,{container:t.popupContainer||document.body},e):o.def(t.popupContainer,null,e)}return null},null),MixMouseMove=(e,t)=>{const toggleListeners=e=>{e!==o&&(o=!0,(o?document.addEventListener:document.removeEventListener)('mousemove',onMove),(o?document.addEventListener:document.removeEventListener)('mouseup',onUp))};let o=!1;const onDown=e=>{toggleListeners(!0),t.sendSignal('onMouseStart',e)},onMove=e=>t.sendSignal('onMouseMove',e),onUp=(e,o)=>{toggleListeners(!1),t.sendSignal('onMouseEnd',e||null,!!o)};return t.cancelMouse=()=>onUp(null,!0),t.mouseRef=new n,t.mouseRef.listenTo('domDidMount',(e=>e.addEventListener('mousedown',onDown))),null},MixNumberSlider=(e,t)=>{t.state={value:e.initValue||0},t.sliderAlign='horizontal';let o=null;t.calcValueBy=e=>{const o=t.mouseRef.getElement();if(!o)return t.state.value;const n=o.getBoundingClientRect(),s='horizontal'===t.sliderAlign,l=s?e.clientX:e.clientY;if(l<=(s?n.left:n.top))return s?t.props.minValue:t.props.maxValue;if(l>=(s?n.right:n.bottom))return s?t.props.maxValue:t.props.minValue;return(s?(l-n.left)/n.width:(l-n.top)/n.height)*(t.props.maxValue-t.props.minValue)+t.props.minValue},t.setValue=e=>t.setInState('value',e),t.listenTo('onMouseStart',(e=>{o=t.state.value,t.setValue(t.calcValueBy(e))})),t.listenTo('onMouseMove',(e=>{null!=o&&t.setValue(t.calcValueBy(e))})),t.listenTo('onMouseEnd',(e=>o=null));const n=t.cancelMouse;return t.cancelMouse=()=>{null!=o&&t.setInState('value',o),n()},null};export{FitBoxAlgoritms,b as FitLocks,MixDOMDebug,MixEnabled,MixEscEnabled,MixMouseMove,MixNumberSlider,MixOnEscape,MixPopupEnabled,P as UIApp,UIAppButton,O as UIAppHostTree,UIAppIcon,UIAppInput,T as UIAppTip,x as UIAppTipRemote,L as UIAppTopBar,UIAppTreeItem,v as UIFitBox,UIList,UIPopupContainer,w as UIPopupContents,UITreeNodeType,C as UIVirtualList,UIVirtualRow,k as allTipSectionNames,M as appIcons,y as appVersion,cleanMargin,computeSnappedValue,consoleLog,flattenTree,flattenTreeWith,wrapTip};
